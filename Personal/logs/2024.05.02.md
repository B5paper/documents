* `pci_set_drvdata()`与`pci_get_drvdata()`用于获取/设置设备驱动私有数据

    syntax:

    ```c
    void *pci_get_drvdata(struct pci_dev *pdev);
    void pci_set_drvdata(struct pci_dev *pdev, void *data);
    ```

    It is a convenient way for example to save a pointer to a local dynamically allocated device context in the device probe callback and then retrieve it back with pci_get_drvdata in the device remove callback and do a proper cleanup of the context.

* cached tasK: 写一个接收 cgtn 广播的 python 程序，实现断线自动重连

* 为什么写`MKDEV()`时可以填`MKDEV(255, 0)`, `MKDEV(220, 0)`

    怎么保证 255, 220 这些数字不与其他冲突？

    答：可以用`cat /proc/devices`查看已经注册过的设备

* 报错：`insmod: ERROR: could not insert module ./hello.ko: Invalid module format`

    主要是因为编译时候使用的内核版本和当前系统的内核版本不一致。

* c++ 中初始化 struct 的方法

    ```cpp
    #include <iostream>
    using namespace std;

    struct AAA {
        int val_a;
        long val_b;
    };

    struct AAA a {

    };

    struct AAA b = {

    };

    struct AAA c {
        .val_a = 1
    };

    struct AAA d = {
        .val_a = 2
    };

    int main()
    {
        cout << a.val_a << endl;
        cout << b.val_a << endl;
        cout << c.val_a << endl;
        cout << d.val_a << endl;
        return 0;
    }
    ```

    output:

    ```
    0
    0
    1
    2
    ```

    在 c 与 gnuc 中，由于不支持初始化列表（initialization list），所以不支持`struct AAA a { };`这样的初始化方法，但是支持加`=`的初始化方法。

* cdev 的 ops 函数原型中，`read`，`write`，`unloacked_ioctl`的返回值类型都是`ssize_t`，对应的是`long`。