* [v] 调研 siccl comm 算子的改动

    feedback:

    1. 主要是增加了 iohub, peg 等 xml tag 和 attr 的支持，其他的基本保持不变

* [v] 调研 how to delete merge info from a commit

* [v] 调研 a100 4 gpu 环境为什么 gpu 到 gpu 的 path type 是 8 而不是 1

    feedback:

    1. 在`compute_path()`函数中的

        ```cpp
        PeerInfo* dstInfo = &comm.peerInfo[topo_system.nodes[GPU][vert_idx_1]->gpu.rank];
        for (int p = 0; p < topo_system.nodes[GPU].size(); p++) {
            if (p == vert_idx_1) {
                continue;
            }
            PeerInfo* srcInfo = &comm.peerInfo[topo_system.nodes[GPU][p]->gpu.rank];
            int p2p = 0;
            // ncclTransports[TRANSPORT_P2P]->canConnect(&p2p, system, NULL, srcInfo, dstInfo);
            if (p2p == 0) {
                int shm = 0;
                // NCCLCHECK(ncclTransports[TRANSPORT_SHM]->canConnect(&shm, system, NULL, srcInfo, dstInfo));
                if (shm == 0) {
                    // Mark this peer as inaccessible. We'll trim it later.
                    topo_system.nodes[GPU][p]->paths[GPU][vert_idx_1].type = PATH_NET;
                }
            }
        }
        ```

        这里没有对 p2p 和 shm 进行检测，导致进入了`if (shm == 0)`分支。

* [v] 调研 a100 4 gpu 上，为什么 cpu 1 -> cpu 0 的 link sys 的 bw 不对，135 机器上是 16，siccl 是 5000

    因此导致的 edge 顺序也不对

    cpu 0 -> cpu 1 同理。

    feedback:

    1. `xml_tag_to_topo_system()`中的`topo_system_connect_nodes()`之前的 bw 计算得不对，这个 bw 是根据 cpu model 计算出来的。16 指的是 amd 的 cpu。

    1. `ncclTopoSearchRecGpu()`中的

        ```cpp
        } else if (step == backToFirstRank) {
            // Find first GPU and loop back to it
            int p;
            ret = system->find_node((size_t*) &p, GPU, graph->intra[graph->nChannels*ngpus]);
            if (ret != 0) {
                printf("fail to find gpu node\n");
                return -1;
            }
            // getGpuIndex(system, graph->intra[graph->nChannels*ngpus], &p);
            TopoNode* firstGpu;
            ncclTopoFollowPath(system, graph, GPU, g, GPU, p, 1, &firstGpu);
            if (firstGpu) {
                ncclTopoSearchRecGpu(system, graph, saveGraph, firstGpu, step+1, backToNet, -1, forcedOrder, time);
                ncclTopoFollowPath(system, graph, GPU, g, GPU, p, -1, &firstGpu);
            }
        ```

        其中`getGpuIndex(system, graph->intra[graph->nChannels*ngpus], &p);`这个函数看起来应该是使用 gpu 的 dev id 找到 gpu 的 idx。如果这个假设是对的，那么`graph->intra`存储的就应该是 dev id（待验证）。并且……想不起来了。

* [new] 调研除了 nccl 外的其他 ccl 库