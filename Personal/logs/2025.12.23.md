* matlab 2025b x64 破解版下载

    <https://www.puresys.net/8739.html>

* 破解软件站，回头调研一下

    <https://www.puresys.net/>

* matlab

    * 基本计算

        ```matlab
        >> 3 + 4 * 2  % 直接计算
        ans = 11

        >> x = 5;      % 赋值（分号抑制输出）
        >> y = x^2 + 3*x - 2
        y = 38
        ```

    * 向量和矩阵

        ```matlab
        >> A = [1 2 3; 4 5 6; 7 8 9]  % 创建矩阵
        >> v = 1:0.5:3                % 创建向量 [1, 1.5, 2, 2.5, 3]
        >> B = zeros(3, 2)            % 3×2零矩阵
        >> C = ones(2, 3)             % 2×3全1矩阵
        ```

        `A`中的空格也可以为逗号。

        `1:3`默认步长为 1，即生成`1 2 3`

    * 常用运算

        ```matlab
        >> A'          % 转置
        >> A * B       % 矩阵乘法
        >> A .* B      % 元素对应相乘
        >> inv(A)      % 求逆
        >> size(A)     % 矩阵大小
        ```

        注：

        1. `size(A)`得到的也是一个向量，或者说，一维矩阵

* matlab 编程基础

    * 脚本文件 (.m)

        ```matlab
        % myscript.m
        x = linspace(0, 2*pi, 100);
        y = sin(x);
        plot(x, y);
        title('正弦曲线');
        ```

        在 command windows 直接输入脚本文件的名字，即可运行。比如

        `>>> myscript`

    * 函数文件

        ```matlab
        % myfunction.m
        function [output1, output2] = myfunction(input1, input2)
            % 函数说明
            output1 = input1 + input2;
            output2 = input1 * input2;
        end
        ```

    * 流程控制

        ```matlab
        % 条件判断
        if x > 0
            disp('正数');
        elseif x < 0
            disp('负数');
        else
            disp('零');
        end

        % 循环
        for i = 1:10
            disp(i);
        end

        while x < 100
            x = x * 2;
        end
        ```

* matlab 数据可视化

    * 基本绘图

        ```matlab
        x = linspace(0, 2 * pi)
        y = sin(x)
        figure;                       % 新建图形窗口
        plot(x, y, 'r--', 'LineWidth', 2);  % 红色虚线
        xlabel('X轴');
        ylabel('Y轴');
        grid on;                      % 显示网格
        hold on;                      % 保持图形
        plot(x, cos(x), 'b-');       % 继续绘图
        legend('sin', 'cos');        % 添加图例
        ```

        注：

        1. `hold on`和`grid on`也可以写在 plot 第一幅图之前

    * 子图

        ```matlab
        subplot(2, 2, 1);
        plot(x, sin(x));
        subplot(2, 2, 2);
        plot(x, cos(x));
        subplot(2, 2, 3);
        bar([1 2 3 4]);
        subplot(2, 2, 4);
        histogram(randn(1000,1));
        ```

        注：

        1. 还可以写成`subplot(221)`，`subplot(222)`等。


* matlab 函数

    * 文件命名规则

        ```matlab
        % 文件名必须与函数名相同！
        % myfunction.m 文件内容：
        function output = myfunction(input1, input2)
            % 函数体
            output = input1 + input2;
        end
        ```

    * 直接调用（同目录）

        ```matlab
        % 当函数文件在当前目录或MATLAB路径中时
        result = myfunction(3, 5);
        disp(result);  % 输出 8
        ```

    * 通过函数句柄调用

        ```matlab
        % 创建函数句柄
        myfunc = @myfunction;

        % 使用句柄调用
        result = myfunc(3, 5);

        % 匿名函数句柄（适用于简单函数）
        square = @(x) x^2;
        result = square(4);  % 返回 16
        ```

    * 带路径调用

        ```matlab
        % 如果函数在不同文件夹
        result = C:\MyFunctions\myfunction(3, 5);

        % 或先添加到路径
        addpath('C:\MyFunctions');
        result = myfunction(3, 5);
        ```

* matlab 中，单引号`'`和双引号`"`都可以表示字符串。

* matlab 中，`disp('xxx')`和`disp('xxx');`效果相同，都没有`ans = xxx`的输出。

* matlab 中的`1:10`包含 1 和 10。即 end included

* matlab 函数类型和调用示例

    * 单输出函数

        ```matlab
        % circle_area.m
        function area = circle_area(radius)
            area = pi * radius^2;
        end

        % 调用
        area = circle_area(5);  % 计算半径为5的圆面积
        ```

        注：

        1. 函数文件中只能写函数，不能写调用。

            调用只能写在脚本文件中。

    * 多输出函数

        ```matlab
        % stats.m
        function [mean_val, std_val] = stats(data)
            mean_val = mean(data);
            std_val = std(data);
        end

        % 调用方式1：获取所有输出
        [avg, deviation] = stats([1 2 3 4 5]);

        % 调用方式2：只获取第一个输出
        avg_only = stats([1 2 3 4 5]);

        % 调用方式3：使用波浪线忽略输出
        [~, std_only] = stats([1 2 3 4 5]);
        ```

    * 无输出函数

        ```matlab
        % plot_data.m
        function plot_data(x, y)
            figure;
            plot(x, y, 'b-', 'LineWidth', 2);
            xlabel('X'); ylabel('Y');
            title('数据图');
            grid on;
        end

        % 调用
        x = 0:0.1:10;
        y = sin(x);
        plot_data(x, y);  % 只执行绘图，不返回数据
        ```

    * 带可选参数的函数

        ```matlab
        % calculate.m
        function result = calculate(a, b, operation)
            if nargin < 3  % 检查输入参数数量
                operation = 'add';
            end
            
            switch operation
                case 'add'
                    result = a + b;
                case 'subtract'
                    result = a - b;
                case 'multiply'
                    result = a * b;
                otherwise
                    error('不支持的操作');
            end
        end

        % 调用
        result1 = calculate(3, 5);          % 默认加法
        result2 = calculate(3, 5, 'multiply');  % 指定乘法
        ```

        注：

        1. matlab 不支持函数的默认参数

* matlab 嵌套函数和子函数

    * 嵌套函数

        ```matlab
        % outer.m
        function outer(x)
            disp('外层函数');
            nested_func(x);
            
            function nested_func(y)
                disp(['嵌套函数接收到: ', num2str(y)]);
            end
        end

        % 调用
        outer(10);
        ```
        
        注：

        * `nested_func()`可以写在调用前，也可以写在调用后

    * 子函数（同一文件多个函数）

        ```matlab
        % mainfile.m
        function mainfile()
            data = [1 2 3 4 5];
            result1 = subfunc1(data);
            result2 = subfunc2(data);
            disp(['结果: ', num2str(result1), ', ', num2str(result2)]);
        end

        % 子函数1
        function res1 = subfunc1(d)
            res1 = mean(d);
        end

        % 子函数2
        function res2 = subfunc2(d)
            res2 = sum(d);
        end
        ```

        注：

        1. 子函数必须写在主函数的下面。

            即文件的第一个函数必须是以文件名命名的函数。

* matlab 私有函数

    创建私有文件夹

    ```matlab
    project_folder/
    ├── main.m
    └── private/
        └── helper.m  % 私有函数，只能被父文件夹中的函数调用
    ```

    ```matlab
    % private/helper.m
    function result = helper(input)
        result = input * 2;
    end

    % main.m
    function main()
        x = 5;
        y = helper(x);  % 可以调用私有函数
        disp(y);
    end
    ```

* matlab 函数调试和问题排查

    * 常见错误及解决

        ```matlab
        % 错误：未定义的函数
        % 解决方法：检查路径或添加路径
        which myfunction  % 查看函数位置
        addpath('函数所在文件夹路径');

        % 错误：函数名与内置函数冲突
        % 解决方法：重命名函数或使用which检查
        which myfunction  % 查看是否被内置函数覆盖
        ```

    * 查看函数信息

        ```matlab
        % 查看函数代码
        type myfunction

        % 查看函数帮助
        help myfunction

        % 查看函数输入输出
        nargin('myfunction')   % 输入参数数量
        nargout('myfunction')  % 输出参数数量
        ```

* matlab 可变参数函数

    * 使用 nargin 判断参数数量

        ```matlab
        function result = myfunction(a, b, c)
            % 设置默认值
            if nargin < 3 || isempty(c)
                c = 10;  % c的默认值为10
            end
            if nargin < 2 || isempty(b)
                b = 5;   % b的默认值为5
            end
            
            result = a + b + c;
        end

        % 调用
        result1 = myfunction(1);        % a=1, b=5, c=10
        result2 = myfunction(1, 2);     % a=1, b=2, c=10
        result3 = myfunction(1, 2, 3);  % a=1, b=2, c=3
        ```

    * 使用 varargin 处理可变参数

        ```matlab
        function result = myfunction(varargin)
            % 解析参数
            p = inputParser;  % 创建参数解析器
            
            % 定义参数和默认值
            addRequired(p, 'a', @isnumeric);
            addOptional(p, 'b', 5, @isnumeric);      % b默认=5
            addOptional(p, 'c', 10, @isnumeric);     % c默认=10
            addParameter(p, 'mode', 'fast', @ischar); % 键值对参数
            
            parse(p, varargin{:});
            
            % 使用参数
            a = p.Results.a;
            b = p.Results.b;
            c = p.Results.c;
            mode = p.Results.mode;
            
            if strcmp(mode, 'fast')
                result = a + b + c;
            else
                result = a * b * c;
            end
        end

        % 调用
        result1 = myfunction(1);                    % a=1, b=5, c=10, mode='fast'
        result2 = myfunction(1, 2, 'mode', 'slow'); % a=1, b=2, c=10, mode='slow'
        result3 = myfunction(1, 2, 3);              % a=1, b=2, c=3, mode='fast'
        ```

    * 使用 inputParser 类（最灵活强大）

        ```matlab
        function result = process_data(data, varargin)
            % 创建参数解析器
            p = inputParser;
            
            % 定义必需参数
            addRequired(p, 'data', @isnumeric);
            
            % 定义可选参数及其默认值
            addParameter(p, 'method', 'mean', @(x) ismember(x, {'mean', 'median', 'sum'}));
            addParameter(p, 'normalize', false, @islogical);
            addParameter(p, 'threshold', 0, @isnumeric);
            addParameter(p, 'verbose', true, @islogical);
            
            % 解析参数
            parse(p, data, varargin{:});
            
            % 获取参数值
            method = p.Results.method;
            normalize = p.Results.normalize;
            threshold = p.Results.threshold;
            verbose = p.Results.verbose;
            
            % 处理数据
            if normalize
                data = (data - min(data)) / (max(data) - min(data));
            end
            
            switch method
                case 'mean'
                    result = mean(data(data > threshold));
                case 'median'
                    result = median(data(data > threshold));
                case 'sum'
                    result = sum(data(data > threshold));
            end
            
            if verbose
                fprintf('方法: %s, 结果: %.2f\n', method, result);
            end
        end

        % 各种调用方式
        data = randn(100, 1);
        r1 = process_data(data);  % 使用所有默认值
        r2 = process_data(data, 'method', 'median', 'normalize', true);
        r3 = process_data(data, 'threshold', 0.5, 'verbose', false);
        ```

    * 从 R2019b 开始，MATLAB引入了参数块（Argument Blocks），更接近其他语言的默认参数

        ```matlab
        function result = new_function(a, b, options)
            % 参数声明块
            arguments
                a (1,1) double
                b (1,1) double = 5      % 默认值
                options.mode (1,1) string = "fast"    % 名称-值参数
                options.scale (1,1) double = 1.0
            end
            
            % 函数体
            if options.mode == "fast"
                result = (a + b) * options.scale;
            else
                result = a * b * options.scale;
            end
        end

        % 调用
        r1 = new_function(2, 3);  % b=3, 使用其他默认值
        r2 = new_function(2);     % b=5（默认值）
        r3 = new_function(2, 'mode', "slow", 'scale', 2.0);
        ```

* matlab clear 命令

    ```matlab
    clear        % 清除工作区所有变量
    clear x y    % 只清除变量x和y
    clear all    % 清除所有变量、函数、MEX文件等（最彻底）
    clear classes % 清除类定义
    clear functions % 清除编译的函数

    % 示例
    >> a = 1; b = 2; whos  % 查看当前变量
    >> clear a            % 只清除a
    >> clear              % 清除所有变量
    ```

* matlab clc 命令

    ```matlab
    clc  % Clear Command Window - 清空命令窗口显示
    % 只清除显示内容，不影响变量和程序运行

    % 示例
    >> disp('这行文字会显示')
    >> clc  % 清屏，但变量仍然存在
    >> a = 5;  % a变量没有被清除
    ```

    example:

    ```matlab
    % 典型用法：脚本开头
    clear; clc; close all;  % 黄金三连
    % clear: 清除旧变量，避免冲突
    % clc: 清屏，让输出更清晰
    % close all: 关闭所有图形窗口

    % 实际应用
    clear; clc;
    fprintf('========== 程序开始 ==========\n\n');
    ```

* matlab 注释/取消注释

    ```matlab
    % 注释选中行：Ctrl + R
    % 取消注释：Ctrl + T

    % 示例：
    % 选中下面三行，按 Ctrl+R
    x = 1;
    y = 2;
    z = x + y;

    % 再按 Ctrl+T 取消注释
    ```

    块注释：

    ```matlab
    %{
    这是一个多行注释块
    可以跨越多行
    这里面的代码不会执行
    x = 1;
    y = 2;
    %}
    ```

    代码段折叠:

    ```matlab
    %% 节标题（双百分号）
    % 可以折叠代码段
    x = linspace(0, 10, 100);
    y = sin(x);

    %% 另一个节
    plot(x, y);
    title('正弦波');
    ```

* matlab 打印

    * disp() - 基本显示

        ```matlab
        disp('Hello World');          % 显示字符串
        disp(['x = ', num2str(5)]);   % 显示变量

        % 显示矩阵
        A = [1 2 3; 4 5 6];
        disp('矩阵A:');
        disp(A);
        ```

    * fprintf() - 格式化输出（最常用）

        ```matlab
        % 基本格式
        fprintf('格式字符串', 变量1, 变量2, ...);

        % 常用格式符
        % %d - 整数
        % %f - 浮点数
        % %e - 科学计数法
        % %g - 自动选择 %f 或 %e
        % %s - 字符串
        % %c - 字符
        % %% - 百分号本身
        ```

        example:

        ```matlab
        % 整数
        age = 25;
        fprintf('年龄: %d 岁\n', age);          % 年龄: 25 岁

        % 浮点数（控制小数位数）
        pi_value = pi;
        fprintf('π = %.2f\n', pi_value);        % π = 3.14
        fprintf('π = %.4f\n', pi_value);        % π = 3.1416
        fprintf('π = %8.4f\n', pi_value);       % π =   3.1416（总宽度8）

        % 科学计数法
        speed = 299792458;
        fprintf('光速: %.2e m/s\n', speed);     % 光速: 3.00e+08 m/s

        % 字符串
        name = '张三';
        fprintf('姓名: %s\n', name);            % 姓名: 张三

        % 多个变量
        x = 10; y = 3.1416; z = '结果';
        fprintf('%s: x = %d, y = %.2f\n', z, x, y);  % 结果: x = 10, y = 3.14

        % 对齐输出
        fprintf('%-10s %10s %10s\n', '姓名', '年龄', '分数');
        fprintf('%-10s %10d %10.1f\n', '张三', 20, 85.5);
        fprintf('%-10s %10d %10.1f\n', '李四', 22, 92.0);
        % 输出：
        % 姓名             年龄        分数
        % 张三               20       85.5
        % 李四               22       92.0
        ```

    * sprintf() - 格式化字符串（不直接显示）

        ```matlab
        % 创建格式化的字符串，不直接输出
        str = sprintf('结果: %.3f', pi);
        disp(str);  % 结果: 3.142

        % 构建复杂字符串
        name = '小明';
        score = 95.5;
        date_str = datestr(now, 'yyyy-mm-dd');
        report = sprintf('成绩报告\n姓名: %s\n分数: %.1f\n日期: %s\n', ...
                        name, score, date_str);
        disp(report);
        ```

    * 表格形式输出

        ```matlab
        % 创建表格数据
        names = {'张三', '李四', '王五'};
        ages = [20; 22; 21];
        scores = [85.5; 92.0; 88.5];

        % 表头
        fprintf('\n========== 学生成绩表 ==========\n');
        fprintf('%-10s %-8s %-10s\n', '姓名', '年龄', '成绩');
        fprintf('%s\n', repmat('-', 1, 30));

        % 数据行
        for i = 1:length(names)
            fprintf('%-10s %-8d %-10.1f\n', names{i}, ages(i), scores(i));
        end

        fprintf('\n总人数: %d\n', length(names));
        ```

        output:

        ```
        ========== 学生成绩表 ==========
        姓名         年龄       成绩        
        ------------------------------
        张三         20       85.5      
        李四         22       92.0      
        王五         21       88.5      

        总人数: 3
        ```

    * 进度条和动态显示

        ```matlab
        % 进度条
        total = 100;
        fprintf('进度: [');
        for i = 1:total
            % 每10%显示一个#
            if mod(i, 10) == 0
                fprintf('#');
            end
            pause(0.01); % 模拟计算
        end
        fprintf('] 完成！\n');

        % 动态更新单行
        for i = 1:20
            fprintf('处理中: %d/%d\r', i, 20);
            pause(0.1);
        end
        fprintf('\n完成！\n');
        ```

    * 综合 example

        ```matlab
        clear; clc;  % 清理环境

        % 程序开始
        fprintf('%s\n', repmat('=', 1, 50));
        fprintf('           数据分析报告\n');
        fprintf('%s\n\n', repmat('=', 1, 50));

        % 计算并显示结果
        data = randn(100, 1);
        mean_val = mean(data);
        std_val = std(data);

        fprintf('统计结果:\n');
        fprintf('%-15s: %8.4f\n', '平均值', mean_val);
        fprintf('%-15s: %8.4f\n', '标准差', std_val);
        fprintf('%-15s: %8d\n', '样本数', length(data));

        % 用表格显示前5个数据
        fprintf('\n前5个样本:\n');
        for i = 1:min(5, length(data))
            fprintf('样本 %2d: %8.4f\n', i, data(i));
        end
        ```

* matlab 文件与目录管理

    ```matlab
    % 查看当前目录
    pwd                     % 显示当前工作目录
    cd 'C:\MyFolder'        % 更改目录
    ls                      % 列出当前目录文件
    dir                     % 详细列表

    % 文件操作
    exist('filename.txt')   % 检查文件是否存在（返回0-7）
    copyfile('源','目标')   % 复制文件
    movefile('源','目标')   % 移动/重命名
    delete('filename.txt')  % 删除文件

    % 创建目录
    mkdir('newfolder')      % 创建文件夹
    rmdir('foldername')     % 删除空文件夹
    ```

* matlab 文本文件读写

    * 读取文本文件

        ```matlab
        % 方法1: fscanf - 格式化读取
        fid = fopen('data.txt', 'r');
        data = fscanf(fid, '%f');  % 读取浮点数
        fclose(fid);

        % 方法2: textscan - 灵活读取混合数据
        fid = fopen('data.txt', 'r');
        C = textscan(fid, '%s %f %f', 'Delimiter', ',');
        fclose(fid);
        names = C{1}; values1 = C{2}; values2 = C{3};

        % 方法3: readmatrix (R2019a+)
        data = readmatrix('data.txt');

        % 方法4: readtable - 读取为表格
        T = readtable('data.csv');
        T = readtable('data.txt', 'Delimiter', '\t');  % 制表符分隔
        ```

    * 写入文本文件

        ```matlab
        % 方法1: fprintf
        fid = fopen('output.txt', 'w');  % 'w'写入，'a'追加
        fprintf(fid, '姓名: %s, 年龄: %d, 分数: %.2f\n', '张三', 20, 85.5);
        fclose(fid);

        % 方法2: writematrix (R2019a+)
        A = [1 2 3; 4 5 6];
        writematrix(A, 'matrix.txt');
        writematrix(A, 'matrix.txt', 'Delimiter', '\t');  % 制表符分隔

        % 方法3: writetable - 写入表格
        data = {'张三', 20, 85.5; '李四', 22, 92.0};
        T = cell2table(data, 'VariableNames', {'Name','Age','Score'});
        writetable(T, 'students.csv');
        ```

* matlab 读写CSV

    ```matlab
    % 读取CSV
    data = csvread('data.csv');        % 纯数值数据
    T = readtable('data.csv');         % 包含表头
    [M, ~, ~] = xlsread('data.csv');   % 读取Excel格式CSV

    % 写入CSV
    csvwrite('output.csv', data);      % 写入数值数据
    writetable(T, 'output.csv');       % 写入表格（带表头）

    % 自定义分隔符
    data = dlmread('data.txt', ',');   % 指定分隔符为逗号
    dlmwrite('output.txt', data, 'delimiter', '\t');  % 制表符分隔
    ```

* matlab 读写Excel

    ```matlab
    % 读取Excel
    [num, txt, raw] = xlsread('data.xlsx');      % 读取整个工作表
    [num, txt, raw] = xlsread('data.xlsx', 'Sheet2');  % 指定工作表
    [num, txt, raw] = xlsread('data.xlsx', 'A1:C10');  % 指定区域

    % 写入Excel
    data = {'Name','Age','Score'; '张三',20,85.5; '李四',22,92.0};
    xlswrite('output.xlsx', data);               % 写入数据
    xlswrite('output.xlsx', data, 'Sheet1', 'A1');  % 指定位置

    % 新版方法 (R2019a+)
    T = readtable('data.xlsx');                  % 读取为表格
    writetable(T, 'output.xlsx', 'Sheet', 'Results');  % 写入表格
    ```

* matlab 保存和加载变量

    ```matlab
    % 保存变量
    x = rand(10, 10);
    y = magic(5);
    z = 'test string';
    save('data.mat');                    % 保存所有变量
    save('data.mat', 'x', 'y');         % 只保存x和y
    save('data.mat', '-append');        % 追加保存
    save('data.mat', '-v7.3');          % 保存大型数据（>2GB）

    % 加载变量
    load('data.mat');                   % 加载所有变量
    data = load('data.mat');            % 加载到结构体
    x = data.x;                         % 访问具体变量

    % 检查MAT文件内容
    whos('-file', 'data.mat');          % 查看文件中的变量
    ```

* matlab 读写图像

    ```matlab
    % 读取图像
    img = imread('image.jpg');          % 读取JPEG
    img = imread('image.png');          % 读取PNG
    img = imread('image.tif', 3);       % 读取TIFF第3帧

    % 显示图像
    imshow(img);
    image(img); colormap(gray);

    % 保存图像
    imwrite(img, 'output.jpg', 'Quality', 90);      % JPEG质量90%
    imwrite(img, 'output.png', 'Transparency', [0 0 0]);  % PNG透明
    ```

* matlab 读写音频

    ```matlab
    % 读取音频
    [y, Fs] = audioread('audio.wav');   % 读取WAV
    [y, Fs] = audioread('audio.mp3');   % 读取MP3
    info = audioinfo('audio.wav');      % 获取音频信息

    % 播放音频
    sound(y, Fs);                       % 立即播放
    player = audioplayer(y, Fs);        % 创建播放器对象
    play(player);

    % 保存音频
    audiowrite('output.wav', y, Fs);                    % WAV格式
    audiowrite('output.mp3', y, Fs, 'BitRate', 128);    % MP3格式
    ```

* matlab 遍历文件夹文件

    ```matlab
    % 获取文件列表
    files = dir('*.txt');               % 所有txt文件
    files = dir('data/*.csv');          % 子文件夹中的CSV

    % 遍历处理
    for i = 1:length(files)
        filename = files(i).name;
        fullpath = fullfile(files(i).folder, filename);
        fprintf('处理文件: %s\n', filename);
        
        % 读取文件内容
        data = readmatrix(fullpath);
        
        % 处理数据...
    end
    ```

* matlab 文件路径操作

    ```matlab
    % 构建完整路径
    fullpath = fullfile('folder', 'subfolder', 'file.txt');

    % 路径分解
    [pathstr, name, ext] = fileparts('C:\data\test.txt');
    % pathstr = 'C:\data', name = 'test', ext = '.txt'

    % 相对路径转绝对路径
    abs_path = which('myfunction.m');    % 查找文件绝对路径
    ```

* matlab 交互式文件选择

    ```matlab
    % 选择文件
    [filename, pathname] = uigetfile(...
        {'*.txt;*.csv', '数据文件 (*.txt, *.csv)';
        '*.xlsx;*.xls', 'Excel文件 (*.xlsx, *.xls)';
        '*.*', '所有文件 (*.*)'}, ...
        '选择数据文件');

    if ~isequal(filename, 0)
        fullpath = fullfile(pathname, filename);
        % 读取文件...
    end

    % 选择文件夹
    folder = uigetdir('C:\', '选择数据文件夹');
    ```

* matlab 完整的数据处理流程 example

    ```matlab
    function process_data_files()
        clear; clc; close all;
        
        % 1. 选择输入文件
        [infile, inpath] = uigetfile({'*.csv;*.xlsx', '数据文件'}, '选择输入文件');
        if isequal(infile, 0)
            error('未选择文件');
        end
        input_file = fullfile(inpath, infile);
        
        % 2. 读取数据
        fprintf('正在读取: %s\n', infile);
        if endsWith(infile, '.csv')
            data = readtable(input_file);
        elseif endsWith(infile, '.xlsx')
            data = readtable(input_file);
        end
        
        % 3. 处理数据
        fprintf('数据大小: %d行 × %d列\n', size(data));
        
        % 统计分析
        stats.mean = mean(data{:, 2:end});
        stats.std = std(data{:, 2:end});
        stats.min = min(data{:, 2:end});
        stats.max = max(data{:, 2:end});
        
        % 4. 保存结果
        % 保存为MAT文件
        save('analysis_results.mat', 'data', 'stats');
        
        % 保存为Excel
        output_table = array2table([stats.mean; stats.std; stats.min; stats.max]');
        output_table.Properties.VariableNames = {'Mean', 'Std', 'Min', 'Max'};
        output_table.Properties.RowNames = data.Properties.VariableNames(2:end);
        
        writetable(output_table, 'statistics.xlsx', 'WriteRowNames', true);
        
        % 5. 生成报告
        generate_report(data, stats, infile);
        
        fprintf('处理完成！\n');
    end

    function generate_report(data, stats, filename)
        report_file = 'analysis_report.txt';
        fid = fopen(report_file, 'w');
        
        fprintf(fid, '数据分析报告\n');
        fprintf(fid, '%s\n', repmat('=', 50));
        fprintf(fid, '输入文件: %s\n', filename);
        fprintf(fid, '分析时间: %s\n', datestr(now));
        fprintf(fid, '\n统计结果:\n\n');
        
        fprintf(fid, '%-15s %10s %10s %10s %10s\n', ...
            '变量', '平均值', '标准差', '最小值', '最大值');
        fprintf(fid, '%s\n', repmat('-', 55));
        
        vars = data.Properties.VariableNames(2:end);
        for i = 1:length(vars)
            fprintf(fid, '%-15s %10.2f %10.2f %10.2f %10.2f\n', ...
                vars{i}, stats.mean(i), stats.std(i), stats.min(i), stats.max(i));
        end
        
        fclose(fid);
        fprintf('报告已生成: %s\n', report_file);
    end
    ```

* matlab 批量处理图像 example

    ```matlab
    function batch_process_images()
        % 批量处理文件夹中的所有图像
        input_folder = uigetdir('', '选择图像文件夹');
        output_folder = fullfile(input_folder, 'processed');
        
        if ~exist(output_folder, 'dir')
            mkdir(output_folder);
        end
        
        % 获取所有图像文件
        image_files = dir(fullfile(input_folder, '*.jpg'));
        image_files = [image_files; dir(fullfile(input_folder, '*.png'))];
        
        fprintf('找到 %d 个图像文件\n', length(image_files));
        
        for i = 1:length(image_files)
            % 读取图像
            img_path = fullfile(image_files(i).folder, image_files(i).name);
            img = imread(img_path);
            
            % 处理图像（示例：转为灰度并调整大小）
            if size(img, 3) == 3
                img_gray = rgb2gray(img);
            else
                img_gray = img;
            end
            
            img_resized = imresize(img_gray, [256 256]);
            
            % 保存处理后的图像
            [~, name, ext] = fileparts(image_files(i).name);
            output_path = fullfile(output_folder, [name '_processed' ext]);
            imwrite(img_resized, output_path);
            
            fprintf('已处理: %s\n', image_files(i).name);
        end
        
        fprintf('批量处理完成！\n');
    end
    ```

* matlab 文件编码问题

    ```matlab
    % 处理中文等特殊字符
    fid = fopen('file.txt', 'r', 'n', 'UTF-8');  % 指定UTF-8编码
    % 或者使用
    fid = fopen('file.txt', 'r', 'native', 'UTF-8');
    ```

* matlab 内存管理

    ```matlab
    % 大文件分块读取
    chunk_size = 10000;
    fid = fopen('large_file.txt', 'r');
    while ~feof(fid)
        chunk = textscan(fid, '%f', chunk_size);
        % 处理chunk...
    end
    fclose(fid);

    % 使用datastore处理超大文件
    ds = datastore('large_file.csv');
    while hasdata(ds)
        chunk = read(ds);
        % 处理chunk...
    end
    ```

* matlab 错误处理

    ```matlab
    try
        fid = fopen('nonexistent.txt', 'r');
        data = fscanf(fid, '%f');
        fclose(fid);
    catch ME
        fprintf('错误: %s\n', ME.message);
        % 错误恢复逻辑...
    end
    ```

* matlab 常用函数速查表

    | 操作类型 | 读取函数 | 写入函数 | 适用格式 |
    | - | - | - | - |
    | 文本文件 | fscanf, textscan | fprintf | .txt, .dat |
    | 表格数据 | readtable | writetable | .csv, .txt, .xlsx |
    | 数值矩阵 | readmatrix | writematrix | .txt, .csv |
    | Excel | xlsread | xlswrite | .xlsx, .xls |
    | 二进制 | load | save | .mat |
    | 图像 | imread | imwrite | .jpg, .png, .tif |
    | 音频 | audioread | audiowrite | .wav, .mp3 |

* matlab repmat() 函数

    repmat() 是 "repeat matrix" 的缩写，用于复制和拼接数组/矩阵，创建更大的数组。

    syntax:

    ```matlab
    B = repmat(A, m, n)        % 将A复制m×n次（二维）
    B = repmat(A, [m n])       % 同上，使用向量参数
    B = repmat(A, [m n p ...]) % 多维复制
    ```

    usage:

    * 二维复制（最常用）

        ```matlab
        % 复制单个元素
        A = 5;
        B = repmat(A, 2, 3);
        % B = [5 5 5
        %      5 5 5]

        % 复制向量
        A = [1 2 3];
        B = repmat(A, 3, 1);    % 垂直复制3次
        % B = [1 2 3
        %      1 2 3
        %      1 2 3]

        C = repmat(A, 1, 3);    % 水平复制3次
        % C = [1 2 3 1 2 3 1 2 3]

        D = repmat(A, 2, 2);    % 2×2块复制
        % D = [1 2 3 1 2 3
        %      1 2 3 1 2 3]
        ```

    * 矩阵复制

        ```matlab
        A = [1 2; 3 4];
        B = repmat(A, 2, 3);
        % B = [1 2 1 2 1 2
        %      3 4 3 4 3 4
        %      1 2 1 2 1 2
        %      3 4 3 4 3 4]
        ```

    * 三维及多维复制

        ```matlab
        % 三维数组复制
        A = [1 2; 3 4];
        B = repmat(A, [2, 3, 2]);  % 2行×3列×2页
        size(B)  % 返回 [4, 6, 2]

        % 创建三维网格
        [X, Y, Z] = meshgrid(1:3, 1:2, 1:2);
        % 等价于：
        X = repmat([1 2 3], [2, 1, 2]);
        Y = repmat([1; 2], [1, 3, 2]);
        ```

    example:

    * 创建测试数据

        ```matlab
        % 创建全零模板
        template = zeros(3, 4);
        data = repmat(template, 2, 3);  % 6×12的零矩阵

        % 创建棋盘格
        black = 0; white = 1;
        pattern = [black white; white black];
        chessboard = repmat(pattern, 4, 4);  % 8×8棋盘
        imshow(chessboard);
        ```

    * 向量化运算（广播机制替代）

        ```matlab
        % 传统方法：每个元素加常数
        A = [1 2 3; 4 5 6];
        constant = 10;
        % 需要循环或repmat
        B = A + repmat(constant, size(A));

        % 现代MATLAB：广播机制（更高效）
        B = A + constant;  % R2016b+ 自动广播

        % 矩阵每行加上不同常数
        row_constants = [10; 20];
        C = A + repmat(row_constants, 1, size(A, 2));
        % C = [1+10 2+10 3+10
        %      4+20 5+20 6+20]
        ```

    * 图像处理

        ```matlab
        % 创建彩色图像
        red_channel = 0.8 * ones(100, 100);
        green_channel = 0.5 * ones(100, 100);
        blue_channel = 0.2 * ones(100, 100);

        % 方法1：使用cat
        rgb_image = cat(3, red_channel, green_channel, blue_channel);

        % 方法2：使用repmat
        single_channel = 0.5 * ones(100, 100);
        rgb_image = repmat(single_channel, [1, 1, 3]);
        rgb_image(:, :, 1) = 0.8;  % 红色通道
        rgb_image(:, :, 2) = 0.5;  % 绿色通道
        rgb_image(:, :, 3) = 0.2;  % 蓝色通道
        ```

    * 数值计算

        ```matlab
        % 计算网格点的距离
        x = 1:3;
        y = 1:2;

        % 创建坐标网格
        X = repmat(x, length(y), 1);      % [1 2 3; 1 2 3]
        Y = repmat(y', 1, length(x));     % [1 1 1; 2 2 2]

        % 计算到原点的距离
        distance = sqrt(X.^2 + Y.^2);
        % distance = [sqrt(2) sqrt(5) sqrt(10);
        %             sqrt(5) sqrt(8) sqrt(13)]
        ```