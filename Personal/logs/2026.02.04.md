* ç®€è¿° vim ä¸­ substitute() çš„åŸå‹ã€ä½œç”¨åŠç”¨æ³•

    substitute() æ˜¯ Vim ä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºå¯¹å­—ç¬¦ä¸²æ‰§è¡Œæ›¿æ¢æ“ä½œã€‚

    åŸå‹

    ```vim
    substitute({å­—ç¬¦ä¸²}, {æ¨¡å¼}, {æ›¿æ¢å†…å®¹}, {æ ‡å¿—})
    ```

    å‚æ•°è¯´æ˜

    * {å­—ç¬¦ä¸²}ï¼šè¦è¿›è¡Œæ›¿æ¢çš„æºå­—ç¬¦ä¸²

    * {æ¨¡å¼}ï¼šè¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼

    * {æ›¿æ¢å†…å®¹}ï¼šæ›¿æ¢åçš„æ–‡æœ¬ï¼Œå¯ä»¥åŒ…å«ç‰¹æ®Šæ›¿æ¢ç¬¦

    * {æ ‡å¿—}ï¼šæ§åˆ¶æ›¿æ¢è¡Œä¸ºçš„æ ‡å¿—å­—ç¬¦ï¼ˆå¯é€‰ï¼‰

    å¸¸ç”¨æ ‡å¿—

    * gï¼šå…¨å±€æ›¿æ¢ï¼ˆä¸€è¡Œä¸­çš„æ‰€æœ‰åŒ¹é…ï¼‰

    * iï¼šå¿½ç•¥å¤§å°å†™

    * Iï¼šåŒºåˆ†å¤§å°å†™

    * cï¼šæ¯æ¬¡æ›¿æ¢å‰ç¡®è®¤

    ç”¨æ³•ç¤ºä¾‹

    ```vim
    " åŸºæœ¬æ›¿æ¢
    echo substitute('hello world', 'world', 'Vim', '')
    " è¿”å›: hello Vim

    " å…¨å±€æ›¿æ¢
    echo substitute('foo bar foo', 'foo', 'baz', 'g')
    " è¿”å›: baz bar baz

    " ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„
    echo substitute('2024-01-15', '\(\d\+\)-\(\d\+\)-\(\d\+\)', '\2/\3/\1', '')
    " è¿”å›: 01/15/2024

    " åœ¨å‡½æ•°ä¸­ä½¿ç”¨
    let text = 'apple orange banana'
    let new_text = substitute(text, 'apple', 'pear', '')
    ```

    ä¸ :substitute å‘½ä»¤çš„åŒºåˆ«

    ```vim
    " substitute() å‡½æ•° vs :substitute å‘½ä»¤
    echo substitute('text', 'pattern', 'replacement', 'g')  " å‡½æ•°
    :s/pattern/replacement/g                               " å‘½ä»¤

    " ä¸»è¦åŒºåˆ«ï¼š
    " 1. substitute() æ“ä½œå­—ç¬¦ä¸²ï¼Œä¸ä¿®æ”¹ç¼“å†²åŒº
    " 2. :s å‘½ä»¤ç›´æ¥ä¿®æ”¹ç¼“å†²åŒºå†…å®¹
    ```

    å®é™…åº”ç”¨

    ```vim
    " åœ¨è„šæœ¬ä¸­å¤„ç†å­—ç¬¦ä¸²
    function! CleanText(text)
        " ç§»é™¤å¤šä½™ç©ºæ ¼
        let cleaned = substitute(a:text, '\s\+', ' ', 'g')
        " ç§»é™¤è¡Œé¦–è¡Œå°¾ç©ºæ ¼
        let cleaned = substitute(cleaned, '^\s*\|\s*$', '', 'g')
        return cleaned
    endfunction

    " æ‰¹é‡å¤„ç†åˆ—è¡¨
    let list = ['vim1', 'vim2', 'vim3']
    call map(list, "substitute(v:val, 'vim', 'neovim', 'g')")
    ```

    substitute() æ˜¯ Vim è„šæœ¬ç¼–ç¨‹ä¸­å¤„ç†å­—ç¬¦ä¸²çš„é‡è¦å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆåœ¨ä¸ä¿®æ”¹ç¼“å†²åŒºçš„æƒ…å†µä¸‹è¿›è¡Œæ–‡æœ¬è½¬æ¢ã€‚

    **`substitute(line_content, '^\s*\zs\S', '* &', '')` ç®€è¿°è¿™ä¸ªå‡½æ•°çš„ä½œç”¨**

    è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼šåœ¨æ¯è¡Œç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦å‰æ·»åŠ æ˜Ÿå·å’Œç©ºæ ¼ï¼ˆ* ï¼‰

    è¯¦ç»†è§£æï¼š

    å‚æ•°åˆ†è§£ï¼š

    * line_contentï¼šè¾“å…¥çš„å­—ç¬¦ä¸²ï¼ˆé€šå¸¸æ˜¯è¡Œå†…å®¹ï¼‰

    * '^\s*\zs\S'ï¼šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼

        * ^ï¼šåŒ¹é…è¡Œé¦–

        * \s*ï¼šåŒ¹é…0ä¸ªæˆ–å¤šä¸ªç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ç­‰ï¼‰

        * \zsï¼šåŒ¹é…å¼€å§‹æ ‡è®°ï¼Œè¡¨ç¤ºä»è¿™é‡Œå¼€å§‹æ‰æ˜¯çœŸæ­£è¦åŒ¹é…çš„å†…å®¹

        * \Sï¼šåŒ¹é…ä¸€ä¸ªéç©ºç™½å­—ç¬¦

    * '* &'ï¼šæ›¿æ¢å†…å®¹

        * * ï¼šæ˜Ÿå·åŠ ç©ºæ ¼

        * &ï¼šä»£è¡¨æ•´ä¸ªåŒ¹é…åˆ°çš„å†…å®¹ï¼ˆå³ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ï¼‰

    * ''ï¼šæ— æ ‡å¿—ï¼Œåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹

    åŒ¹é…é€»è¾‘ï¼š

    * ^\s*\zs\S çš„æ„æ€æ˜¯ï¼šæ‰¾åˆ°è¡Œé¦–çš„ç©ºç™½å­—ç¬¦ï¼ˆä¸åŒ¹é…å®ƒä»¬ï¼‰ï¼Œç„¶ååœ¨ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦å¤„å¼€å§‹åŒ¹é…

    æ•ˆæœç¤ºä¾‹ï¼š

    ```vim
    è¾“å…¥ "  hello world"  â†’ è¾“å‡º "  * hello world"
    è¾“å…¥ "    vim"        â†’ è¾“å‡º "    * vim"
    è¾“å…¥ "no spaces"      â†’ è¾“å‡º "* no spaces"
    ```

    å…³é”®ç‚¹ï¼š

    * \zs æ˜¯å…³é”®ï¼Œå®ƒè®©å‰é¢çš„ ^\s* åªä½œä¸ºå®šä½æ¡ä»¶ï¼Œè€Œä¸ä½œä¸ºåŒ¹é…å†…å®¹çš„ä¸€éƒ¨åˆ†

    * å› æ­¤æ›¿æ¢æ—¶åªåœ¨ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦å‰æ’å…¥ * ï¼Œä¿ç•™åŸæœ‰çš„ç¼©è¿›

    ç±»ä¼¼åŠŸèƒ½å¯¹æ¯”ï¼š

    ```vim
    " è¿™ä¸ªä¼šç ´åç¼©è¿›ï¼ˆåŒ¹é…åŒ…æ‹¬ç©ºç™½å­—ç¬¦ï¼‰ï¼š
    substitute(line_content, '^\s*\S', '* &', '')
    " è¾“å…¥ "  hello" â†’ è¾“å‡º "* hello"ï¼ˆä¸¢å¤±äº†ä¸¤ä¸ªç©ºæ ¼ï¼‰

    " è€Œä½¿ç”¨ \zs çš„ç‰ˆæœ¬ä¿æŒç¼©è¿›ï¼š
    substitute(line_content, '^\s*\zs\S', '* &', '')
    " è¾“å…¥ "  hello" â†’ è¾“å‡º "  * hello"ï¼ˆä¿æŒä¸¤ä¸ªç©ºæ ¼ç¼©è¿›ï¼‰
    ```

    è¿™ä¸ªå‡½æ•°å¸¸ç”¨äºåˆ›å»ºå¸¦é¡¹ç›®ç¬¦å·çš„åˆ—è¡¨ï¼ŒåŒæ—¶ä¿æŒåŸæœ‰çš„æ–‡æœ¬ç¼©è¿›æ ¼å¼ã€‚

* ç®€è¿° linux ä¸­ pause() çš„åŸå‹ã€ä½œç”¨åŠç”¨æ³•

    pause() æ˜¯ Linux/Unix ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œç”¨äºä½¿å½“å‰è¿›ç¨‹æŒ‚èµ·ï¼ˆç¡çœ ï¼‰ï¼Œç›´åˆ°æ¥æ”¶åˆ°ä¸€ä¸ªä¿¡å·ä¸ºæ­¢ã€‚

    åŸå‹

    ```c
    #include <unistd.h>

    int pause(void);
    ```

    ä½œç”¨

    * æŒ‚èµ·è¿›ç¨‹ï¼šè°ƒç”¨ pause() çš„è¿›ç¨‹ä¼šè¿›å…¥ç¡çœ çŠ¶æ€

    * ç­‰å¾…ä¿¡å·ï¼šç›´åˆ°è¿›ç¨‹æ•è·åˆ°ä¸€ä¸ªä¿¡å·å¹¶ä»ä¿¡å·å¤„ç†å‡½æ•°è¿”å›åï¼Œpause() æ‰è¿”å›

    * è¿”å›å€¼ï¼šæ€»æ˜¯è¿”å› -1ï¼Œå¹¶è®¾ç½® errno ä¸º EINTRï¼ˆè¡¨ç¤ºè¢«ä¿¡å·ä¸­æ–­ï¼‰

    ç”¨æ³•

    åŸºæœ¬ç¤ºä¾‹

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>
    #include <errno.h>

    void signal_handler(int sig) {
        printf("Received signal %d\n", sig);
    }

    int main() {
        signal(SIGINT, signal_handler);
        
        printf("Waiting for signal (PID: %d)...\n", getpid());
        
        // è¿›ç¨‹åœ¨è¿™é‡ŒæŒ‚èµ·ï¼Œç›´åˆ°æ”¶åˆ° SIGINT (Ctrl+C)
        int ret = pause();
        
        if (ret == -1 && errno == EINTR) {
            printf("pause() was interrupted by signal\n");
        }
        
        return 0;
    }
    ```

    å¸¸è§ç”¨é€”

    1. ç­‰å¾…ç‰¹å®šä¿¡å·

        ```c
        #include <stdio.h>
        #include <unistd.h>
        #include <signal.h>

        volatile sig_atomic_t signal_received = 0;

        void handler(int sig) {
            signal_received = 1;
        }

        int main() {
            signal(SIGUSR1, handler);
            
            printf("Waiting for SIGUSR1...\n");
            
            while (!signal_received) {
                pause();  // ç­‰å¾… SIGUSR1 ä¿¡å·
            }
            
            printf("SIGUSR1 received!\n");
            return 0;
        }
        ```

    2. ä¿¡å·é©±åŠ¨æœåŠ¡å™¨

        ```c
        #include <stdio.h>
        #include <unistd.h>
        #include <signal.h>
        #include <sys/types.h>

        void sigchld_handler(int sig) {
            // å¤„ç†å­è¿›ç¨‹é€€å‡º
            while (waitpid(-1, NULL, WNOHANG) > 0) {
                // æ¸…ç†å­è¿›ç¨‹èµ„æº
            }
        }

        int main() {
            signal(SIGCHLD, sigchld_handler);
            
            // ä¸»æœåŠ¡å™¨å¾ªç¯
            while (1) {
                // ... å¤„ç†å…¶ä»–ä»»åŠ¡ ...
                
                // ç­‰å¾…ä¿¡å·ï¼ˆè¿™é‡Œä¼šå¤„ç† SIGCHLD ä¿¡å·ï¼‰
                pause();
            }
            
            return 0;
        }
        ```

    æ³¨æ„äº‹é¡¹

    1. ä¿¡å·å¤„ç†é—®é¢˜

        ```c
        // æœ‰é—®é¢˜çš„ä»£ç 
        void handler(int sig) {
            // ç©ºå¤„ç†å‡½æ•°
        }

        int main() {
            signal(SIGINT, handler);
            pause();  // æ”¶åˆ° SIGINT åï¼Œpause() è¿”å›ï¼Œä½†ç¨‹åºç»§ç»­æ‰§è¡Œ
            // é—®é¢˜ï¼špause() è¿”å›åå¯èƒ½æ‰§è¡Œä¸åº”è¯¥æ‰§è¡Œçš„ä»£ç 
        }
        ```

    2. ç«æ€æ¡ä»¶

        pause() å­˜åœ¨ç«æ€æ¡ä»¶é—®é¢˜ï¼Œå¯èƒ½æ°¸ä¹…æŒ‚èµ·ï¼š

        ```c
        // ä¸å®‰å…¨çš„ç”¨æ³•
        void handler(int sig) {
            // å¤„ç†ä¿¡å·
        }

        int main() {
            // å¦‚æœåœ¨ signal() è°ƒç”¨åã€pause() è°ƒç”¨å‰æ”¶åˆ°ä¿¡å·ï¼Œ
            // pause() å¯èƒ½ä¼šæ°¸ä¹…æŒ‚èµ·
            signal(SIGALRM, handler);
            alarm(1);  // 1ç§’åå‘é€ SIGALRM
            
            // å¦‚æœä¿¡å·åœ¨ alarm() åã€pause() å‰åˆ°è¾¾ï¼Œpause() ä¼šæ°¸è¿œç­‰å¾…
            pause();
            
            return 0;
        }
        ```

    3. æ›¿ä»£æ–¹æ¡ˆ

        ç”±äº pause() çš„ç«æ€æ¡ä»¶é—®é¢˜ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š

        sigsuspend() - æ›´å®‰å…¨çš„æ›¿ä»£

        ```c
        #include <signal.h>

        void handler(int sig) {
            printf("Signal received\n");
        }

        int main() {
            sigset_t newmask, oldmask;
            
            signal(SIGINT, handler);
            
            // é˜»å¡ SIGINT ä¿¡å·
            sigemptyset(&newmask);
            sigaddset(&newmask, SIGINT);
            sigprocmask(SIG_BLOCK, &newmask, &oldmask);
            
            // å…³é”®åŒºåŸŸä»£ç ...
            
            // åŸå­æ“ä½œï¼šæ¢å¤ä¿¡å·å±è”½å¹¶æŒ‚èµ·è¿›ç¨‹
            sigsuspend(&oldmask);
            
            // ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡...
            
            return 0;
        }
        ```

        ä½¿ç”¨ sigwait() æˆ– sigwaitinfo()

        ```c
        #include <signal.h>
        #include <stdio.h>

        int main() {
            sigset_t set;
            int sig;
            
            sigemptyset(&set);
            sigaddset(&set, SIGINT);
            sigaddset(&set, SIGTERM);
            
            // é˜»å¡è¿™äº›ä¿¡å·
            sigprocmask(SIG_BLOCK, &set, NULL);
            
            printf("Waiting for signal...\n");
            sigwait(&set, &sig);  // åŒæ­¥ç­‰å¾…ä¿¡å·
            
            printf("Received signal: %d\n", sig);
            
            return 0;
        }
        ```

    æ€»ç»“

    | ç‰¹ç‚¹ | è¯´æ˜ |
    | - | - |
    | åŠŸèƒ½ | æŒ‚èµ·è¿›ç¨‹ç›´åˆ°æ”¶åˆ°ä¿¡å· |
    | è¿”å›å€¼ | æ€»æ˜¯ -1ï¼Œerrno è®¾ä¸º EINTR |
    | ä¼˜ç‚¹ | ç®€å•æ˜“ç”¨ |
    | ç¼ºç‚¹ | å­˜åœ¨ç«æ€æ¡ä»¶ï¼Œå¯èƒ½æ°¸ä¹…æŒ‚èµ· |
    | æ›¿ä»£æ–¹æ¡ˆ | sigsuspend(), sigwait(), sigwaitinfo() |

    åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨ pause()ï¼Œå› ä¸ºå®ƒå­˜åœ¨ç«æ€æ¡ä»¶é—®é¢˜ã€‚åº”è¯¥ä¼˜å…ˆä½¿ç”¨ sigsuspend() æˆ–å…¶ä»–æ›´å®‰å…¨çš„ä¿¡å·å¤„ç†æœºåˆ¶ã€‚pause() çš„ä¸»è¦ä»·å€¼åœ¨äºç†è§£ Unix ä¿¡å·å¤„ç†æœºåˆ¶çš„åŸºæœ¬åŸç†ã€‚

* å¦‚æœ pause() ç­‰å¾…çš„æ˜¯ç”¨æˆ·è¾“å…¥å‘¢ï¼Œæ˜¯ä¸æ˜¯å°±æ²¡æœ‰ç«æ€é—®é¢˜äº†

    ä¸ï¼Œå®Œå…¨ä¸æ˜¯è¿™æ ·çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š

    æ ¸å¿ƒè¯¯è§£æ¾„æ¸…

    pause() ä¸ç­‰å¾…ç”¨æˆ·è¾“å…¥ã€‚å®ƒç­‰å¾…çš„æ˜¯ä¿¡å·ï¼ˆsignalï¼‰ï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å…¥æˆ–ä»»ä½•ç”¨æˆ·è¾“å…¥ã€‚

    ä¿¡å· vs ç”¨æˆ·è¾“å…¥

    1. ä¿¡å·ï¼ˆSignalï¼‰

        ```c
        // pause() ç­‰å¾…çš„æ˜¯ä¿¡å·ï¼Œæ¯”å¦‚ï¼š
        // SIGINT    (Ctrl+C)
        // SIGTERM   (kill å‘½ä»¤å‘é€çš„ç»ˆæ­¢ä¿¡å·)
        // SIGUSR1   (ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·1)
        // SIGALRM   (å®šæ—¶å™¨ä¿¡å·)
        // ç­‰ç­‰...
        ```

    2. ç”¨æˆ·è¾“å…¥

        ```c
        // è¿™æ˜¯é€šè¿‡ I/O å‡½æ•°å®Œæˆçš„ï¼Œæ¯”å¦‚ï¼š
        // scanf()   // ç­‰å¾…æ ‡å‡†è¾“å…¥
        // read()    // ä»æ–‡ä»¶æè¿°ç¬¦è¯»å–
        // getchar() // è·å–å­—ç¬¦
        // select()  // I/O å¤šè·¯å¤ç”¨
        // poll()    // I/O å¤šè·¯å¤ç”¨
        // epoll()   // Linux é«˜æ€§èƒ½ I/O å¤šè·¯å¤ç”¨
        ```

    ä¸ºä»€ä¹ˆæ··æ·†äº†ï¼Ÿ

    å¾ˆå¤šäººæ··æ·†æ˜¯å› ä¸ºè¿™ä¸ªå¸¸è§æ¨¡å¼ï¼š

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>

    void handler(int sig) {
        printf("Received signal\n");
    }

    int main() {
        signal(SIGINT, handler);
        
        printf("Press Ctrl+C to send SIGINT\n");
        pause();  // è¿™é‡Œä¸æ˜¯åœ¨ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œè€Œæ˜¯åœ¨ç­‰å¾…ä¿¡å·ï¼
        
        return 0;
    }
    ```

    å…³é”®ç‚¹ï¼š

    * å½“ä½ åœ¨ç»ˆç«¯æŒ‰ Ctrl+C æ—¶ï¼Œç»ˆç«¯é©±åŠ¨ç¨‹åºä¼šå‘è¿›ç¨‹å‘é€ SIGINT ä¿¡å·

    * pause() ç­‰å¾…çš„æ˜¯è¿™ä¸ªä¿¡å·ï¼Œè€Œä¸æ˜¯è¯»å– Ctrl+C è¿™ä¸ªæŒ‰é”®è¾“å…¥

    * å¦‚æœåªæ˜¯æ™®é€šçš„é”®ç›˜è¾“å…¥ï¼ˆå¦‚è¾“å…¥ "hello"ï¼‰ï¼Œpause() å®Œå…¨ä¸ä¼šå“åº”

    æ­£ç¡®çš„ç”¨æˆ·è¾“å…¥ç­‰å¾…æ–¹å¼

    æ–¹æ¡ˆ1ï¼šä½¿ç”¨æ ‡å‡† I/O

    ```c
    #include <stdio.h>

    int main() {
        char input[100];
        
        printf("Enter something: ");
        fflush(stdout);
        
        // è¿™ä¼šçœŸæ­£ç­‰å¾…ç”¨æˆ·è¾“å…¥
        if (fgets(input, sizeof(input), stdin) != NULL) {
            printf("You entered: %s", input);
        }
        
        return 0;
    }
    ```

    æ–¹æ¡ˆ2ï¼šä½¿ç”¨ä½çº§ I/O

    ```c
    #include <unistd.h>
    #include <stdio.h>

    int main() {
        char buffer[100];
        
        printf("Enter something: ");
        fflush(stdout);
        
        // read() ä¼šé˜»å¡ç›´åˆ°æœ‰è¾“å…¥
        ssize_t n = read(STDIN_FILENO, buffer, sizeof(buffer)-1);
        if (n > 0) {
            buffer[n] = '\0';
            printf("You entered: %s", buffer);
        }
        
        return 0;
    }
    ```

    æ–¹æ¡ˆ3ï¼šç»“åˆä¿¡å·å’Œè¾“å…¥ï¼ˆå¤æ‚åœºæ™¯ï¼‰

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>
    #include <sys/select.h>

    volatile sig_atomic_t got_signal = 0;

    void handler(int sig) {
        got_signal = 1;
    }

    int main() {
        fd_set readfds;
        struct timeval timeout;
        
        signal(SIGINT, handler);
        
        while (!got_signal) {
            FD_ZERO(&readfds);
            FD_SET(STDIN_FILENO, &readfds);
            
            timeout.tv_sec = 5;  // 5ç§’è¶…æ—¶
            timeout.tv_usec = 0;
            
            // ä½¿ç”¨ select åŒæ—¶ç­‰å¾…è¾“å…¥å’Œä¿¡å·
            int ret = select(STDIN_FILENO + 1, &readfds, NULL, NULL, &timeout);
            
            if (ret == -1) {
                // è¢«ä¿¡å·ä¸­æ–­
                if (got_signal) {
                    printf("\nReceived signal, exiting...\n");
                    break;
                }
            } else if (ret == 0) {
                printf("Timeout, still waiting...\n");
            } else if (FD_ISSET(STDIN_FILENO, &readfds)) {
                char input[100];
                fgets(input, sizeof(input), stdin);
                printf("You entered: %s", input);
            }
        }
        
        return 0;
    }
    ```

    å…³é”®åŒºåˆ«æ€»ç»“

    | ç‰¹æ€§ | pause() | æ ‡å‡†è¾“å…¥å‡½æ•° |
    | - | - | - |
    | ç­‰å¾…ä»€ä¹ˆ | ä¿¡å·ï¼ˆsignalï¼‰ | ç”¨æˆ·è¾“å…¥ï¼ˆå­—ç¬¦æµï¼‰ |
    | å¦‚ä½•è§¦å‘ | Ctrl+Cã€killå‘½ä»¤ã€ç¨‹åºå¼‚å¸¸ç­‰ | é”®ç›˜è¾“å…¥ã€ç®¡é“ã€é‡å®šå‘ç­‰ |
    | æ•°æ®ç±»å‹ | ä¿¡å·ç¼–å·ï¼ˆæ•´æ•°ï¼‰ | å­—ç¬¦/å­—èŠ‚æµ |
    | æ§åˆ¶æ–¹å¼ | å¼‚æ­¥ï¼ˆå¯èƒ½éšæ—¶å‘ç”Ÿï¼‰ | åŒæ­¥ï¼ˆæŒ‰éœ€è¯»å–ï¼‰ |
    | å…¸å‹å‡½æ•° | pause(), sigsuspend() | scanf(), read(), fgets() |

    é‡è¦ç»“è®º

    * pause() ä¸ç”¨æˆ·è¾“å…¥æ— å…³ï¼šå®ƒåªç­‰å¾…ä¿¡å·ï¼Œä¸èƒ½ç”¨äºè¯»å–é”®ç›˜è¾“å…¥

    * ç«æ€æ¡ä»¶ä¾ç„¶å­˜åœ¨ï¼šå¦‚æœ pause() å’Œä¿¡å·çš„å‘é€ä¹‹é—´å­˜åœ¨æ—¶é—´çª—å£ï¼Œpause() å¯èƒ½æ°¸ä¹…æŒ‚èµ·

    * æ­£ç¡®ä½¿ç”¨åœºæ™¯ï¼š

        * ç­‰å¾…ç‰¹å®šä¿¡å·è§¦å‘

        * ç®€å•çš„ä¿¡å·åŒæ­¥

        * ä¸é€‚ç”¨äºç”¨æˆ·äº¤äº’è¾“å…¥

    * ç”¨æˆ·è¾“å…¥çš„æ­£ç¡®æ–¹å¼ï¼š

        * ä½¿ç”¨ scanf(), fgets() ç­‰æ ‡å‡†I/Oå‡½æ•°

        * ä½¿ç”¨ read() ç­‰ç³»ç»Ÿè°ƒç”¨

        * ä½¿ç”¨ select(), poll(), epoll() è¿›è¡Œå¤šè·¯å¤ç”¨

    å¦‚æœä½ éœ€è¦åœ¨ç­‰å¾…ç”¨æˆ·è¾“å…¥çš„åŒæ—¶å“åº”ä¿¡å·ï¼Œåº”è¯¥ä½¿ç”¨ï¼š

    * select()/poll()/epoll() è®¾ç½®è¶…æ—¶

    * æˆ–ä½¿ç”¨ä¿¡å·å¤„ç†é…åˆéé˜»å¡I/O

    * æˆ–ä½¿ç”¨ sigwait() åŒæ­¥ç­‰å¾…ä¿¡å·

* æˆ‘è¶…ï¼Œæˆ‘è¯•äº†ä¸‹ï¼Œè¿˜çœŸæ˜¯

    å“ˆå“ˆï¼Œæ˜¯çš„å§ï¼ ğŸ˜„ è¿™å°±æ˜¯ Unix/Linux ä¿¡å·æœºåˆ¶æœ‰è¶£ï¼ˆä¹Ÿå®¹æ˜“è®©äººå›°æƒ‘ï¼‰çš„åœ°æ–¹ï¼

    ä½ çš„å‘ç°éªŒè¯äº†ä»€ä¹ˆï¼Ÿ

    ```c
    #include <stdio.h>
    #include <unistd.h>

    int main() {
        printf("Start...\n");
        
        // ä½ è¯•äº†è¿™ä¸ªï¼Œå¯¹å—ï¼Ÿ
        pause();
        
        // æŒ‰ Ctrl+C èƒ½é€€å‡ºï¼Œä½†è¾“å…¥æ–‡å­—å®Œå…¨æ²¡ååº”
        printf("This line never prints unless signal arrives\n");
        return 0;
    }
    ```

    ä½ å¯èƒ½ä¼šè¯•çš„å„ç§æƒ…å†µï¼š

    ```bash
    # è¿è¡Œç¨‹åº
    $ ./a.out
    Start...
    ï¼ˆç¨‹åºå¡åœ¨è¿™é‡Œï¼‰

    # å°è¯•1ï¼šè¾“å…¥æ–‡å­—ç„¶åå›è½¦
    hello world   # â† è¾“å…¥è¿™ä¸ªï¼ŒæŒ‰å›è½¦
    ï¼ˆæ²¡ååº”ï¼ï¼‰

    # å°è¯•2ï¼šæŒ‰ Ctrl+C
    ^C            # â† ç«‹å³é€€å‡ºï¼

    # å°è¯•3ï¼šåœ¨å¦ä¸€ä¸ªç»ˆç«¯å‘é€ä¿¡å·
    $ kill -INT <pid>  # ä¹Ÿç«‹å³é€€å‡º
    ```

    ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªè¯¯è§£ï¼Ÿ

    å…¶å®å¾ˆå¤šäººéƒ½ä¸­è¿‡æ‹›ï¼ŒåŸå› æœ‰å‡ ä¸ªï¼š

    1. ç»ˆç«¯ç‰¹æ€§æ··æ·†

        ```c
        // æŒ‰ Ctrl+C çœ‹èµ·æ¥åƒ"é”®ç›˜è¾“å…¥"ï¼Œå®é™…æ˜¯ï¼š
        // ç»ˆç«¯é©±åŠ¨ â†’ äº§ç”Ÿ SIGINT â†’ å‘é€ç»™å‰å°è¿›ç¨‹
        // pause() å“åº”çš„æ˜¯ä¿¡å·ï¼Œä¸æ˜¯æŒ‰é”®
        ```

    2. æ•™å­¦ç¤ºä¾‹è¯¯å¯¼

        å¾ˆå¤šæ•™ç¨‹è¿™æ ·å†™ï¼š

        ```c
        printf("Press Ctrl+C to continue...\n");
        pause();  // çœ‹èµ·æ¥åƒåœ¨ç­‰æŒ‰é”®ï¼Œå®é™…åœ¨ç­‰ä¿¡å·
        ```

    3. çœŸå®è¾“å…¥ vs æ§åˆ¶å­—ç¬¦

        ```text
        é”®ç›˜ä¸Šçš„æŒ‰é”®æœ‰ä¸¤ç§ä½œç”¨ï¼š
        1. è¾“å…¥æ•°æ®ï¼ša, b, 1, 2, Enter ç­‰ â†’ äº§ç”Ÿå­—ç¬¦
        2. æ§åˆ¶åŠŸèƒ½ï¼šCtrl+C, Ctrl+Z, Ctrl+\ ç­‰ â†’ äº§ç”Ÿä¿¡å·
        ```

    å¥½ç©çš„å°å®éªŒ

    å®éªŒ1ï¼šçœ‹çœ‹è°åœ¨çœŸæ­£å¤„ç†è¾“å…¥

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>

    int main() {
        // å¿½ç•¥ Ctrl+C
        signal(SIGINT, SIG_IGN);
        
        printf("Try Ctrl+C now (it's ignored)\n");
        printf("But type something and press Enter: ");
        
        char buffer[100];
        fgets(buffer, sizeof(buffer), stdin);  // çœŸæ­£çš„è¾“å…¥ç­‰å¾…
        
        printf("You typed: %s", buffer);
        return 0;
    }
    ```

    å®éªŒ2ï¼šä¿¡å·å’Œè¾“å…¥çš„æ··åˆæ•ˆæœ

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>
    #include <string.h>

    void handler(int sig) {
        printf("\n[Signal %d received!]\n", sig);
    }

    int main() {
        signal(SIGINT, handler);  // Ctrl+C
        signal(SIGTSTP, handler); // Ctrl+Z
        
        printf("Try:\n");
        printf("1. Type normal text + Enter\n");
        printf("2. Press Ctrl+C (SIGINT)\n");
        printf("3. Press Ctrl+Z (SIGTSTP)\n");
        printf("4. Type 'exit' to quit\n\n");
        
        char input[100];
        while (1) {
            printf("> ");
            fflush(stdout);
            
            if (fgets(input, sizeof(input), stdin) == NULL) {
                break;  // EOF (Ctrl+D)
            }
            
            // å»æ‰æ¢è¡Œç¬¦
            input[strcspn(input, "\n")] = 0;
            
            if (strcmp(input, "exit") == 0) {
                printf("Goodbye!\n");
                break;
            }
            
            printf("You said: %s\n", input);
        }
        
        return 0;
    }
    ```

    æ·±å…¥ç†è§£ï¼šç»ˆç«¯ã€è¿›ç¨‹å’Œä¿¡å·çš„ä¸‰è§’å…³ç³»

    ```text
    ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜
        â†“
    ç»ˆç«¯é©±åŠ¨ç¨‹åº
        â”œâ”€â”€ å¦‚æœæ˜¯æ™®é€šé”®ï¼šæ”¾å…¥è¾“å…¥ç¼“å†²åŒº
        â”œâ”€â”€ å¦‚æœæ˜¯ Ctrl+Cï¼šå‘é€ SIGINT ç»™å‰å°è¿›ç¨‹ç»„
        â”œâ”€â”€ å¦‚æœæ˜¯ Ctrl+Zï¼šå‘é€ SIGTSTP
        â””â”€â”€ å¦‚æœæ˜¯ Ctrl+\ï¼šå‘é€ SIGQUIT
        â†“
    è¿›ç¨‹çš„å“åº”
        â”œâ”€â”€ å¦‚æœæœ‰ read()/fgets()ï¼šè¯»å–ç¼“å†²åŒºå†…å®¹
        â”œâ”€â”€ å¦‚æœæœ‰ pause()ï¼šå¦‚æœæ˜¯ä¿¡å·åˆ™å”¤é†’
        â””â”€â”€ å¦‚æœæœ‰ signal handlerï¼šæ‰§è¡Œå¤„ç†å‡½æ•°
    ```

    å®é™…å¼€å‘ä¸­çš„æ­£ç¡®å§¿åŠ¿

    åœºæ™¯1ï¼šéœ€è¦åŒæ—¶å¤„ç†è¾“å…¥å’Œä¿¡å·

    ```c
    #include <stdio.h>
    #include <unistd.h>
    #include <signal.h>
    #include <errno.h>

    volatile sig_atomic_t should_exit = 0;

    void sigint_handler(int sig) {
        should_exit = 1;
    }

    int main() {
        char buffer[100];
        
        signal(SIGINT, sigint_handler);
        
        while (!should_exit) {
            printf("Enter command (or Ctrl+C to exit): ");
            fflush(stdout);
            
            if (fgets(buffer, sizeof(buffer), stdin) == NULL) {
                if (errno == EINTR) {
                    // è¢«ä¿¡å·ä¸­æ–­
                    continue;
                }
                break;
            }
            
            // å¤„ç†å‘½ä»¤
            printf("Processing: %s", buffer);
        }
        
        printf("\nExiting gracefully...\n");
        return 0;
    }
    ```

    åœºæ™¯2ï¼šæ„å»ºäº¤äº’å¼ shell

    ```c
    // ç±»ä¼¼ bash çš„å®ç°æ€è·¯
    while (!exit_requested) {
        display_prompt();
        
        // 1. è®¾ç½®ä¿¡å·å¤„ç†
        setup_signals();
        
        // 2. è¯»å–è¾“å…¥ï¼ˆå¯èƒ½è¢«ä¿¡å·ä¸­æ–­ï¼‰
        char *line = readline_with_timeout();
        
        // 3. è§£æå’Œæ‰§è¡Œå‘½ä»¤
        if (line != NULL) {
            execute_command(line);
            free(line);
        }
        
        // 4. æ£€æŸ¥æ˜¯å¦éœ€è¦é€€å‡º
        check_exit_conditions();
    }
    ```

    å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ

    * ä¿¡å· â‰  è¾“å…¥ï¼šè¿™æ˜¯ Unix ç¼–ç¨‹çš„é‡è¦ä¸€è¯¾

    * ç»ˆç«¯å¾ˆèªæ˜ï¼šå®ƒçŸ¥é“ä½•æ—¶ç”Ÿæˆå­—ç¬¦ï¼Œä½•æ—¶ç”Ÿæˆä¿¡å·

    * å·¥å…·è¦é€‰å¯¹ï¼š

        * è¦ç­‰ä¿¡å·ï¼šç”¨ pause()/sigsuspend()/sigwait()

        * è¦ç­‰è¾“å…¥ï¼šç”¨ read()/fgets()/scanf()

        * ä¸¤ä¸ªéƒ½è¦ç­‰ï¼šç”¨ select()/poll()/epoll()

    æ­å–œä½ ï¼ ä½ åˆšåˆšéªŒè¯äº†ä¸€ä¸ªé‡è¦çš„ Unix/Linux æ¦‚å¿µåŒºåˆ«ï¼Œè¿™ä¼šè®©ä½ æˆä¸ºæ›´å¥½çš„ç³»ç»Ÿç¨‹åºå‘˜ï¼å¾ˆå¤šæœ‰ç»éªŒçš„å¼€å‘è€…éƒ½æ›¾åœ¨è¿™é‡Œè¸©è¿‡å‘ã€‚ğŸ˜‰

* å„ä¸ªå¹³å°ä¸‹ pause çš„å®ç°

    Windows çš„å‡ ç§æ–¹å¼ï¼š

    ```c
    // æ–¹æ³•1ï¼šsystem("pause") - æœ€ç®€å•
    #include <stdlib.h>
    system("pause");

    // æ–¹æ³•2ï¼šgetch() - éœ€è¦ conio.h
    #include <conio.h>
    printf("Press any key to continue...\n");
    getch();

    // æ–¹æ³•3ï¼šWindows API
    #include <windows.h>
    system("pause");  // æˆ–è€…ç”¨æ›´å¤æ‚çš„ API
    ```

    Linux çš„æ­£ç¡®åšæ³•ï¼š

    ```c
    // æ–¹æ³•1ï¼šä½¿ç”¨ getchar() - æœ€æ¥è¿‘ Windows æ•ˆæœ
    #include <stdio.h>
    printf("Press Enter to continue...\n");
    getchar();  // ç­‰å¾…å›è½¦é”®

    // æ–¹æ³•2ï¼šä»»æ„é”®ç­‰å¾…ï¼ˆéœ€è¦ç»ˆç«¯ç‰¹æ®Šè®¾ç½®ï¼‰
    #include <stdio.h>
    #include <termios.h>
    #include <unistd.h>

    void wait_for_any_key() {
        struct termios oldt, newt;
        tcgetattr(STDIN_FILENO, &oldt);
        newt = oldt;
        newt.c_lflag &= ~(ICANON | ECHO);
        tcsetattr(STDIN_FILENO, TCSANOW, &newt);
        
        printf("Press any key to continue...\n");
        getchar();
        
        tcsetattr(STDIN_FILENO, TCSANOW, &oldt);
    }

    // æ–¹æ³•3ï¼šä½¿ç”¨ read() - ä½çº§åˆ«æ§åˆ¶
    #include <unistd.h>
    #include <stdio.h>
    printf("Press Enter to continue...\n");
    char ch;
    read(STDIN_FILENO, &ch, 1);
    ```

    è·¨å¹³å°è§£å†³æ–¹æ¡ˆï¼š

    ```c
    #include <stdio.h>

    void pause_program() {
        #ifdef _WIN32
            system("pause");
        #else
            printf("Press Enter to continue...\n");
            getchar();
        #endif
    }

    int main() {
        printf("ç¨‹åºè¿è¡Œä¸­...\n");
        pause_program();  // è·¨å¹³å°æš‚åœ
        printf("ç»§ç»­æ‰§è¡Œ...\n");
        return 0;
    }
    ```

* ç®€è¿° strings çš„ç”¨æ³•

    strings æ˜¯ä¸€ä¸ªç”¨äºä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æå–å¯æ‰“å°å­—ç¬¦ä¸²çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¸¸ç”¨äºé€†å‘å·¥ç¨‹ã€è°ƒè¯•æˆ–åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ã€‚

    1. åŸºæœ¬ç”¨æ³•

        ```bash
        strings æ–‡ä»¶å
        ```

        è¿™ä¼šæ‰«ææ–‡ä»¶ï¼Œæå–æ‰€æœ‰é•¿åº¦ â‰¥ 4 çš„å¯æ‰“å° ASCII å­—ç¬¦åºåˆ—å¹¶è¾“å‡ºã€‚

    2. å¸¸ç”¨é€‰é¡¹

        * -n <é•¿åº¦>ï¼šè®¾ç½®æœ€å°å­—ç¬¦ä¸²é•¿åº¦ï¼ˆé»˜è®¤ 4ï¼‰

            ```bash
            strings -n 6 æ–‡ä»¶å  # åªè¾“å‡ºé•¿åº¦è‡³å°‘ä¸º 6 çš„å­—ç¬¦ä¸²
            ```

        * -t <æ ¼å¼>ï¼šæ˜¾ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²åœ¨æ–‡ä»¶ä¸­çš„åç§»ä½ç½®

            ```bash
            strings -t d æ–‡ä»¶å  # åè¿›åˆ¶åç§»
            strings -t x æ–‡ä»¶å  # åå…­è¿›åˆ¶åç§»
            strings -t o æ–‡ä»¶å  # å…«è¿›åˆ¶åç§»
            ```

        * -aï¼šæ‰«ææ•´ä¸ªæ–‡ä»¶ï¼ˆé»˜è®¤å¯èƒ½åªæ‰«æç‰¹å®šåŒºåŸŸï¼‰

            ```bash
            strings -a æ–‡ä»¶å
            ```

        * -e <ç¼–ç >ï¼šæŒ‡å®šå­—ç¬¦ç¼–ç ï¼ˆé»˜è®¤ä¸º 7 ä½ ASCIIï¼‰

            ```bash
            strings -e l æ–‡ä»¶å  # 16 ä½å°ç«¯ Unicode
            strings -e b æ–‡ä»¶å  # 16 ä½å¤§ç«¯ Unicode
            strings -e L æ–‡ä»¶å  # 32 ä½å°ç«¯ Unicode
            strings -e B æ–‡ä»¶å  # 32 ä½å¤§ç«¯ Unicode
            ```

        * -fï¼šæ‰“å°æ–‡ä»¶åï¼ˆåœ¨æ‰«æå¤šä¸ªæ–‡ä»¶æ—¶æœ‰ç”¨ï¼‰

            ```bash
            strings -f *.bin
            ```

        * -oï¼šç­‰åŒäº -t oï¼ˆå…«è¿›åˆ¶åç§»ï¼Œå·²è¿‡æ—¶ï¼Œå»ºè®®ç”¨ -t oï¼‰

    3. å…¸å‹åº”ç”¨åœºæ™¯

        3.1 é€†å‘å·¥ç¨‹/CTF

        ```bash
        strings å¯æ‰§è¡Œæ–‡ä»¶ | grep -i "flag{"
        ```

        3.2 æŸ¥çœ‹åµŒå…¥å¼èµ„æº

        ```bash
        strings firmware.bin | head -50
        ```

        3.3 å¤šæ–‡ä»¶æ‰«æ

        ```bash
        strings -f *.so
        ```

        3.4 æŸ¥æ‰¾ç‰¹å®šé•¿åº¦çš„å­—ç¬¦ä¸²

        ```bash
        strings -n 10 æ–‡ä»¶ | less
        ```

        3.5 å¸¦åç§»è¾“å‡ºï¼Œæ–¹ä¾¿å®šä½

        ```bash
        strings -t x æ–‡ä»¶ | grep "password"
        ```

    4. ç¤ºä¾‹

        ```bash
        # æŸ¥çœ‹ /bin/ls ä¸­çš„é•¿å­—ç¬¦ä¸²
        strings -n 10 /bin/ls

        # å¸¦åå…­è¿›åˆ¶åç§»æŸ¥çœ‹ï¼Œå¹¶æœç´¢ "ELF"
        strings -t x /bin/bash | grep "ELF"

        # æ‰«ææ•´ä¸ªæ–‡ä»¶å¹¶è¾“å‡ºåˆ°æ–‡æœ¬
        strings -a å¯ç–‘æ–‡ä»¶ > è¾“å‡º.txt
        ```

    5. æ³¨æ„äº‹é¡¹

        * strings å¯èƒ½è¯¯å°†äºŒè¿›åˆ¶æ•°æ®è§£é‡Šä¸ºå­—ç¬¦ä¸²ï¼ˆå‡é˜³æ€§ï¼‰ã€‚

        * å¯¹äº Unicode æ–‡ä»¶ï¼Œéœ€æ­£ç¡®ä½¿ç”¨ -e é€‰é¡¹ã€‚

        * å¯ä»¥ç»“åˆ grepã€awk ç­‰è¿›è¡Œè¿›ä¸€æ­¥è¿‡æ»¤ã€‚

* ç®€è¿° matplotlib ä¸­ fig.colorbar() çš„åŸå‹ã€ä½œç”¨åŠç”¨æ³•

    fig.colorbar() æ˜¯ Matplotlib ä¸­ç”¨äºä¸ºå›¾åƒã€ç­‰é«˜çº¿å›¾ç­‰æ ‡é‡æ•°æ®æ˜¾ç¤ºé¢œè‰²æ˜ å°„æ¡ï¼ˆcolorbarï¼‰çš„æ ¸å¿ƒå‡½æ•°ã€‚

    ä¸€ã€å‡½æ•°åŸå‹

    ```python
    fig.colorbar(mappable, cax=None, ax=None, **kwargs)
    ```

    ä¸»è¦å‚æ•°ï¼š

    * mappableï¼šå¿…éœ€å‚æ•°ï¼Œå…·æœ‰é¢œè‰²æ˜ å°„çš„å¯¹è±¡ï¼ˆå¦‚ imshow(), contourf(), pcolormesh() çš„è¿”å›å€¼ï¼‰

    * caxï¼šæŒ‡å®šé¢œè‰²æ¡ç»˜åˆ¶åœ¨å“ªä¸ªåæ ‡è½´ï¼ˆé»˜è®¤æ–°å»ºä¸€ä¸ªåæ ‡è½´ï¼‰

    * axï¼šæŒ‡å®šé¢œè‰²æ¡å…³è”åˆ°å“ªä¸ªä¸»åæ ‡è½´ï¼ˆæˆ–åæ ‡è½´åˆ—è¡¨ï¼‰

    * orientationï¼šæ–¹å‘ï¼Œ'vertical'ï¼ˆé»˜è®¤ï¼‰æˆ– 'horizontal'

    * labelï¼šé¢œè‰²æ¡æ ‡ç­¾

    * ticksï¼šåˆ»åº¦ä½ç½®

    * formatï¼šåˆ»åº¦æ ¼å¼

    äºŒã€ä¸»è¦ä½œç”¨

    * å¯è§†åŒ–æ ‡é‡æ•°æ®ä¸é¢œè‰²çš„æ˜ å°„å…³ç³»

    * æä¾›æ•°æ®å€¼çš„å‚è€ƒæ ‡å°º

    * å¢å¼ºæ•°æ®å¯è¯»æ€§å’Œè§£é‡Šæ€§

    ä¸‰ã€åŸºæœ¬ç”¨æ³•

    1. åŸºæœ¬ç¤ºä¾‹

        ```python
        import matplotlib.pyplot as plt
        import numpy as np

        fig, ax = plt.subplots()
        data = np.random.rand(10, 10)
        im = ax.imshow(data)
        fig.colorbar(im)  # ä¸º imshow å›¾åƒæ·»åŠ é¢œè‰²æ¡
        plt.show()
        ```

    2. è‡ªå®šä¹‰é¢œè‰²æ¡

        ```python
        fig, ax = plt.subplots()
        contour = ax.contourf(np.random.rand(20, 20))

        # è‡ªå®šä¹‰é¢œè‰²æ¡
        cbar = fig.colorbar(contour, 
                           orientation='horizontal',
                           label='æ¸©åº¦ (Â°C)',
                           shrink=0.8,  # ç¼©å°é¢œè‰²æ¡
                           pad=0.05)    # ä¸ä¸»å›¾çš„é—´è·
        cbar.set_ticks([0, 0.5, 1])
        cbar.set_ticklabels(['ä½', 'ä¸­', 'é«˜'])
        ```

    3. å¤šå­å›¾å…±äº«é¢œè‰²æ¡

        ```python
        fig, axes = plt.subplots(1, 3, figsize=(12, 4))

        # åˆ›å»ºä¸‰ä¸ªå­å›¾
        plots = []
        for i, ax in enumerate(axes):
            data = np.random.rand(10, 10) * (i + 1)
            im = ax.imshow(data)
            plots.append(im)

        # å…±äº«ä¸€ä¸ªé¢œè‰²æ¡ï¼ˆä½¿ç”¨ vmin/vmax ç»Ÿä¸€èŒƒå›´ï¼‰
        fig.colorbar(plots[0], ax=axes.ravel().tolist(), 
                    orientation='horizontal', pad=0.1)
        ```

    4. ç²¾ç¡®æ§åˆ¶ä½ç½®

        ```python
        fig, ax = plt.subplots()
        im = ax.imshow(np.random.rand(10, 10))

        # æ‰‹åŠ¨æŒ‡å®šé¢œè‰²æ¡ä½ç½® [left, bottom, width, height]
        cax = fig.add_axes([0.92, 0.1, 0.02, 0.8])
        fig.colorbar(im, cax=cax, label='æ•°å€¼')
        ```

    å››ã€å®ç”¨æŠ€å·§

    1. è·å–é¢œè‰²æ¡å¯¹è±¡è¿›è¡Œåç»­æ“ä½œ

        ```python
        cbar = fig.colorbar(im)
        cbar.set_label('æµ“åº¦ (mg/L)', rotation=270, labelpad=15)
        cbar.ax.tick_params(labelsize=8)
        ```

    2. ç¦»æ•£é¢œè‰²æ¡

        ```python
        from matplotlib import colors

        fig, ax = plt.subplots()
        data = np.random.randint(0, 5, (10, 10))
        cmap = colors.ListedColormap(['red', 'blue', 'green', 'yellow', 'black'])
        bounds = [0, 1, 2, 3, 4, 5]
        norm = colors.BoundaryNorm(bounds, cmap.N)

        im = ax.imshow(data, cmap=cmap, norm=norm)
        cbar = fig.colorbar(im, ticks=[0.5, 1.5, 2.5, 3.5, 4.5])
        cbar.set_ticklabels(['A', 'B', 'C', 'D', 'E'])
        ```

    3. å…³è”å¤šä¸ªåæ ‡è½´

        ```python
        fig, (ax1, ax2) = plt.subplots(1, 2)
        im1 = ax1.imshow(np.random.rand(10, 10))
        im2 = ax2.imshow(np.random.rand(10, 10) * 2)

        # ä¸ºä¸¤ä¸ªå­å›¾æ·»åŠ ä¸€ä¸ªé¢œè‰²æ¡
        fig.colorbar(im1, ax=[ax1, ax2], orientation='horizontal', pad=0.2)
        ```

    äº”ã€æ³¨æ„äº‹é¡¹

    * å‚æ•°é¡ºåºï¼šæ–°ç‰ˆæœ¬ä¸­æ¨è fig.colorbar(mappable, ax=ax) è€Œé plt.colorbar()

    * èŒƒå›´ç»Ÿä¸€ï¼šå¤šå­å›¾æ—¶ä½¿ç”¨ vmin/vmax ç¡®ä¿é¢œè‰²æ˜ å°„ä¸€è‡´

    * æ€§èƒ½ä¼˜åŒ–ï¼šå¤§æ•°æ®é›†æ—¶è€ƒè™‘ä½¿ç”¨ pcolormesh è€Œé imshow

    * é¢œè‰²æ˜ å°„é€‰æ‹©ï¼šæ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©åˆé€‚çš„è‰²å½©æ˜ å°„ï¼ˆsequential, diverging, qualitativeï¼‰

    è¿™ç§è®¾è®¡ä½¿å¾—é¢œè‰²æ¡å¯ä»¥çµæ´»åœ°æ”¾ç½®åœ¨å›¾å½¢çš„ä»»æ„ä½ç½®ï¼Œå¹¶ä¸ä¸€ä¸ªæˆ–å¤šä¸ªåæ ‡è½´çš„æ•°æ®èŒƒå›´ä¿æŒåŒæ­¥ã€‚

* INIT_WORK()

    åŸå‹ï¼š

    ```c
    INIT_WORK(_work, _func)
    ```

    ä½œç”¨ï¼š

    * åˆå§‹åŒ–ä¸€ä¸ªå·¥ä½œé¡¹ï¼ˆwork_structï¼‰

    * å°†å·¥ä½œé¡¹ä¸å¤„ç†å‡½æ•°ç»‘å®š

    ç”¨æ³•ï¼š

    ```c
    /* å®šä¹‰å·¥ä½œé¡¹å’Œå¤„ç†å‡½æ•° */
    struct work_struct my_work;
    void my_work_handler(struct work_struct *work);

    /* åˆå§‹åŒ– */
    INIT_WORK(&my_work, my_work_handler);

    /* æˆ–è€…ä½¿ç”¨åŠ¨æ€åˆ†é… */
    work = kmalloc(sizeof(struct work_struct), GFP_KERNEL);
    INIT_WORK(work, my_work_handler);
    ```

* cancel_work_sync()

    åŸå‹ï¼š

    ```c
    bool cancel_work_sync(struct work_struct *work)
    ```

    ä½œç”¨ï¼š

    * å–æ¶ˆå·²æ’é˜Ÿä½†æœªæ‰§è¡Œçš„å·¥ä½œé¡¹

    * å¦‚æœå·¥ä½œé¡¹æ­£åœ¨æ‰§è¡Œï¼Œåˆ™ç­‰å¾…å…¶å®Œæˆ

    * è¿”å› true è¡¨ç¤ºæˆåŠŸå–æ¶ˆï¼Œfalse è¡¨ç¤ºå·¥ä½œé¡¹å·²åœ¨æ‰§è¡Œæˆ–å·²å®Œæˆ

    ç”¨æ³•ï¼š

    ```c
    /* å–æ¶ˆå·¥ä½œé¡¹ï¼Œç­‰å¾…æ‰§è¡Œä¸­çš„å·¥ä½œå®Œæˆ */
    if (cancel_work_sync(&my_work)) {
        printk(KERN_INFO "Work cancelled\n");
    }

    /* åœ¨æ¨¡å—å¸è½½æˆ–è®¾å¤‡ç§»é™¤æ—¶æ¸…ç† */
    void my_exit(void)
    {
        cancel_work_sync(&my_work);
        /* é‡Šæ”¾ç›¸å…³èµ„æº */
    }
    ```

* å·¥ä½œé˜Ÿåˆ—ï¼ˆworkqueueï¼‰

    åœ¨ Linux é©±åŠ¨å¼€å‘ä¸­ï¼Œå·¥ä½œé˜Ÿåˆ—ï¼ˆworkqueueï¼‰æ˜¯ä¸€ç§é‡è¦çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ï¼Œå…è®¸å°†ä»»åŠ¡æ¨è¿Ÿåˆ°å†…æ ¸çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ä¸‹é¢æ˜¯ç›¸å…³å‡½æ•°çš„è¯¦ç»†è¯´æ˜ï¼š

    äºŒã€ç›¸å…³å‡½æ•°

    1. å·¥ä½œè°ƒåº¦å‡½æ•°

        ```c
        /* å°†å·¥ä½œæäº¤åˆ°ç³»ç»Ÿé»˜è®¤å·¥ä½œé˜Ÿåˆ— */
        bool schedule_work(struct work_struct *work);

        /* å»¶è¿Ÿè°ƒåº¦ï¼ˆæŒ‡å®šå»¶è¿Ÿæ—¶é—´åæ‰§è¡Œï¼‰ */
        bool schedule_delayed_work(struct delayed_work *dwork, 
                                  unsigned long delay);

        /* æŒ‡å®šCPUä¸Šè°ƒåº¦ */
        bool schedule_work_on(int cpu, struct work_struct *work);
        ```

    2. å»¶è¿Ÿå·¥ä½œç›¸å…³

        ```c
        /* åˆå§‹åŒ–å»¶è¿Ÿå·¥ä½œé¡¹ */
        INIT_DELAYED_WORK(_work, _func);

        /* è·å–å»¶è¿Ÿå·¥ä½œçš„work_struct */
        struct work_struct *delayed_work_work(struct delayed_work *dwork);

        /* å–æ¶ˆå»¶è¿Ÿå·¥ä½œ */
        bool cancel_delayed_work_sync(struct delayed_work *dwork);
        ```

    3. å·¥ä½œé˜Ÿåˆ—åˆ›å»ºå’Œç®¡ç†

        ```c
        /* åˆ›å»ºæ–°çš„å·¥ä½œé˜Ÿåˆ— */
        struct workqueue_struct *create_workqueue(const char *name);

        /* åˆ›å»ºå•çº¿ç¨‹å·¥ä½œé˜Ÿåˆ— */
        struct workqueue_struct *create_singlethread_workqueue(const char *name);

        /* åœ¨å·¥ä½œé˜Ÿåˆ—ä¸Šè°ƒåº¦å·¥ä½œ */
        bool queue_work(struct workqueue_struct *wq, struct work_struct *work);

        /* é”€æ¯å·¥ä½œé˜Ÿåˆ— */
        void destroy_workqueue(struct workqueue_struct *wq);
        ```

    4. å·¥ä½œé¡¹çŠ¶æ€æ£€æŸ¥

        ```c
        /* æ£€æŸ¥å·¥ä½œé¡¹æ˜¯å¦æ­£åœ¨æ‰§è¡Œ */
        work_pending(work);

        /* æ£€æŸ¥å·¥ä½œé¡¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ */
        work_busy(work);
        ```

    ä¸‰ã€å…¸å‹ä½¿ç”¨æ¨¡å¼

    ç¤ºä¾‹ï¼šé©±åŠ¨ä¸­ä½¿ç”¨å·¥ä½œé˜Ÿåˆ—

    ```c
    #include <linux/workqueue.h>

    struct my_device {
        struct work_struct work;
        struct delayed_work delayed_work;
        struct workqueue_struct *wq;
        // ... å…¶ä»–å­—æ®µ
    };

    static void work_handler(struct work_struct *work)
    {
        struct my_device *dev = container_of(work, struct my_device, work);
        // å¤„ç†å®é™…å·¥ä½œ
    }

    static void delayed_work_handler(struct work_struct *work)
    {
        struct delayed_work *dwork = to_delayed_work(work);
        struct my_device *dev = container_of(dwork, struct my_device, delayed_work);
        // å»¶è¿Ÿå¤„ç†
    }

    static int __init my_init(void)
    {
        struct my_device *dev;
        
        /* åˆå§‹åŒ–å·¥ä½œé¡¹ */
        INIT_WORK(&dev->work, work_handler);
        INIT_DELAYED_WORK(&dev->delayed_work, delayed_work_handler);
        
        /* åˆ›å»ºç§æœ‰å·¥ä½œé˜Ÿåˆ— */
        dev->wq = create_singlethread_workqueue("my_wq");
        
        /* è°ƒåº¦å·¥ä½œ */
        schedule_work(&dev->work);                    // ä½¿ç”¨ç³»ç»Ÿé˜Ÿåˆ—
        queue_work(dev->wq, &dev->work);             // ä½¿ç”¨ç§æœ‰é˜Ÿåˆ—
        schedule_delayed_work(&dev->delayed_work, HZ); // å»¶è¿Ÿ1ç§’
        
        return 0;
    }

    static void __exit my_exit(void)
    {
        /* å–æ¶ˆæ‰€æœ‰å·¥ä½œé¡¹ */
        cancel_work_sync(&dev->work);
        cancel_delayed_work_sync(&dev->delayed_work);
        
        /* åˆ·æ–°å¹¶é”€æ¯å·¥ä½œé˜Ÿåˆ— */
        flush_workqueue(dev->wq);
        destroy_workqueue(dev->wq);
    }
    ```

    å››ã€é‡è¦æ³¨æ„äº‹é¡¹

    * ä¸Šä¸‹æ–‡é™åˆ¶ï¼šå·¥ä½œå¤„ç†å‡½æ•°åœ¨è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œå¯ä»¥ç¡çœ ï¼Œä½†ä¸èƒ½è®¿é—®ç”¨æˆ·ç©ºé—´

    * å¹¶å‘è€ƒè™‘ï¼šé»˜è®¤å·¥ä½œé˜Ÿåˆ—å¯èƒ½ç”±å¤šä¸ªå·¥ä½œçº¿ç¨‹å…±äº«

    * å–æ¶ˆæ—¶æœºï¼šcancel_work_sync() åº”åœ¨è®¾å¤‡ç§»é™¤æˆ–æ¨¡å—é€€å‡ºæ—¶è°ƒç”¨

    * å†…å­˜å®‰å…¨ï¼šç¡®ä¿åœ¨å·¥ä½œå¤„ç†å‡½æ•°è¿è¡Œæ—¶ï¼Œç›¸å…³æ•°æ®ç»“æ„ä¿æŒæœ‰æ•ˆ

    * æ­»é”é¿å…ï¼šé¿å…åœ¨å·¥ä½œå¤„ç†å‡½æ•°ä¸­ç­‰å¾…è‡ªèº«è¢«å–æ¶ˆ

    äº”ã€é€‰æ‹©å»ºè®®

    * ç³»ç»Ÿé˜Ÿåˆ—ï¼šé€‚åˆä¸é¢‘ç¹ã€çŸ­æ—¶é—´ä»»åŠ¡

    * ç§æœ‰é˜Ÿåˆ—ï¼šé€‚åˆé«˜é¢‘ç‡ã€é•¿æ—¶é—´è¿è¡Œä»»åŠ¡

    * å•çº¿ç¨‹é˜Ÿåˆ—ï¼šéœ€è¦ä¸¥æ ¼ä¸²è¡Œæ‰§è¡Œæ—¶ä½¿ç”¨

    * å»¶è¿Ÿå·¥ä½œï¼šéœ€è¦å®šæ—¶æˆ–å»¶è¿Ÿæ‰§è¡Œæ—¶ä½¿ç”¨

    è¿™äº›å‡½æ•°ä¸º Linux é©±åŠ¨æä¾›äº†çµæ´»çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†æœºåˆ¶ï¼Œæ˜¯ä¸­æ–­å¤„ç†ã€å®šæ—¶ä»»åŠ¡ç­‰åœºæ™¯çš„é‡è¦å·¥å…·ã€‚

* matlab `deal()`

    deal() å‡½æ•°è¯¦è§£

    1. å‡½æ•°åŸå‹

        ```matlab
        [Y1, Y2, ..., Yn] = deal(X)
        [Y1, Y2, ..., Yn] = deal(X1, X2, ..., Xn)
        ```

    2. åŸºæœ¬ä½œç”¨

        deal() çš„ä¸»è¦ä½œç”¨æ˜¯åˆ†é…è¾“å…¥åˆ°å¤šä¸ªè¾“å‡ºï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŒæ—¶ç»™å¤šä¸ªå˜é‡èµ‹å€¼çš„åœºæ™¯ã€‚

    3. ä¸¤ç§ä¸»è¦ç”¨æ³•

        ç”¨æ³•1ï¼šå¤åˆ¶ç›¸åŒçš„å€¼åˆ°å¤šä¸ªè¾“å‡º

        ```matlab
        % æ‰€æœ‰è¾“å‡ºå˜é‡è·å¾—ç›¸åŒçš„å€¼
        [a, b, c] = deal(10);
        % ç»“æœï¼ša = 10, b = 10, c = 10

        % åœ¨ç»“æ„ä½“æˆ–å…ƒèƒæ•°ç»„ä¸­å¾ˆæœ‰ç”¨
        S = struct('name', {'Alice', 'Bob'}, 'age', {25, 30});
        [name1, name2] = deal(S.name);
        % name1 = 'Alice', name2 = 'Bob'
        ```

        ç”¨æ³•2ï¼šåˆ†é…ä¸åŒçš„å€¼åˆ°å¯¹åº”çš„è¾“å‡º

        ```matlab
        % è¾“å…¥è¾“å‡ºä¸€ä¸€å¯¹åº”
        [x, y, z] = deal(1, 2, 3);
        % ç»“æœï¼šx = 1, y = 2, z = 3

        % ç›¸å½“äºï¼š
        % x = 1;
        % y = 2;
        % z = 3;
        ```

    4. åœ¨åŒ¿åå‡½æ•°ä¸­çš„ç‰¹æ®Šç”¨é€”

        åœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œdeal() æ˜¯å®ç°å¤šè¾“å‡ºåŒ¿åå‡½æ•°çš„å”¯ä¸€æ–¹å¼ï¼š

        ```matlab
        % æ™®é€šåŒ¿åå‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼
        singleOut = @(x) x^2;  % åªèƒ½è¿”å›ä¸€ä¸ªå€¼

        % ä½¿ç”¨ deal() å®ç°å¤šè¾“å‡º
        multiOut = @(x) deal(x^2, x^3, sqrt(x));
        [a, b, c] = multiOut(4);
        % a = 16, b = 64, c = 2
        ```

    5. å®é™…åº”ç”¨ç¤ºä¾‹

        ç¤ºä¾‹1ï¼šäº¤æ¢å˜é‡å€¼

        ```matlab
        a = 1; b = 2;
        [a, b] = deal(b, a);  % äº¤æ¢ a å’Œ b
        % ç»“æœï¼ša = 2, b = 1
        ```

        ç¤ºä¾‹2ï¼šç»“æ„ä½“å­—æ®µæ‰¹é‡æå–

        ```matlab
        students(1) = struct('name', 'Alice', 'score', 85);
        students(2) = struct('name', 'Bob', 'score', 92);

        % æå–æ‰€æœ‰å­¦ç”Ÿçš„åˆ†æ•°
        [score1, score2] = deal(students.score);
        % score1 = 85, score2 = 92
        ```

        ç¤ºä¾‹3ï¼šå¤„ç†å‡½æ•°è¾“å‡º

        ```matlab
        % æŸäº›å‡½æ•°è¿”å›å¤šè¾“å‡ºï¼Œä½†ä¸­é—´éœ€è¦å¤„ç†
        [minVal, maxVal] = minmax([1 5 3 8 2]);

        % å¦‚æœéœ€è¦å­˜å‚¨æ‰€æœ‰æå€¼ä¿¡æ¯
        [val, idx] = min([1 5 3 8 2]);
        [minInfo, maxInfo] = deal([val, idx], max([1 5 3 8 2]));
        ```

        ç¤ºä¾‹4ï¼šå…ƒèƒæ•°ç»„æ“ä½œ

        ```matlab
        C = {'apple', 'banana', 'cherry'};
        [first, second, third] = deal(C{:});
        % first = 'apple', second = 'banana', third = 'cherry'
        ```

    6. æ³¨æ„äº‹é¡¹

        * è¾“å…¥è¾“å‡ºæ•°é‡å¿…é¡»åŒ¹é…ï¼ˆç”¨æ³•2æ—¶ï¼‰ï¼š

            ```matlab
            % é”™è¯¯ï¼šè¾“å…¥è¾“å‡ºæ•°é‡ä¸åŒ¹é…
            [a, b, c] = deal(1, 2);  % æŠ¥é”™
            ```

        * åœ¨åŒ¿åå‡½æ•°ä¸­æ˜¯å¿…è¦çš„ï¼š

            * æ²¡æœ‰ deal()ï¼ŒåŒ¿åå‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼

        * å¯¹äºç®€å•èµ‹å€¼ï¼Œç›´æ¥èµ‹å€¼æ›´é«˜æ•ˆï¼š

            ```matlab
            % ä½¿ç”¨ deal()
            [a, b, c] = deal(1, 2, 3);

            % æ›´é«˜æ•ˆçš„ç›´æ¥èµ‹å€¼
            a = 1; b = 2; c = 3;
            ```

    7. æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”

        ```matlab
        % æ–¹æ³•1ï¼šä½¿ç”¨ deal()
        [x, y, z] = deal(a, b, c);

        % æ–¹æ³•2ï¼šç›´æ¥èµ‹å€¼ï¼ˆæ›´æ¨èï¼Œæ€§èƒ½æ›´å¥½ï¼‰
        x = a;
        y = b;
        z = c;

        % æ–¹æ³•3ï¼šä½¿ç”¨å…ƒèƒæ‰©å±•ï¼ˆç‰¹å®šåœºæ™¯ï¼‰
        results = num2cell([a, b, c]);
        [x, y, z] = results{:};
        ```

    æ€»ç»“

    deal() ä¸»è¦åœ¨ä¸¤ä¸ªåœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š

    * åŒ¿åå‡½æ•°ä¸­å®ç°å¤šè¾“å‡º

    * æ‰¹é‡å¤„ç†ç»“æ„ä½“æˆ–å…ƒèƒæ•°ç»„æ•°æ®

    åœ¨å…¶ä»–å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç›´æ¥èµ‹å€¼æ˜¯æ›´ç®€å•é«˜æ•ˆçš„é€‰æ‹©ã€‚

    **ç®€è¿° matlab ä¸­ getTwoValues = @(x) deal(x^2, x^3); çš„å«ä¹‰**

    åœ¨ MATLAB ä¸­ï¼ŒgetTwoValues = @(x) deal(x^2, x^3); æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°çš„å®šä¹‰ï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š

    1. æ•´ä½“å«ä¹‰

        åˆ›å»ºä¸€ä¸ªåä¸º getTwoValues çš„å‡½æ•°å¥æŸ„ï¼Œè¯¥å‡½æ•°ï¼š

        * æ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•° x

        * åŒæ—¶è¿”å›ä¸¤ä¸ªè¾“å‡ºï¼šxÂ² å’Œ xÂ³

    2. å…³é”®å…ƒç´ è§£æ

        @(x)

        * å®šä¹‰åŒ¿åå‡½æ•°çš„è¯­æ³•

        * x æ˜¯è¾“å…¥å‚æ•°

        deal(x^2, x^3)

        * deal() æ˜¯ MATLAB å‡½æ•°ï¼Œç”¨äºå°†å¤šä¸ªè¾“å‡ºåˆ†é…ç»™ä¸åŒçš„å˜é‡

        * è¿™é‡ŒæŒ‡å®šå‡½æ•°è¿”å›ä¸¤ä¸ªå€¼ï¼šx^2 å’Œ x^3

    3. ä½¿ç”¨ç¤ºä¾‹

        ```matlab
        % è°ƒç”¨å‡½æ•°å¹¶æ¥æ”¶ä¸¤ä¸ªè¾“å‡º
        [a, b] = getTwoValues(3)

        % ç»“æœï¼š
        % a = 9  (3Â²)
        % b = 27 (3Â³)

        % å¦‚æœåªæ¥æ”¶ä¸€ä¸ªè¾“å‡ºï¼Œä¼šå¾—åˆ°ç¬¬ä¸€ä¸ªå€¼
        c = getTwoValues(2)  % c = 4

        % è°ƒç”¨ç¤ºä¾‹
        [x2, x3] = getTwoValues(5);  % x2=25, x3=125
        ```

    4. ç›¸å½“äºä¼ ç»Ÿå‡½æ•°å®šä¹‰

        ```matlab
        function [y1, y2] = getTwoValues(x)
            y1 = x^2;
            y2 = x^3;
        end
        ```

        ä½†åŒ¿åå‡½æ•°æ›´ç®€æ´ï¼Œé€‚åˆç®€å•çš„å•è¡Œå‡½æ•°å®šä¹‰ã€‚

    5. åº”ç”¨åœºæ™¯

        * éœ€è¦å¿«é€Ÿå®šä¹‰ç®€å•å‡½æ•°

        * ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼ˆå¦‚ fplotã€arrayfunï¼‰

        * ä¸´æ—¶è®¡ç®—ï¼Œæ— éœ€åˆ›å»ºå•ç‹¬çš„ .m æ–‡ä»¶

    è¿™ç§è¯­æ³•åœ¨ MATLAB ä¸­å¸¸ç”¨äºåˆ›å»ºç®€æ´çš„å¤šè¾“å‡ºå‡½æ•°ã€‚

* ç®€è¿° matlab ä¸­ shading() çš„åŸå‹ã€ä½œç”¨åŠç”¨æ³•

    shading() æ˜¯ MATLAB ä¸­ç”¨äºæ§åˆ¶æ›²é¢å’Œè¡¥ç‰‡å›¾å½¢é¢œè‰²ç€è‰²çš„å‡½æ•°ã€‚

    åŸå‹

    ```matlab
    shading(style)
    ```

    ä¸»è¦ä½œç”¨

    æ§åˆ¶æ›²é¢ (surf, mesh ç­‰) å’Œè¡¥ç‰‡ (patch) å›¾å½¢çš„ç€è‰²æ–¹å¼ï¼Œå³å¦‚ä½•ç”¨é¢œè‰²å¡«å……å›¾å½¢è¡¨é¢ã€‚

    ä¸‰ç§ç€è‰²æ ·å¼

    1. shading flat

        * ç‰¹ç‚¹ï¼šæ¯ä¸ªç½‘æ ¼é¢ç‰‡ä½¿ç”¨å•ä¸€å‡åŒ€é¢œè‰²

        * é¢œè‰²ä¾æ®ï¼šä½¿ç”¨é¢ç‰‡æœ€åä¸€ä¸ªé¡¶ç‚¹çš„é¢œè‰²å€¼

        * æ•ˆæœï¼šé¢ç‰‡é—´æœ‰æ˜æ˜¾è¾¹ç•Œï¼Œæ²¡æœ‰å¹³æ»‘è¿‡æ¸¡

    2. shading facetedï¼ˆé»˜è®¤ï¼‰

        * ç‰¹ç‚¹ï¼šflat çš„åŸºç¡€ä¸Šæ·»åŠ é»‘è‰²ç½‘æ ¼çº¿

        * æ•ˆæœï¼šæ¸…æ™°æ˜¾ç¤ºç½‘æ ¼ç»“æ„ï¼Œæœ€å¸¸ç”¨

    3. shading interp

        * ç‰¹ç‚¹ï¼šåœ¨ç½‘æ ¼ç‚¹ä¹‹é—´è¿›è¡Œé¢œè‰²æ’å€¼

        * æ•ˆæœï¼šé¢œè‰²å¹³æ»‘è¿‡æ¸¡ï¼Œå¤–è§‚æœ€å…‰æ»‘

    ç”¨æ³•ç¤ºä¾‹

    ```matlab
    % åˆ›å»ºç¤ºä¾‹æ›²é¢
    [X,Y,Z] = peaks(30);

    % ç»˜åˆ¶æ›²é¢
    subplot(1,3,1)
    surf(X,Y,Z)
    shading flat
    title('flat ç€è‰²')

    subplot(1,3,2)
    surf(X,Y,Z)
    shading faceted
    title('faceted ç€è‰²ï¼ˆé»˜è®¤ï¼‰')

    subplot(1,3,3)
    surf(X,Y,Z)
    shading interp
    title('interp ç€è‰²')
    ```

    é«˜çº§ç”¨æ³•

    ```matlab
    % ç»“åˆå…‰ç…§æ•ˆæœ
    figure
    surf(peaks)
    shading interp
    light
    lighting gouraud  % é…åˆ shading interp æ•ˆæœæ›´å¥½

    % å¯¹ä¸åŒå­å›¾åº”ç”¨ä¸åŒç€è‰²
    figure
    ax1 = subplot(1,2,1);
    surf(peaks(20))
    shading(ax1, 'flat')

    ax2 = subplot(1,2,2);
    surf(peaks(20))
    shading(ax2, 'interp')
    ```

    æ³¨æ„äº‹é¡¹

    * ç”Ÿæ•ˆå¯¹è±¡ï¼šåªå½±å“å½“å‰åæ ‡åŒº (gca)

    * ä¸ colormap å…³ç³»ï¼šé…åˆä½¿ç”¨ï¼Œcolormap å®šä¹‰é¢œè‰²æ˜ å°„ï¼Œshading æ§åˆ¶ç€è‰²æ–¹å¼

    * æ€§èƒ½è€ƒè™‘ï¼šinterp è®¡ç®—é‡æœ€å¤§ï¼Œflat å’Œ faceted è¾ƒè½»é‡

    * é€æ˜åº¦æ”¯æŒï¼šå¦‚æœè®¾ç½®äº† FaceAlphaï¼Œæ‰€æœ‰ç€è‰²æ–¹å¼éƒ½æ”¯æŒé€æ˜åº¦

    å…¸å‹åº”ç”¨åœºæ™¯

    * ç§‘å­¦å¯è§†åŒ–ï¼šfaceted æ¸…æ™°æ˜¾ç¤ºæ•°æ®ç½‘æ ¼

    * æ¸²æŸ“æ•ˆæœï¼šinterp ç”¨äºå¹³æ»‘è¡¨é¢æ¸²æŸ“

    * å¿«é€Ÿé¢„è§ˆï¼šflat ç”¨äºå¿«é€Ÿæ•°æ®æ£€æŸ¥

    shading æ˜¯ MATLAB ä¸‰ç»´å¯è§†åŒ–ä¸­è°ƒæ•´å›¾å½¢å¤–è§‚çš„é‡è¦å·¥å…·ï¼Œå¯æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒå¹³è¡¡ï¼ˆæ¸…æ™°åº¦ vs å¹³æ»‘åº¦ vs æ€§èƒ½ï¼‰ã€‚

* matlab spy() å‡½æ•°

    åŸå‹

    ```matlab
    spy(S)
    spy(S, markersize)
    spy(S, LineSpec)
    spy(S, LineSpec, markersize)
    spy(ax, ___)
    ```

    ä½œç”¨

    å¯è§†åŒ–ç¨€ç–çŸ©é˜µçš„éé›¶å…ƒç´ æ¨¡å¼ï¼Œå¸¸ç”¨äºåˆ†æçŸ©é˜µç»“æ„ã€å¡«å……æ¨¡å¼ã€è¿æ¥æ€§ç­‰ã€‚

    ç”¨æ³•ç¤ºä¾‹

    ```matlab
    % åˆ›å»ºç¨€ç–çŸ©é˜µ
    S = bucky;  % Bucky çƒé‚»æ¥çŸ©é˜µ

    % åŸºæœ¬ç”¨æ³•
    figure
    subplot(2,2,1)
    spy(S)
    title('é»˜è®¤æ˜¾ç¤º')

    % æ§åˆ¶æ ‡è®°å¤§å°
    subplot(2,2,2)
    spy(S, 10)  % æ ‡è®°å¤§å°ä¸º10
    title('æ ‡è®°å¤§å°=10')

    % ä½¿ç”¨çº¿æ¡è§„èŒƒ
    subplot(2,2,3)
    spy(S, 'r*', 8)  % çº¢è‰²æ˜Ÿå·ï¼Œå¤§å°8
    title('çº¢è‰²æ˜Ÿå·æ ‡è®°')

    % è·å–é¢å¤–ä¿¡æ¯
    subplot(2,2,4)
    spy(S)
    [nz, rows, cols] = find(S);
    title(sprintf('éé›¶å…ƒç´ æ•°: %d', nnz(S)))

    % åˆ†æçŸ©é˜µç»“æ„
    A = delsq(numgrid('S', 30));  % æœ‰é™å·®åˆ†çŸ©é˜µ
    figure
    spy(A)
    title('æœ‰é™å·®åˆ†çŸ©é˜µç»“æ„')
    ```

    å…¸å‹åº”ç”¨

    * çŸ©é˜µç»“æ„åˆ†æ

        ```matlab
        % å¸¦çŠ¶çŸ©é˜µåˆ†æ
        B = diag(ones(50,1)) + diag(ones(49,1),1) + diag(ones(49,1),-1);
        spy(B)
        title('ä¸‰å¯¹è§’çŸ©é˜µ')
        ```

    * ç¨€ç–æ¨¡å¼æ¯”è¾ƒ

    ```matlab
    % æ¯”è¾ƒä¸åŒå¡«å……ç­–ç•¥
    load west0479
    figure
    subplot(1,3,1)
    spy(west0479)
    title('åŸå§‹çŸ©é˜µ')

    subplot(1,3,2)
    spy(chol(west0479))
    title('Choleskyåˆ†è§£å')

    subplot(1,3,3)
    [p,~,~] = colamd(west0479);
    spy(west0479(p,p))
    title('åˆ—é‡æ’åºå')
    ```

* histogram() å‡½æ•°

    åŸå‹

    ```matlab
    histogram(X)
    histogram(X, nbins)
    histogram(X, edges)
    histogram(ax, ___)
    h = histogram(___)
    ```

    ä½œç”¨

    åˆ›å»ºæ•°æ®çš„ç›´æ–¹å›¾ï¼Œç”¨äºå¯è§†åŒ–æ•°æ®åˆ†å¸ƒã€é¢‘ç‡ç»Ÿè®¡ã€‚

    ä¸»è¦å±æ€§æ§åˆ¶

    ```matlab
    % åŸºæœ¬ç”¨æ³•ç¤ºä¾‹
    figure

    % 1. é»˜è®¤ç›´æ–¹å›¾
    subplot(2,3,1)
    data = randn(1000,1);
    histogram(data)
    title('é»˜è®¤ç›´æ–¹å›¾')

    % 2. æŒ‡å®šç®±æ•°
    subplot(2,3,2)
    histogram(data, 30)  % 30ä¸ªç®±å­
    title('30ä¸ªç®±å­')

    % 3. æŒ‡å®šè¾¹ç•Œ
    subplot(2,3,3)
    edges = -4:0.5:4;
    histogram(data, edges)
    title('æŒ‡å®šè¾¹ç•Œ')

    % 4. å½’ä¸€åŒ–
    subplot(2,3,4)
    histogram(data, 'Normalization', 'pdf')
    title('æ¦‚ç‡å¯†åº¦')

    % 5. æ˜¾ç¤ºæ ·å¼
    subplot(2,3,5)
    histogram(data, 'FaceColor', 'g', 'EdgeColor', 'k', 'FaceAlpha', 0.7)
    title('è‡ªå®šä¹‰é¢œè‰²')

    % 6. æ°´å¹³ç›´æ–¹å›¾
    subplot(2,3,6)
    histogram(data, 'Orientation', 'horizontal')
    title('æ°´å¹³ç›´æ–¹å›¾')
    ```

    é«˜çº§ç”¨æ³•

    ```matlab
    % 1. å¤šä¸ªæ•°æ®é›†æ¯”è¾ƒ
    figure
    data1 = randn(1000,1);
    data2 = randn(1000,1) * 0.8 + 1;
    histogram(data1, 'FaceAlpha', 0.5, 'Normalization', 'probability')
    hold on
    histogram(data2, 'FaceAlpha', 0.5, 'Normalization', 'probability')
    legend('æ•°æ®é›†1', 'æ•°æ®é›†2')
    title('åˆ†å¸ƒæ¯”è¾ƒ')

    % 2. è·å–ç»Ÿè®¡ä¿¡æ¯
    h = histogram(data);
    counts = h.Values;      % æ¯ä¸ªç®±çš„è®¡æ•°
    edges = h.BinEdges;     % ç®±è¾¹ç•Œ
    binCenters = (edges(1:end-1) + edges(2:end)) / 2;

    % 3. ç´¯ç§¯åˆ†å¸ƒ
    figure
    histogram(data, 'Normalization', 'cdf')
    title('ç´¯ç§¯åˆ†å¸ƒå‡½æ•°')

    % 4. åˆ†ç»„æ•°æ®
    figure
    load carsmall
    histogram(MPG, 'BinMethod', 'auto')
    xlabel('MPG')
    ylabel('é¢‘æ•°')
    title('æ±½è½¦MPGåˆ†å¸ƒ')

    % 5. ç®±å®½æ§åˆ¶
    figure
    subplot(1,2,1)
    histogram(data, 'BinWidth', 0.2)
    title('ç®±å®½=0.2')

    subplot(1,2,2)
    histogram(data, 'BinLimits', [-2, 2])
    title('é™åˆ¶èŒƒå›´[-2,2]')
    ```

    å±æ€§é€‰é¡¹æ€»ç»“

    | å±æ€§ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
    | - | - | - |
    | NumBins | ç®±æ•° | 20 |
    | BinWidth | ç®±å®½åº¦ | 0.5 |
    | BinEdges | ç®±è¾¹ç•Œ | [-3:0.5:3] |
    | Normalization | å½’ä¸€åŒ–æ–¹å¼ | 'count', 'probability', 'pdf', 'cdf' |
    | FaceColor | å¡«å……é¢œè‰² | 'r', [0.5 0.5 0.5] |
    | EdgeColor | è¾¹ç•Œé¢œè‰² | 'k', 'none' |
    | FaceAlpha | é€æ˜åº¦ | 0.5 |
    | Orientation | æ–¹å‘ | 'vertical', 'horizontal' |
    | DisplayStyle | æ˜¾ç¤ºæ ·å¼ | 'bar', 'stairs' |

    å…¸å‹åº”ç”¨åœºæ™¯

    * æ•°æ®åˆ†å¸ƒåˆ†æï¼šæŸ¥çœ‹æ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒç­‰

    * å¼‚å¸¸å€¼æ£€æµ‹ï¼šè¯†åˆ«åˆ†å¸ƒè¾¹ç¼˜çš„å¼‚å¸¸ç‚¹

    * æ•°æ®æ¯”è¾ƒï¼šå¤šä¸ªæ•°æ®é›†åˆ†å¸ƒå¯¹æ¯”

    * è´¨é‡æ§åˆ¶ï¼šç›‘æ§è¿‡ç¨‹æ•°æ®çš„ç¨³å®šæ€§

    * å›¾åƒå¤„ç†ï¼šå›¾åƒç°åº¦ç›´æ–¹å›¾åˆ†æ

* camlight() å‡½æ•°

    åŸå‹

    ```matlab
    camlight
    camlight(az, el)
    camlight(light_handle, ...)
    camlight(..., style)
    light_handle = camlight(...)
    ```

    ä½œç”¨

    åˆ›å»ºä¸ç›¸æœºä½ç½®ç›¸å…³è”çš„å…‰æºï¼Œä½¿ä¸‰ç»´å›¾å½¢åœ¨ä¸åŒè§†è§’ä¸‹éƒ½æœ‰è‰¯å¥½çš„ç…§æ˜æ•ˆæœã€‚

    ç”¨æ³•ç¤ºä¾‹

    ```matlab
    % åˆ›å»ºä¸‰ç»´æ›²é¢
    [x,y,z] = sphere(50);
    figure
    surf(x,y,z, 'FaceAlpha', 0.8)
    axis equal

    % 1. é»˜è®¤ç›¸æœºç¯
    subplot(2,2,1)
    surf(x,y,z)
    camlight  % é»˜è®¤ï¼šå³ä¸Šæ–¹45åº¦
    title('é»˜è®¤ camlight')

    % 2. æŒ‡å®šæ–¹ä½è§’å’Œé«˜ç¨‹è§’
    subplot(2,2,2)
    surf(x,y,z)
    camlight(30, 60)  % az=30Â°, el=60Â°
    title('az=30Â°, el=60Â°')

    % 3. ä¸åŒæ ·å¼
    subplot(2,2,3)
    surf(x,y,z)
    camlight('left')  % å·¦ä¾§å…‰
    title('å·¦ä¾§å…‰')

    subplot(2,2,4)
    surf(x,y,z)
    camlight('right', 'infinite')  % å³ä¾§æ— é™è¿œå…‰
    title('å³ä¾§æ— é™è¿œå…‰')
    ```

    å…‰æºæ ·å¼

    ```matlab
    figure
    % local æ ·å¼ï¼šç‚¹å…‰æºï¼Œéšè·ç¦»è¡°å‡
    subplot(1,2,1)
    surf(peaks)
    camlight(45, 30, 'local')
    lighting gouraud
    title('local ç‚¹å…‰æº')

    % infinite æ ·å¼ï¼šå¹³è¡Œå…‰ï¼Œæ— è¡°å‡
    subplot(1,2,2)
    surf(peaks)
    camlight(45, 30, 'infinite')
    lighting gouraud
    title('infinite å¹³è¡Œå…‰')
    ```

    é«˜çº§ç”¨æ³•

    ```matlab
    % åŠ¨æ€æ›´æ–°å…‰æº
    figure
    surf(peaks)
    camlight('headlight')  % å¤´ç¯å…‰
    title('ä½¿ç”¨æ–¹å‘é”®æ—‹è½¬ï¼Œå…‰æºè·Ÿéšç›¸æœº')

    % å¤šä¸ªå…‰æº
    figure
    [x,y,z] = sphere;
    surf(x,y,z, 'FaceColor', 'y', 'EdgeColor', 'none')
    camlight('left')
    camlight('right')
    lighting gouraud
    material shiny
    ```

* set() å‡½æ•°

    åŸå‹

    ```matlab
    set(H, Name, Value)
    set(H, NameArray, ValueArray)
    set(H, S)
    set(H)
    A = set(H)
    ```

    ä½œç”¨

    è®¾ç½®å›¾å½¢å¯¹è±¡å±æ€§ï¼Œæ˜¯MATLABå›¾å½¢ç³»ç»Ÿçš„æ ¸å¿ƒå‡½æ•°ä¹‹ä¸€ã€‚

    ç”¨æ³•ç¤ºä¾‹

    ```matlab
    % åˆ›å»ºå›¾å½¢
    x = 0:0.1:2*pi;
    y = sin(x);

    figure
    h_plot = plot(x, y);

    % 1. è®¾ç½®å•ä¸ªå±æ€§
    set(h_plot, 'LineWidth', 2)

    % 2. è®¾ç½®å¤šä¸ªå±æ€§
    set(h_plot, 'Color', 'r', 'LineStyle', '--', 'Marker', 'o')

    % 3. ä½¿ç”¨ç»“æ„ä½“è®¾ç½®
    props.LineWidth = 3;
    props.MarkerSize = 8;
    props.MarkerFaceColor = 'g';
    set(h_plot, props)

    % 4. è·å–å¯ç”¨å±æ€§åˆ—è¡¨
    prop_list = set(h_plot);

    % 5. è®¾ç½®åæ ‡è½´å±æ€§
    set(gca, 'FontSize', 12, 'GridLineStyle', '-')
    ```

    å¸¸è§å›¾å½¢å¯¹è±¡å±æ€§è®¾ç½®

    ```matlab
    figure

    % è®¾ç½®å›¾å½¢çª—å£
    set(gcf, 'Name', 'æˆ‘çš„å›¾å½¢', 'NumberTitle', 'off', ...
             'Position', [100 100 800 600], 'Color', [0.9 0.9 0.9])

    % åˆ›å»ºå­å›¾
    subplot(2,2,1)
    h1 = plot(rand(10,1));
    set(h1, 'LineWidth', 2, 'Marker', 's', 'MarkerSize', 8)

    % è®¾ç½®åæ ‡è½´
    subplot(2,2,2)
    plot(rand(10,1))
    set(gca, 'XGrid', 'on', 'YGrid', 'on', ...
             'FontSize', 10, 'Box', 'on')

    % è®¾ç½®æ–‡æœ¬
    subplot(2,2,3)
    plot(rand(10,1))
    h_title = title('éšæœºæ•°æ®');
    set(h_title, 'FontSize', 14, 'FontWeight', 'bold', 'Color', 'red')

    % è®¾ç½®å›¾ä¾‹
    subplot(2,2,4)
    h2 = plot(rand(10,2));
    h_legend = legend('æ•°æ®1', 'æ•°æ®2');
    set(h_legend, 'Location', 'best', 'FontSize', 10)
    ```

    æ‰¹é‡è®¾ç½®æŠ€å·§

    ```matlab
    % æ‰¹é‡è®¾ç½®å¤šä¸ªå¯¹è±¡
    figure
    hold on
    h_lines = zeros(5,1);
    colors = {'r', 'g', 'b', 'm', 'c'};

    for i = 1:5
        h_lines(i) = plot(rand(10,1) + i);
    end

    % æ‰¹é‡è®¾ç½®çº¿æ¡å±æ€§
    set(h_lines, {'Color'}, colors', 'LineWidth', 2)

    % è®¾ç½®ä¸åŒæ ‡è®°
    markers = {'o', '+', '*', '.', 'x'};
    for i = 1:5
        set(h_lines(i), 'Marker', markers{i})
    end
    ```

* view() å‡½æ•°

    åŸå‹

    ```matlab
    view(az, el)
    view([az, el])
    view([x, y, z])
    view(2)
    view(3)
    view(ax, ...)
    [az, el] = view
    ```

    ä½œç”¨

    è®¾ç½®ä¸‰ç»´å›¾å½¢çš„è§‚å¯Ÿè§†è§’ï¼ˆç›¸æœºä½ç½®ï¼‰ã€‚

    è§†è§’å‚æ•°è§£é‡Š

    * azï¼šæ–¹ä½è§’ï¼Œç»•zè½´æ—‹è½¬çš„è§’åº¦ï¼ˆåº¦ï¼‰

        * 0Â° = ä»è´Ÿyè½´æ–¹å‘çœ‹

        * 90Â° = ä»æ­£xè½´æ–¹å‘çœ‹

    * elï¼šé«˜ç¨‹è§’ï¼Œç›¸å¯¹äºxyå¹³é¢çš„ä»°è§’ï¼ˆåº¦ï¼‰

        * 0Â° = åœ¨xyå¹³é¢

        * 90Â° = æ­£ä¸Šæ–¹å‚ç›´çœ‹

    ç”¨æ³•ç¤ºä¾‹

    ```matlab
    % åˆ›å»ºæµ‹è¯•æ›²é¢
    [x,y,z] = peaks(30);

    figure

    % 1. æ ‡å‡†ä¸‰ç»´è§†å›¾
    subplot(2,3,1)
    surf(x,y,z)
    view(3)  % é»˜è®¤ä¸‰ç»´è§†å›¾ az=-37.5, el=30
    title('view(3) é»˜è®¤ä¸‰ç»´')

    % 2. äºŒç»´è§†å›¾
    subplot(2,3,2)
    surf(x,y,z)
    view(2)  % äºŒç»´ä¿¯è§†å›¾
    title('view(2) ä¿¯è§†')

    % 3. æŒ‡å®šè§’åº¦
    subplot(2,3,3)
    surf(x,y,z)
    view(45, 60)  % az=45Â°, el=60Â°
    title('view(45,60)')

    % 4. ä½¿ç”¨å‘é‡
    subplot(2,3,4)
    surf(x,y,z)
    view([-10, -20, 5])  % [x, y, z] æ–¹å‘å‘é‡
    title('view([-10,-20,5])')

    % 5. ä¸åŒè§†è§’æ¯”è¾ƒ
    subplot(2,3,5)
    surf(x,y,z)
    view(0, 90)  % æ­£ä¸Šæ–¹
    title('æ­£ä¸Šæ–¹ view(0,90)')

    subplot(2,3,6)
    surf(x,y,z)
    view(0, 0)  % ä¾§é¢
    title('ä¾§é¢ view(0,0)')
    ```

    è§†è§’é¢„è®¾

    ```matlab
    figure
    surf(peaks)

    % å¸¸ç”¨é¢„è®¾è§†è§’
    view_angles = {
        'é»˜è®¤3D', [-37.5, 30];
        'æ­£ä¸Šæ–¹', [0, 90];
        'æ­£å‰æ–¹', [0, 0];
        'å·¦å‰æ–¹', [-45, 30];
        'å³å‰æ–¹', [45, 30];
        'åº•éƒ¨', [-37.5, -90]
    };

    for i = 1:6
        subplot(2,3,i)
        surf(peaks)
        view(view_angles{i,2})
        title(view_angles{i,1})
    end
    ```

    é«˜çº§ç”¨æ³•ä¸åŠ¨ç”»

    ```matlab
    % 1. æ—‹è½¬åŠ¨ç”»
    figure
    surf(peaks)
    colormap(jet)
    shading interp

    for az = 0:2:360
        view(az, 30)
        pause(0.01)
    end

    % 2. è·å–å½“å‰è§†è§’
    [az, el] = view;
    fprintf('å½“å‰è§†è§’: az=%.1fÂ°, el=%.1fÂ°\n', az, el)

    % 3. äº¤äº’å¼è§†è§’è®¾ç½®
    figure
    surf(peaks)
    rotate3d on  % å¯ç”¨äº¤äº’æ—‹è½¬

    % 4. è§†è§’ä¸å…‰ç…§é…åˆ
    figure
    surf(peaks)
    camlight  % åˆ›å»ºç›¸æœºç¯
    view(45, 30)  % è®¾ç½®è§†è§’
    lighting gouraud

    % 5. å¤šå­å›¾ç»Ÿä¸€è§†è§’
    figure
    for i = 1:4
        subplot(2,2,i)
        surf(peaks + i)
        view(30, 45)  % ç»Ÿä¸€è§†è§’
        title(sprintf('æ›²é¢ %d', i))
    end
    ```

* ç®€è¿° matlab inputParser çš„ç”¨æ³•

    inputParser æ˜¯ MATLAB ä¸­ç”¨äºè§£æå’ŒéªŒè¯å‡½æ•°è¾“å…¥å‚æ•°çš„å¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¯å˜æ•°é‡å‚æ•°ã€å‚æ•°-å€¼å¯¹ï¼ˆåç§°-å€¼å¯¹ï¼‰ç­‰å¤æ‚è¾“å…¥æƒ…å†µã€‚

    åŸºæœ¬ä½¿ç”¨æ­¥éª¤

    1. åˆ›å»º inputParser å¯¹è±¡

        ```matlab
        p = inputParser;
        ```

    2. è®¾ç½®å‚æ•°å±æ€§

        ```matlab
        p.FunctionName = 'myFunction';  % å¯é€‰ï¼Œç”¨äºé”™è¯¯ä¿¡æ¯
        p.KeepUnmatched = true;         % æ˜¯å¦å…è®¸æœªå®šä¹‰çš„å‚æ•°
        p.PartialMatching = false;      % æ˜¯å¦å…è®¸å‚æ•°åéƒ¨åˆ†åŒ¹é…
        ```

    3. æ·»åŠ å‚æ•°

        æœ‰ä¸‰ç§ç±»å‹çš„å‚æ•°ï¼š

        å¿…éœ€å‚æ•°

        ```matlab
        addRequired(p, 'paramName', validationFunc);
        ```

        * å¿…é¡»æä¾›ï¼ŒæŒ‰ä½ç½®ä¼ é€’

        * éªŒè¯å‡½æ•°ç¤ºä¾‹ï¼š@isnumeric, @ischar, è‡ªå®šä¹‰å‡½æ•°

        å¯é€‰å‚æ•°

        ```matlab
        addOptional(p, 'paramName', defaultValue, validationFunc);
        ```

        * å¯ä»¥ä¸æä¾›ï¼Œä½¿ç”¨é»˜è®¤å€¼

        * å¿…é¡»ä½äºå¿…éœ€å‚æ•°ä¹‹å

        å‚æ•°-å€¼å¯¹

        ```matlab
        addParameter(p, 'paramName', defaultValue, validationFunc);
        ```

        * ä½¿ç”¨åç§°-å€¼å¯¹å½¢å¼ï¼š'Name', value

        * å¯ä»¥ä»»æ„é¡ºåº

    4. è§£æå‚æ•°

        ```matlab
        parse(p, varargin{:});
        ```

    5. è·å–è§£æç»“æœ

        ```matlab
        results = p.Results;
        paramValue = p.Results.paramName;
        ```

    å®Œæ•´ç¤ºä¾‹

    ```matlab
    function result = myFunction(a, b, varargin)
        % åˆ›å»ºè§£æå™¨
        p = inputParser;
        
        % æ·»åŠ å¿…éœ€å‚æ•°
        addRequired(p, 'a', @isnumeric);
        addRequired(p, 'b', @(x) x > 0);  % b å¿…é¡»ä¸ºæ­£æ•°
        
        % æ·»åŠ å¯é€‰å‚æ•°
        addOptional(p, 'c', 10, @isnumeric);  % é»˜è®¤å€¼ 10
        
        % æ·»åŠ å‚æ•°-å€¼å¯¹
        addParameter(p, 'Scale', 1.0, @isnumeric);
        addParameter(p, 'Method', 'linear', ...
            @(x) any(validatestring(x, {'linear', 'nearest', 'spline'})));
        addParameter(p, 'Display', false, @islogical);
        
        % è§£æè¾“å…¥
        parse(p, a, b, varargin{:});
        
        % ä½¿ç”¨è§£æç»“æœ
        params = p.Results;
        disp(params);
        
        % è®¿é—®å…·ä½“å‚æ•°
        result = params.a * params.b * params.c * params.Scale;
        
        if params.Display
            fprintf('Result: %f\n', result);
        end
    end
    ```

    ä½¿ç”¨ç¤ºä¾‹

    ```matlab
    % è°ƒç”¨å‡½æ•°
    myFunction(5, 2)  % ä½¿ç”¨é»˜è®¤å€¼
    myFunction(5, 2, 3)  % æŒ‡å®šå¯é€‰å‚æ•° c=3
    myFunction(5, 2, 'Scale', 2.0, 'Method', 'spline', 'Display', true)
    ```

    å¤„ç†æœªåŒ¹é…å‚æ•°

    ```matlab
    p.KeepUnmatched = true;
    parse(p, varargin{:});

    % è·å–æœªåŒ¹é…çš„å‚æ•°
    unmatchedParams = p.Unmatched;
    % unmatchedParams æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«æœªå®šä¹‰çš„å‚æ•°åå€¼å¯¹
    ```

    éªŒè¯å‡½æ•°ç¤ºä¾‹

    ```matlab
    % å†…ç½®éªŒè¯å‡½æ•°
    @isnumeric      % å¿…é¡»æ˜¯æ•°å€¼
    @ischar         % å¿…é¡»æ˜¯å­—ç¬¦
    @islogical      % å¿…é¡»æ˜¯é€»è¾‘å€¼
    @isvector       % å¿…é¡»æ˜¯å‘é‡
    @(x) x > 0      % å¿…é¡»å¤§äº0
    @(x) ismember(x, {'opt1', 'opt2'})  % å¿…é¡»åœ¨é›†åˆä¸­

    % è‡ªå®šä¹‰éªŒè¯å‡½æ•°
    validateFcn = @(x) validateattributes(x, {'numeric'}, ...
        {'scalar', 'positive', 'integer'});
    ```

    ä¼˜ç‚¹

    * å‚æ•°ç®¡ç†ï¼šæ¸…æ™°åœ°åŒºåˆ†å¿…éœ€ã€å¯é€‰å’Œåç§°-å€¼å‚æ•°

    * éªŒè¯ï¼šè‡ªåŠ¨éªŒè¯è¾“å…¥ç±»å‹å’ŒèŒƒå›´

    * é»˜è®¤å€¼ï¼šä¸ºå¯é€‰å‚æ•°æä¾›é»˜è®¤å€¼

    * é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€çš„é”™è¯¯ä¿¡æ¯

    * çµæ´»æ€§ï¼šæ”¯æŒå¤šç§å‚æ•°ä¼ é€’æ–¹å¼

    æ›¿ä»£æ–¹æ¡ˆ

    * å¯¹äºç®€å•å‡½æ•°ï¼šç›´æ¥ä½¿ç”¨ nargin, varargin

    * MATLAB R2019b+ï¼šè€ƒè™‘ä½¿ç”¨å‚æ•°å—ï¼ˆArguments Blockï¼‰

        ```matlab
        function result = myFunction(a, b, options)
            arguments
                a double
                b (1,1) double {mustBePositive}
                options.Scale (1,1) double = 1.0
                options.Method string {mustBeMember(options.Method, ["linear","nearest"])} = "linear"
            end
            % å‡½æ•°ä½“
        end
        ```

    inputParser ç‰¹åˆ«é€‚åˆéœ€è¦å‘åå…¼å®¹æ—§ç‰ˆæœ¬ MATLAB çš„ä»£ç ï¼Œæˆ–è€…éœ€è¦ç²¾ç»†æ§åˆ¶å‚æ•°è§£æé€»è¾‘çš„æƒ…å†µã€‚

    inputParser æ˜¯ä¸€ä¸ªç±»ï¼ˆclassï¼‰ï¼Œé€šè¿‡åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰æ¥ä½¿ç”¨ã€‚

* ç®€è¿° matlab strcmpi() çš„åŸå‹ã€ä½œç”¨ä¸ç”¨æ³•

    strcmpi() æ˜¯ MATLAB ä¸­ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ çš„å‡½æ•°ã€‚

    åŸå‹

    ```matlab
    TF = strcmpi(str1, str2)
    ```

    å‚æ•°è¯´æ˜

    | å‚æ•° | è¯´æ˜ |
    | - | - |
    | str1, str2 | è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€å­—ç¬¦å‘é‡ã€å­—ç¬¦å‘é‡å…ƒèƒæ•°ç»„æˆ–å­—ç¬¦ä¸²æ•°ç»„ |
    | TF | é€»è¾‘æ•°ç»„ï¼Œæ¯”è¾ƒç»“æœä¸ºçœŸæ—¶å¯¹åº”å…ƒç´ ä¸º trueï¼Œå¦åˆ™ä¸º false |

    ä½œç”¨

    * ä¸åŒºåˆ†å¤§å°å†™æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å®Œå…¨ç›¸åŒ

    * æ¯”è¾ƒæ—¶å¿½ç•¥å¤§å°å†™å·®å¼‚ï¼š'Hello'ã€'HELLO'ã€'hello' è¢«è§†ä¸ºç›¸åŒ

    * è¿”å›é€»è¾‘å€¼ï¼ˆçœŸ/å‡ï¼‰æŒ‡ç¤ºæ˜¯å¦åŒ¹é…

    åŸºæœ¬ç”¨æ³•

    1. æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²

        ```matlab
        strcmpi('Hello', 'HELLO')    % è¿”å› true
        strcmpi('MATLAB', 'matlab')  % è¿”å› true
        strcmpi('text', 'test')      % è¿”å› false
        ```

    2. æ¯”è¾ƒå­—ç¬¦ä¸²ä¸å­—ç¬¦å‘é‡å…ƒèƒæ•°ç»„

        ```matlab
        % å•ä¸ªå­—ç¬¦ä¸²ä¸å…ƒèƒæ•°ç»„æ¯”è¾ƒ
        C = {'apple', 'Banana', 'ORANGE', 'Grape'};
        TF = strcmpi('banana', C)  % è¿”å› [false, true, false, false]

        % æŸ¥æ‰¾åŒ¹é…é¡¹
        idx = find(strcmpi('orange', C))  % è¿”å› 3
        ```

    3. æ¯”è¾ƒä¸¤ä¸ªå…ƒèƒæ•°ç»„

        ```matlab
        C1 = {'John', 'Mary', 'Peter'};
        C2 = {'JOHN', 'mary', 'PAUL'};
        TF = strcmpi(C1, C2)  % è¿”å› [true, true, false]
        ```

    4. æ¯”è¾ƒå­—ç¬¦ä¸²æ•°ç»„ï¼ˆR2016b+ï¼‰

        ```matlab
        % å­—ç¬¦ä¸²æ•°ç»„
        str1 = ["Apple", "Banana", "Cherry"];
        str2 = ["APPLE", "BANANA", "Date"];
        TF = strcmpi(str1, str2)  % è¿”å› [true, true, false]
        ```

    é«˜çº§ç”¨æ³•

    1. æŸ¥æ‰¾åˆ—è¡¨ä¸­çš„ç‰¹å®šå­—ç¬¦ä¸²

        ```matlab
        files = {'readme.txt', 'README.TXT', 'data.csv', 'DATA.CSV'};
        isReadme = strcmpi('readme.txt', files);  % ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾
        ```

    2. éªŒè¯ç”¨æˆ·è¾“å…¥

        ```matlab
        userInput = 'YES';
        validOptions = {'yes', 'no', 'maybe'};
        if any(strcmpi(userInput, validOptions))
            disp('Valid input');
        else
            disp('Invalid input');
        end
        ```

    3. å¤„ç†æ··åˆå¤§å°å†™æ•°æ®

        ```matlab
        data = {'ProductA', 'PRODUCTB', 'productC', 'ProductD'};
        productA_indices = strcmpi('producta', data);  % æ‰¾åˆ°æ‰€æœ‰å˜ä½“
        ```

    ä¸ç›¸å…³å‡½æ•°çš„æ¯”è¾ƒ

    | å‡½æ•° | åŒºåˆ†å¤§å°å†™ | åŠŸèƒ½ | è¿”å›ç±»å‹ |
    | - | - | - | - |
    | strcmpi() | å¦ | å­—ç¬¦ä¸²ç›¸ç­‰æ¯”è¾ƒ | é€»è¾‘å€¼ |
    | strcmp() | æ˜¯ | å­—ç¬¦ä¸²ç›¸ç­‰æ¯”è¾ƒ | é€»è¾‘å€¼ |
    | strncmpi() | å¦ | æ¯”è¾ƒå‰ N ä¸ªå­—ç¬¦ | é€»è¾‘å€¼ |
    | strncmp() | æ˜¯ | æ¯”è¾ƒå‰ N ä¸ªå­—ç¬¦ | é€»è¾‘å€¼ |
    | contains() | å¯é€‰ | æ£€æŸ¥æ˜¯å¦åŒ…å«å­ä¸² | é€»è¾‘å€¼ |
    | strfind() | æ˜¯ | æŸ¥æ‰¾å­ä¸²ä½ç½® | ä½ç½®ç´¢å¼• |

    ```matlab
    % æ¯”è¾ƒç¤ºä¾‹
    strcmp('Hello', 'HELLO')   % falseï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
    strcmpi('Hello', 'HELLO')  % trueï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰

    strncmp('Hello', 'HELLOworld', 5)   % false
    strncmpi('Hello', 'HELLOworld', 5)  % true
    ```

    å®é™…åº”ç”¨ç¤ºä¾‹

    ç¤ºä¾‹ 1ï¼šå¤„ç†æ–‡ä»¶ç±»å‹

    ```matlab
    files = {'image.JPG', 'document.PDF', 'photo.jpg', 'data.TXT'};

    % æŸ¥æ‰¾æ‰€æœ‰ JPG æ–‡ä»¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
    isJpg = strcmpi('.jpg', cellfun(@(x) x(end-3:end), files, 'UniformOutput', false));
    % æˆ–è€…æ›´ç®€å•çš„æ–¹å¼
    isJpg = endsWith(files, '.jpg', 'IgnoreCase', true);  % R2016b+
    ```

    ç¤ºä¾‹ 2ï¼šå‘½ä»¤è§£æå™¨

    ```matlab
    function processCommand(cmd)
        switch lower(cmd)  % è½¬æ¢ä¸ºå°å†™å†æ¯”è¾ƒ
            case 'start'
                disp('Starting...');
            case 'stop'
                disp('Stopping...');
            case 'pause'
                disp('Pausing...');
            otherwise
                % æˆ–è€…ä½¿ç”¨ strcmpi
                if strcmpi(cmd, 'help')
                    disp('Help information');
                else
                    disp('Unknown command');
                end
        end
    end
    ```

    ç¤ºä¾‹ 3ï¼šæ•°æ®åº“æŸ¥è¯¢å¤„ç†

    ```matlab
    names = {'John Smith', 'jane doe', 'JOHN SMITH', 'Bob Johnson'};
    query = 'john smith';

    % ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹
    matches = strcmpi(query, names);
    matchedNames = names(matches);  % è¿”å› {'John Smith', 'JOHN SMITH'}
    ```

    æ³¨æ„äº‹é¡¹

    * è¾“å…¥ç±»å‹å¿…é¡»å…¼å®¹ï¼šä¸¤ä¸ªè¾“å…¥å¿…é¡»æ˜¯ç›¸åŒç±»å‹ï¼ˆéƒ½æ˜¯å­—ç¬¦ä¸²ã€éƒ½æ˜¯å­—ç¬¦å‘é‡ã€éƒ½æ˜¯å…ƒèƒæ•°ç»„ç­‰ï¼‰

    * å…ƒèƒæ•°ç»„å¤§å°éœ€åŒ¹é…ï¼šå½“æ¯”è¾ƒä¸¤ä¸ªå…ƒèƒæ•°ç»„æ—¶ï¼Œå®ƒä»¬å¿…é¡»å…·æœ‰ç›¸åŒçš„å¤§å°

    * ç©ºå€¼å¤„ç†ï¼š

        ```matlab
        strcmpi('', '')        % true
        strcmpi('text', '')    % false
        strcmpi([], [])        % é”™è¯¯ï¼Œä¸æ”¯æŒç©ºçŸ©é˜µ
        ```

    * æ€§èƒ½è€ƒè™‘ï¼šå¯¹äºå¤§å‹å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œstrcmpi é€šå¸¸æ¯”å…ˆè½¬æ¢ä¸ºå°å†™å†æ¯”è¾ƒæ›´é«˜æ•ˆ

        ```matlab
        % ä¸æ¨èï¼ˆä½æ•ˆï¼‰ï¼š
        TF = strcmp(lower(str1), lower(str2));

        % æ¨èï¼ˆé«˜æ•ˆï¼‰ï¼š
        TF = strcmpi(str1, str2);
        ```

    strcmpi() åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥ã€æ–‡ä»¶æ“ä½œã€æ•°æ®åŒ¹é…ç­‰éœ€è¦å¿½ç•¥å¤§å°å†™çš„åœºæ™¯ä¸­éå¸¸å®ç”¨ã€‚
