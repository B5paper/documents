* 尝试在跑通 openshmem hello world 的环境下继续跑下面的程序，没跑通

    ```c
    #include <shmem.h>
    #include <stdio.h>
    #include <stdlib.h>

    int main(void) {
        static long lock = 0;
        shmem_init();
        int mype = shmem_my_pe();
        int npes = shmem_n_pes();
        int my_nelem = mype + 1; /* linearly increasing number of elements with PE */
        int total_nelem = (npes * (npes + 1)) / 2;
        int *source = (int *)shmem_malloc(npes * sizeof(int)); /* symmetric alloc */
        int *dest = (int *)shmem_malloc(total_nelem * sizeof(int));
        for (int i = 0; i < my_nelem; i++)
            source[i] = (mype * (mype + 1)) / 2 + i;
        for (int i = 0; i < total_nelem; i++)
            dest[i] = -9999;
        /* Wait for all PEs to initialize source/dest: */
        shmem_team_sync(SHMEM_TEAM_WORLD);
        shmem_int_collect(SHMEM_TEAM_WORLD, dest, source, my_nelem);
        shmem_set_lock(&lock); /* Lock prevents interleaving printfs */
        printf("%d: %d", mype, dest[0]);
        for (int i = 1; i < total_nelem; i++)
            printf(", %d", dest[i]);
        printf("\n");
        shmem_clear_lock(&lock);
        shmem_finalize();
        return 0;
    }
    ```

    报错：

    ```
    [ubuntu2404][[14096,1],0][shmem_team.c:47:pshmem_team_sync] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],0][shmem_collect.c:171:pshmem_int_collect] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],1][shmem_team.c:47:pshmem_team_sync] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],1][shmem_collect.c:171:pshmem_int_collect] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],3][shmem_team.c:47:pshmem_team_sync] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],3][shmem_collect.c:171:pshmem_int_collect] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],2][shmem_team.c:47:pshmem_team_sync] Internal error is appeared rc = -7
    [ubuntu2404][[14096,1],2][shmem_collect.c:171:pshmem_int_collect] Internal error is appeared rc = -7
    0: -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999
    2: -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999
    3: -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999
    1: -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999, -9999
    ```

    不清楚原因。

* openmpi 5.0 项目中的 example 可以跑通：

    ```
    root@3eacd89b1206:~/openmpi-5.0.5/examples# oshrun --allow-run-as-root -np 4 ./ring_oshmem
    --------------------------------------------------------------------------
    PMIx was unable to find a usable compression library
    on the system. We will therefore be unable to compress
    large data streams. This may result in longer-than-normal
    startup times and larger memory footprints. We will
    continue, but strongly recommend installing zlib or
    a comparable compression library for better user experience.

    You can suppress this warning by adding "pcompress_base_silence_warning=1"
    to your PMIx MCA default parameter file, or by adding
    "PMIX_MCA_pcompress_base_silence_warning=1" to your environment.
    --------------------------------------------------------------------------
    Process 0 puts message 10 to 1 (4 processes in ring)
    Process 0 decremented value: 9
    Process 0 decremented value: 8
    Process 0 decremented value: 7
    Process 0 decremented value: 6
    Process 0 decremented value: 5
    Process 0 decremented value: 4
    Process 0 decremented value: 3
    Process 0 decremented value: 2
    Process 0 decremented value: 1
    Process 0 decremented value: 0
    Process 0 exiting
    Process 1 exiting
    Process 3 exiting
    Process 2 exiting
    ```

    看来 openshmem 的 API 变动也比较大。有时间了看下文档详细研究下。

    openmpi 里自带的 openshmem 可以看 openmpi 的 doc。

* 最新版的 ucx 自带了测速工具

    ```
    (base) hlc@ubuntu2404:~/Documents/Projects/ucx/build/bin$ ls
    io_demo  ucx_info  ucx_perftest  ucx_perftest_daemon  ucx_read_profile
    ```

    试了下，`ucx_perftest`主要能测 lo, tcp, posix, sysv 这几种，有的还跑不通。能跑通的测试结果都不稳定，有时候测出来 200，有时候测出来 900，根本没法作为参考。

    目前能跑通的命令：

    server 端：`/ucx_perftest -t put_bw -d memory -x posix`

    client 端：`./ucx_perftest 127.0.0.1 -t put_bw -d memory -x posix`

* `openshmem-examples` repo <https://github.com/openshmem-org/openshmem-examples.git> 中的代码目前测试的都能跑通。可以以这个为参考。

* 看起来`shmemcc`和`shmemrun`趋向于淘汰了，可以使用`oshcc`，`oshrun`取代。

