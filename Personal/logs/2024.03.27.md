* virtual box 使用 efi 启动的 iso 光盘

    virtual box 7.0.1 目前默认是从 MBR 启动引导，如果需要其他的方式启动引导，需要根据开机提示按键，或者在刚启动虚拟机时就一直按 del 键，进入 bios 和启动引导界面。

* qemu tutorial

    * `qemu-img create -f qcow2 myVirtualDisk.qcow2 20G`

        创建磁盘镜像。

        output:

        ```
        Formatting 'myVirtualDisk.qcow2', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib size=21474836480 lazy_refcounts=off refcount_bits=16
        ```

        check file format:

        `file myVirtualDisk.qcow2`

        output:

        ```
        myVirtualDisk.qcow2: QEMU QCOW2 Image (v3), 21474836480 bytes
        ```

    * start virtual machine

        ```bash
        qemu-system-x86_64 \
        -enable-kvm                                                    \
        -m 4G                                                          \
        -smp 2                                                         \
        -hda myVirtualDisk.qcow2                                       \
        -boot d                                                        \
        -cdrom linuxmint-21.1-cinnamon-64bit.iso                       \
        -netdev user,id=net0,net=192.168.0.0/24,dhcpstart=192.168.0.9  \
        -device virtio-net-pci,netdev=net0                             \
        -vga qxl                                                       \
        -device AC97
        ```

        parameter explanation:

        * `-enable-kvm` → KVM to boost performance
        * `-m 4G` → 4GB RAM
        * `-smp 2` → 2 CPUs
        * `-hda myVirtualDisk.qcow2` → our 20GB variable-size disk
        * `-boot d` → boots the first virtual CD drive
        * `-cdrom linuxmint-21.1-cinnamon-64bit.iso` → Linux Mint ISO
        * `-netdev user,id=net0,net=192.168.0.0/24,dhcpstart=192.168.0.9` → NAT with DHCP
        * `-device virtio-net-pci,netdev=net0` → network card
        * `-vga qxl` → powerful graphics card
        * `-device AC97` → sound card

* linux 系统可以通过配置控制 udev 设备加入时的权限属性

    qemu 可能会遇到权限问题无法访问 usb 设备，但通过配置权限后，qemu 就有了权限。

    为虚拟机加入 usb 设备的代码：

    ```bash
    -device usb-ehci,id=ehci \
    -usb \
    -device usb-host,bus=ehci.0,vendorid=0x0930,productid=0x6545
    ```

    查看 host 上的 usb：`lsusb`，`lsusb -v`
