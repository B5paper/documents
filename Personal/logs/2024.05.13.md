* c++ 中不可以使用一个 vector 去初始化一个 queue

    也不可以使用 vector 的迭代器 begin(), end() 去初始化一个 queue

    queue 没有 assign() 功能，也没有 resize() 功能。

    queue 不支持初始化列表。

* `vmalloc()`可以将不连续的物理地址通过链表的形式映射成连续的虚拟内存地址。

    头文件：`#include <linux/vmalloc.h>`

    ```c
    void *vaddr = vmalloc(1024);
    vfree(vaddr);
    ```

* 页表用于将虚拟地址映射到物理地址

    首先将物理地址按照 4 KB 进行分区，然后对每个小区间进行编号。

    目前的 linux 指针是 8 个字节，即 64 位。但是虚拟地址并不需要 64 位，只用到了其中的 48 位。

    其中 4 KB = 4 * 1024 Bytes = 2^2 * 2^10 Bytes = 2^12 Bytes，为了索引到每个字节，至少需要 12 位。

    因此虚拟地址就分为两部分，一部分是前半段`48 - 12 = 36`位用于定位页表的 entry，一部分是后半段`12`位偏移，用于在 4KB 的 entry 中定位到具体的字节。

    在 linux 中可以用命令`getconf PAGESIZE`查看页表每个 entry 的字节数。

    ref:

    1. <https://blog.csdn.net/m0_51717456/article/details/124256870>

    2. <https://www.cnblogs.com/chaozhu/p/10191575.html>

    3. <https://www.oreilly.com/library/view/linux-device-drivers/0596000081/ch07s04.html>

    4. <https://medium.com/@aravindchetla/kmalloc-v-s-vmalloc-13cb60746bcc>

    5. <https://www.kernel.org/doc/html/v5.0/core-api/mm-api.html#c.vmalloc>

    6. <https://www.kernel.org/doc/html/v5.0/core-api/memory-allocation.html>

* 在 c 语言中计算浮点数级的 duration

    ```c
    #include <time.h>
    #include <stdio.h>

    void spend_time()
    {
        int a = 1, b = 2, c;
        for (int i = 0; i < 1000; ++i)
        {
            for (int j = 0; j < 1000; ++j)
            {
                for (int k = 0; k < 100; ++k)
                {
                    c = a + b;
                }
            }
        }
    }

    int main()
    {
        timespec tmspec_1, tmspec_2;
        timespec_get(&tmspec_1, TIME_UTC);
        spend_time();
        timespec_get(&tmspec_2, TIME_UTC);
        time_t secs = tmspec_2.tv_sec - tmspec_1.tv_sec;
        long nano_secs = tmspec_2.tv_nsec - tmspec_1.tv_nsec;
        printf("duration: %ld secs + %ld nano secs\n", secs, nano_secs);
        float fsecs = (float) secs + ((float) nano_secs / 1000 / 1000 / 1000);
        printf("duration: %f secs\n", fsecs);
        return 0;
    }
    ```

    主要是这个`timespec_get()`函数的使用。注意不要忘了`TIME_UTC`，否则得到的结果不正确。

    ref: <https://en.cppreference.com/w/c/chrono/timespec_get>