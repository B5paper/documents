* ssh 与伪终端

    `ssh user@addr`登陆后，会自动分配一个伪终端，进入交互式环境。`ssh user@addr command`则默认不会分配伪终端，因此不会进入交互式环境。但是有些命令需要伪终端的支持才能运行，比如`sudo`，此时我们可以使用`-t`强制分配伪终端：`ssh -t user@addr command`。

    example:

    ```
    (base) hlc@hlc-VirtualBox:~$ ssh hlc@10.133.1.54 "sudo ls"
    hlc@10.133.1.54's password: 
    sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper
    sudo: a password is required
    ```

    使用`-t`，则需要再输入一遍密码：

    ```
    (base) hlc@hlc-VirtualBox:~$ ssh -t hlc@10.133.1.54 "sudo ls"
    hlc@10.133.1.54's password: 
    [sudo] password for hlc: 
    add_proxy.sh  Documents   mpi_shared  perf_0924.tar.gz	Public	Softwares  work
    Data	      Downloads   Music       perftest		rdma	Templates
    Desktop       miniconda3  nfs_shared  Pictures		snap	Videos
    Connection to 10.133.1.54 closed.
    ```

    如果使用 public key 登陆，而非密码登陆，那么非交互环境可以使用`sudo`。

    所以说，sudo 无法运行，其实是因为输入 sudo 密码默认需要在交互环境里。如果 sudo 无需输入密码，或者经过配置，允许在非交互环境输入 sudo 密码，那么就不需要交互环境。