* `std::format`

    std::format æ˜¯ C++20 å¼•å…¥çš„æ–‡æœ¬æ ¼å¼åŒ–åº“ï¼Œæä¾›ç±»å‹å®‰å…¨ã€é«˜æ€§èƒ½çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–åŠŸèƒ½ï¼Œç±»ä¼¼äº Python çš„ format()ã€‚

    åŸºæœ¬ç”¨æ³•
    
    ```cpp
    #include <format>
    #include <iostream>

    int main() {
        // 1. åŸºæœ¬æ ¼å¼åŒ–
        std::string s1 = std::format("Hello, {}!", "World");  // "Hello, World!"
        
        // 2. ä½ç½®å‚æ•°
        std::string s2 = std::format("{1} {0}!", "World", "Hello");  // "Hello World!"
        
        // 3. å¸¦ç±»å‹çš„æ ¼å¼åŒ–
        int x = 42;
        double pi = 3.14159;
        std::string s3 = std::format("int: {}, double: {}", x, pi);
        
        std::cout << s1 << "\n" << s2 << "\n" << s3 << std::endl;
    }
    ```

    æ³¨ï¼š

    1. sprintf è¦æ±‚æå‰ç”³è¯·å¥½ dst bufferï¼Œè¿˜éœ€è¦è‡ªå·±æ‰‹åŠ¨è®¡ç®—ï¼Œéå¸¸éº»çƒ¦
    
        æ¯”å¦‚`str = "my name: %s, my age: %d, my height: %f\n"`ï¼Œéœ€è¦çŸ¥é“`str`ä¸­é™¤äº†`%`å˜é‡ä¹‹å¤–çš„å­—ç¬¦ä¸ªæ•°ï¼Œéœ€è¦çŸ¥é“`%s`ä»£è¡¨çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œéœ€è¦çŸ¥é“`%d`å¯¹åº”çš„å˜é‡åœ¨å­—ç¬¦ä¸²åŒ–åå…·ä½“å å‡ ä¸ªå­—ç¬¦ï¼Œéœ€è¦çŸ¥é“`%f`å°æ•°ç‚¹åä¿ç•™ 8 ä½è¿˜æ˜¯ 6 ä½ã€‚å¾—åˆ°æ‰€æœ‰ä¿¡æ¯åï¼Œå†ç›¸åŠ å¾—åˆ° dst buffer çš„é•¿åº¦ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰ unicode ï¼Œé‚£ä¹ˆæ›´åŠ å¤æ‚ã€‚

        å¦‚æœæˆ‘ä»¬ç›´æ¥é™æ€ç”³è¯·ä¸€å—å¤§ bufferï¼Œé‚£ä¹ˆåˆä¼šèµ„æºæµªè´¹ã€‚

        ä½¿ç”¨ c++ çš„`str << "my name: " << name << ", my age: " << ...`ä¹Ÿå¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯å­—ç¬¦ä¸²ä¹‹é—´æ˜¯æ–­å¼€çš„ï¼Œä¸ç›´è§‚ã€‚

        è¿™æ—¶å€™`format()`å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼Œå®ƒå¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚

    **æ ¼å¼è¯´æ˜ç¬¦**

    * æ•°å€¼ç±»å‹

        ```cpp
        int n = 42;
        double d = 3.14159;

        // å®½åº¦å’Œå¡«å……
        std::format("{:10}", n);      // "        42" (é»˜è®¤å³å¯¹é½)
        std::format("{:<10}", n);     // "42        " (å·¦å¯¹é½)
        std::format("{:^10}", n);     // "    42    " (å±…ä¸­å¯¹é½)
        std::format("{:*>10}", n);    // "********42" (å³å¯¹é½ï¼Œ*å¡«å……)

        // è¿›åˆ¶
        std::format("{:b}", n);       // "101010" (äºŒè¿›åˆ¶)
        std::format("{:x}", n);       // "2a" (åå…­è¿›åˆ¶å°å†™)
        std::format("{:X}", n);       // "2A" (åå…­è¿›åˆ¶å¤§å†™)
        std::format("{:o}", n);       // "52" (å…«è¿›åˆ¶)

        // æµ®ç‚¹æ•°
        std::format("{:.2f}", d);     // "3.14" (ä¿ç•™2ä½å°æ•°)
        std::format("{:e}", d);       // "3.141590e+00" (ç§‘å­¦è®¡æ•°æ³•)
        std::format("{:.2%}", 0.42);  // "42.00%" (ç™¾åˆ†æ¯”)
        ```

    * å­—ç¬¦ä¸²ç±»å‹

        ```cpp
        std::string str = "hello";

        std::format("{:10}", str);    // "hello     " (å³å¯¹é½)
        std::format("{:^10}", str);   // "  hello   " (å±…ä¸­å¯¹é½)
        std::format("{:.3}", str);    // "hel" (æˆªæ–­å‰3ä¸ªå­—ç¬¦)
        ```

    * æ—¶é—´æ ¼å¼åŒ–

        ```cpp
        #include <chrono>
        using namespace std::chrono;

        auto now = system_clock::now();

        // æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²
        std::string time_str = std::format("Today is {:%Y-%m-%d}", now);
        // ä¾‹å¦‚: "Today is 2024-01-15"

        // å®Œæ•´ç¤ºä¾‹
        std::format("{:%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S}", now);
        ```

    * è‡ªå®šä¹‰ç±»å‹æ ¼å¼åŒ–

        ```cpp
        struct Point {
            int x, y;
        };

        // ç‰¹åŒ– formatter
        template <>
        struct std::formatter<Point> {
            constexpr auto parse(std::format_parse_context& ctx) {
                return ctx.begin();
            }
            
            auto format(const Point& p, std::format_context& ctx) const {
                return std::format_to(ctx.out(), "({}, {})", p.x, p.y);
            }
        };

        // ä½¿ç”¨
        Point p{10, 20};
        std::string s = std::format("Point: {}", p);  // "Point: (10, 20)"
        ```

    **é«˜çº§ç‰¹æ€§**

    1. è¾“å‡ºåˆ°è¿­ä»£å™¨

        ```cpp
        #include <vector>
        std::vector<char> buf;
        std::format_to(std::back_inserter(buf), "Value: {}", 42);
        ```

    2. è¾“å‡ºåˆ°å­—ç¬¦ä¸²

        ```cpp
        std::string s;
        std::format_to(std::back_inserter(s), "{} + {} = {}", 2, 3, 5);
        ```

    3. è·å–æ ¼å¼åŒ–åçš„å­—ç¬¦æ•°

        ```cpp
        size_t n = std::formatted_size("{} + {} = {}", 2, 3, 5);  // è¿”å›å­—ç¬¦æ•°
        ```

    **å¯¹æ¯”ä¼ ç»Ÿæ–¹æ³•**

    ```cpp
    // printf (ç±»å‹ä¸å®‰å…¨)
    printf("%d %f", 42, 3.14);

    // stringstream (å†—é•¿)
    std::stringstream ss;
    ss << 42 << " " << 3.14;

    // std::format (æ¨è)
    std::format("{} {}", 42, 3.14);
    ```

    æ³¨æ„äº‹é¡¹

    * éœ€è¦ C++20 æ”¯æŒ

    * é”™è¯¯å¤„ç†ï¼šæ ¼å¼å­—ç¬¦ä¸²é”™è¯¯åœ¨ç¼–è¯‘æ—¶ï¼ˆå¦‚æœå¯èƒ½ï¼‰æˆ–è¿è¡Œæ—¶æ£€æµ‹

    * æ€§èƒ½ï¼šé€šå¸¸æ¯” stringstream å’Œ sprintf æ›´å¿«

    * æœ¬åœ°åŒ–ï¼šé€šè¿‡ std::vformat æ”¯æŒæœ¬åœ°åŒ–

    std::format æä¾›äº†ç±»å‹å®‰å…¨ã€æ˜“è¯»ä¸”é«˜æ•ˆçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹å¼ï¼Œæ˜¯ç°ä»£ C++ ä¸­æ¨èçš„æ ¼å¼åŒ–æ–¹æ³•ã€‚

* fail2ban æ‰‹åŠ¨å¾€ sshd jail é‡Œæ·»åŠ ä¸€ä¸ª ip

    ```bash
    # æ°¸ä¹…ç¦æ­¢ IPï¼ˆç›´åˆ°æ‰‹åŠ¨ç§»é™¤ï¼‰
    sudo fail2ban-client set sshd banip 192.168.1.100

    # ç¦æ­¢å¸¦æ—¶é—´é™åˆ¶ï¼ˆä¾‹å¦‚ 1 å¤©ï¼‰
    sudo fail2ban-client set sshd banip --time 86400 192.168.1.100
    ```

    æŸ¥çœ‹å’Œç®¡ç†å·²ç¦æ­¢çš„ IP:

    ```bash
    # æŸ¥çœ‹ sshd jail çŠ¶æ€
    sudo fail2ban-client status sshd

    # æŸ¥çœ‹å·²ç¦æ­¢çš„ IP åˆ—è¡¨
    sudo fail2ban-client get sshd banned

    # è§£ç¦ IP
    sudo fail2ban-client set sshd unbanip 192.168.1.100
    ```

* Python Type Hint

    Python Type Hintï¼ˆç±»å‹æç¤ºï¼‰æ˜¯åœ¨ Python 3.5+ ä¸­å¼•å…¥çš„é™æ€ç±»å‹æ£€æŸ¥è¾…åŠ©å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…ä¸ºå˜é‡ã€å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç­‰æ ‡æ³¨æœŸæœ›çš„ç±»å‹ï¼Œä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¹¶å€ŸåŠ©å·¥å…·ï¼ˆå¦‚ mypyï¼‰è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ã€‚

    **åŸºæœ¬è¯­æ³•**

    ```python
    # å˜é‡æ³¨è§£
    name: str = "Alice"
    count: int = 10

    # å‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ³¨è§£
    def greet(name: str) -> str:
        return f"Hello, {name}"
    ```

    **å¸¸ç”¨ç±»å‹**

    * åŸºç¡€ç±»å‹ï¼šint, str, float, bool, bytes

    * å¤åˆç±»å‹ï¼š

        * List[int]ï¼šæ•´æ•°åˆ—è¡¨ï¼ˆéœ€ from typing import Listï¼‰

        * Dict[str, int]ï¼šé”®ä¸ºå­—ç¬¦ä¸²ã€å€¼ä¸ºæ•´æ•°çš„å­—å…¸

        * Tuple[int, str]ï¼šå›ºå®šé•¿åº¦çš„å…ƒç»„

        * Optional[int]ï¼šå¯èƒ½ä¸º int æˆ– Noneï¼ˆç­‰ä»·äº Union[int, None]ï¼‰

        * Union[int, str]ï¼šå¯ä»¥æ˜¯ int æˆ– str

        * Anyï¼šä»»æ„ç±»å‹ï¼ˆç¦ç”¨é™æ€ç±»å‹æ£€æŸ¥ï¼‰

    **Python 3.9+ ç®€åŒ–å†™æ³•**

    ä» Python 3.9 å¼€å§‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å†…ç½®ç±»å‹ä»£æ›¿ typing ä¸­çš„æ³›å‹ï¼š

    ```python
    # Python 3.9+
    list[int]          # ä»£æ›¿ List[int]
    dict[str, int]     # ä»£æ›¿ Dict[str, int]
    tuple[int, ...]    # å˜é•¿å…ƒç»„
    ```

    **ç¤ºä¾‹ä»£ç **

    ```python
    from typing import Optional, Union

    def process_data(
        data: list[int],
        prefix: Optional[str] = None
    ) -> dict[str, Union[int, float]]:
        result = {"sum": sum(data)}
        if prefix:
            result["prefix"] = len(prefix)
        return result
    ```

    **é™æ€æ£€æŸ¥å·¥å…·**

    * mypyï¼šæœ€å¸¸ç”¨çš„ç±»å‹æ£€æŸ¥å™¨ã€‚

        ```bash
        pip install mypy
        mypy your_script.py
        ```

    æ³¨æ„

    * è¿è¡Œæ—¶å¯ä»¥é€šè¿‡ __annotations__ å±æ€§è·å–ç±»å‹ä¿¡æ¯ï¼ˆç”¨äºåå°„æˆ–æ–‡æ¡£ç”Ÿæˆï¼‰ã€‚

    **å¾ªç¯ä¸­çš„ç±»å‹æ³¨è§£**

    1. åœ¨å¾ªç¯å†…éƒ¨æ³¨è§£ï¼ˆPython 3.6+ï¼‰

        ```python
        for i in range(123):
            i: int  # åœ¨å¾ªç¯ä½“å†…æ·»åŠ ç±»å‹æ³¨è§£
            # æˆ–è€…ç›´æ¥ä¾èµ– range() çš„ç±»å‹æ¨æ–­
            pass
        ```

    2. ä½¿ç”¨ç±»å‹æ³¨é‡Šï¼ˆType Commentï¼Œè¾ƒæ—§çš„å†™æ³•ï¼ŒPython 3.x å…¼å®¹ï¼‰
    
        ```python
        for i in range(123):  # type: int
            pass
        ```

    3. ä½¿ç”¨ typing.castï¼ˆå½“ç±»å‹ä¸æ˜æ˜¾æ—¶ï¼‰

        ```python
        from typing import cast

        items = [1, 2, 3]  # å‡è®¾è¿™é‡Œ items ç±»å‹ä¸æ˜ç¡®
        for item in items:
            item_int = cast(int, item)  # æ˜ç¡®å‘Šè¯‰ç±»å‹æ£€æŸ¥å™¨è¿™æ˜¯ int
            # ä½†è¿™ä¸æ˜¯è¿è¡Œæ—¶æ£€æŸ¥ï¼Œåªæ˜¯æç¤ºç±»å‹æ£€æŸ¥å™¨
        ```

* git submodule sync

    å¦‚æœ`.gitmodules`ä¸­çš„ repo url è·¯å¾„æ”¹å˜ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨`git submodule sync`å°†æ›´æ”¹åŒæ­¥åˆ°`.git/config`ä¸­ã€‚

    ç”¨æ³•ï¼š

    1. å°†`.gitmodules`ä¸­çš„æ‰€æœ‰é…ç½®åŒæ­¥åˆ°ä¸»ä»“åº“`.git/config`å’Œå­ä»“åº“`sub/.git/config`ä¸­

        `git submodule sync`

    2. åªåŒæ­¥æŒ‡å®š sub

        `git submodule sync -- <submodule-path>`

        example:

        `git submodule sync -- lib/my-library`

        åªä¿®æ”¹ my-library å­ä»“åº“ä¸­çš„`.git/config`

    æ³¨æ„äº‹é¡¹ï¼š

    * å¦‚æœå·²ç»æ‰§è¡Œè¿‡ git submodule update ä¸”æœ¬åœ°æœ‰ submodule çš„ cloneï¼Œä¿®æ­£ URL åå¯èƒ½éœ€è¦åˆ é™¤æœ¬åœ°å­æ¨¡å—ç›®å½•é‡æ–°æ‹‰å–

    * å¦‚æœå­æ¨¡å—æ²¡æœ‰åˆå§‹åŒ–ï¼ˆ--initï¼‰ï¼Œsync å¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºå­æ¨¡å—çš„ .git ç›®å½•è¿˜ä¸å­˜åœ¨æˆ–é…ç½®ä¸å®Œæ•´ã€‚

    git submodule sync çš„ä½œç”¨æ˜¯åŒæ­¥å­æ¨¡å—çš„è¿œç¨‹ URLï¼Œå…·ä½“æ¥è¯´ï¼š

    ä¸»è¦åŠŸèƒ½ï¼š

    * åŒæ­¥ .gitmodules ä¸­çš„ URL åˆ° .git/config

        * å½“ä½ åœ¨ .gitmodules æ–‡ä»¶ä¸­ä¿®æ”¹äº†å­æ¨¡å—çš„ URL åï¼Œgit submodule sync ä¼šå°†è¿™äº›æ›´æ”¹åŒæ­¥åˆ°æœ¬åœ°çš„ .git/config æ–‡ä»¶ä¸­ã€‚

    * æ›´æ–°æœ¬åœ°å­æ¨¡å—çš„è¿œç¨‹ä»“åº“é…ç½®

        * å¯¹äºå·²ç»åˆå§‹åŒ–å¹¶æ‹‰å–è¿‡çš„å­æ¨¡å—ï¼Œå®ƒä¼šæ›´æ–°è¯¥å­æ¨¡å—ç›®å½•å†…çš„ .git/config ä¸­çš„ remote.origin.urlã€‚

    ä½¿ç”¨åœºæ™¯ï¼š

    * ä¿®æ”¹äº† .gitmodules ä¸­çš„ URL åï¼ˆæ¯”å¦‚ä»“åº“è¿ç§»ã€åè®®å˜æ›´ç­‰ï¼‰

    * .git/config ä¸­çš„ URL ä¸ .gitmodules ä¸ä¸€è‡´æ—¶

    * é‡æ–°é…ç½®å­æ¨¡å—çš„è¿œç¨‹ä»“åº“åœ°å€

    å·¥ä½œåŸç†ï¼š

    ```bash
    # å‡è®¾ .gitmodules ä¸­çš„ URL å·²ä» old-url æ”¹ä¸º new-url

    # æ‰§è¡Œå‰ï¼š
    .gitmodules:          submodule.foo.url = new-url
    .git/config:          submodule.foo.url = old-url   # æ—§åœ°å€
    foo/.git/config:      [remote "origin"] url = old-url  # æ—§åœ°å€

    # æ‰§è¡Œåï¼š
    git submodule sync

    .git/config:          submodule.foo.url = new-url   # å·²æ›´æ–°
    foo/.git/config:      [remote "origin"] url = new-url  # å·²æ›´æ–°
    ```

    å¸¸ç”¨å‘½ä»¤ç»„åˆï¼š

    ```bash
    # ä¿®æ”¹ .gitmodules ä¸­çš„ URL å
    vim .gitmodules

    # åŒæ­¥é…ç½®
    git submodule sync

    # æ›´æ–°å­æ¨¡å—å†…å®¹
    git submodule update --init --recursive
    ```

* Beta åˆ†å¸ƒ

    Beta åˆ†å¸ƒç®€ä»‹

    Beta åˆ†å¸ƒæ˜¯å®šä¹‰åœ¨åŒºé—´ $[0, 1]$ ä¸Šçš„è¿ç»­æ¦‚ç‡åˆ†å¸ƒï¼Œç”±ä¸¤ä¸ªæ­£å‚æ•° $\alpha$ (alpha) å’Œ $\beta$ (beta) æ§åˆ¶ã€‚

    1. æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆPDFï¼‰

        $$f(x; \alpha, \beta) = \frac{x^{\alpha - 1} (1 - x)^{\beta - 1}}{B(\alpha, \beta)} , 0 \leq x \leq 1$$

        å…¶ä¸­ $B(\alpha, \beta)$ æ˜¯ Beta å‡½æ•°ï¼š

        $$B(\alpha, \beta) = \int_0^1 t^{\alpha - 1} (1 - t)^{\beta - 1} dt = \frac{\Gamma(\alpha) \Gamma(\beta)}{\Gamma(\alpha + \beta)}$$

        $\Gamma$ æ˜¯ä¼½é©¬å‡½æ•°ã€‚

    2. ç»Ÿè®¡ç‰¹å¾

        å‡å€¼ï¼š

        $$E[X] = \frac{\alpha}{\alpha + \beta}$$

        æ–¹å·®ï¼š

        $$Var(X) = \frac{\alpha \beta}{(\alpha + \beta)^2 (\alpha + \beta + 1)}$$

        ä¼—æ•°ï¼ˆå½“ $\alpha \gt 1$,$\beta \gt 1$ æ—¶ï¼‰ï¼š

        $$Mode = \frac{\alpha - 1}{\alpha + \beta - 2}$$

    3. å½¢çŠ¶å˜åŒ–

        é€šè¿‡æ”¹å˜ $\alpha$ å’Œ $\beta$ å¯ä»¥äº§ç”Ÿå¤šç§å½¢çŠ¶ï¼š

        * $\alpha = \beta = 1$ï¼šå‡åŒ€åˆ†å¸ƒ $U(0,1)$

        * $\alpha \gt 1$, $\beta \gt 1$ï¼šå•å³°ï¼Œåœ¨ (0,1) å†…

        * $\alpha < 1$, $\beta < 1$ï¼šU å½¢ï¼ˆä¸¤ç«¯é«˜ä¸­é—´ä½ï¼‰

        * $\alpha > 1$, $\beta = 1$ï¼šåœ¨ 1 å¤„ä¸º 0ï¼Œåœ¨ 0 å¤„ä¸ºæœ‰é™å€¼ï¼Œå³å

        * $\alpha = 1$, $\beta > 1$ï¼šåœ¨ 0 å¤„ä¸º 0ï¼Œåœ¨ 1 å¤„ä¸ºæœ‰é™å€¼ï¼Œå·¦å

        * $\alpha < 1$, $\beta > 1$ï¼šå J å½¢ï¼ˆé›†ä¸­åœ¨ 0 é™„è¿‘ï¼‰

        * $\alpha > 1$, $\beta < 1$ï¼šJ å½¢ï¼ˆé›†ä¸­åœ¨ 1 é™„è¿‘ï¼‰

    4. ä¸äºŒé¡¹åˆ†å¸ƒçš„å…³ç³»

    å¦‚æœå…ˆéªŒåˆ†å¸ƒæ˜¯ Beta åˆ†å¸ƒï¼Œè§‚æµ‹åˆ°äºŒé¡¹åˆ†å¸ƒæ•°æ®åï¼ŒåéªŒåˆ†å¸ƒä¹Ÿæ˜¯ Beta åˆ†å¸ƒï¼ˆå…±è½­å…ˆéªŒï¼‰ï¼š

    å…ˆéªŒï¼š$Beta(\alpha, \beta)$, æ•°æ®ï¼š$k$æ¬¡æˆåŠŸï¼ˆæ€»è¯•éªŒ $n$ï¼‰

    åéªŒï¼š$Beta(\alpha + k,\beta + n - k)$

    5. åº”ç”¨åœºæ™¯

        * æ¯”ä¾‹æˆ–æ¦‚ç‡çš„å»ºæ¨¡ï¼šä¾‹å¦‚ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ç­‰ï¼ˆå› ä¸ºèŒƒå›´åœ¨ 0~1ï¼‰

        * è´å¶æ–¯ç»Ÿè®¡ï¼šä½œä¸ºäºŒé¡¹åˆ†å¸ƒçš„æˆåŠŸæ¦‚ç‡ p çš„å…ˆéªŒåˆ†å¸ƒ

        * é¡ºåºç»Ÿè®¡é‡ï¼šå‡åŒ€åˆ†å¸ƒæ ·æœ¬çš„ç¬¬ k ä¸ªé¡ºåºç»Ÿè®¡é‡æœä» Beta(k, n-k+1)

        * é¡¹ç›®ç®¡ç†ï¼šPERT ä¸­ç”¨äºä»»åŠ¡å®Œæˆæ—¶é—´çš„å»ºæ¨¡ï¼ˆç»è¿‡ç¼©æ”¾å¹³ç§»ï¼‰

        * æœºå™¨å­¦ä¹ ï¼šä½œä¸ºåˆ†ç±»å™¨è¾“å‡ºçš„æ ¡å‡†åˆ†å¸ƒï¼Œæˆ–å˜åˆ†æ¨æ–­ä¸­çš„å˜åˆ†åˆ†å¸ƒ

    6. ä¸å…¶ä»–åˆ†å¸ƒçš„å…³ç³»

        * Gamma åˆ†å¸ƒï¼šå¦‚æœ $X \sim \mathrm{Gamma}(\alpha, 1)$, $Y \sim \mathrm{Gamma}(\beta, 1)$,åˆ™

            $$\frac{X}{X + Y} \sim \mathrm{Beta}(\alpha, \beta)$$

        * F åˆ†å¸ƒï¼šæœ‰è½¬æ¢å…³ç³»

        * äºŒé¡¹åˆ†å¸ƒ/ä¼¯åŠªåˆ©åˆ†å¸ƒï¼šå…±è½­å…ˆéªŒ

* $\Gamma$ å‡½æ•°ï¼ˆGamma functionï¼‰

    $\Gamma$ å‡½æ•°ï¼ˆGamma functionï¼‰ æ˜¯é˜¶ä¹˜åœ¨å®æ•°å’Œå¤æ•°åŸŸçš„æ¨å¹¿ï¼Œè®¡ç®—å®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

    1. å®šä¹‰

        * 1.1 ç§¯åˆ†å®šä¹‰ï¼ˆ$Re(z) > 0$ï¼‰

            $$\Gamma(z) = \int_0^\infty t^{z-1} e^{-t} dt$$

            å¯¹äºæ­£æ•´æ•° $n$ï¼š

            $$\Gamma(n) = (n-1)!$$

            ç‰¹æ®Šå€¼ï¼š

            $$\Gamma(1) = 1,\ \Gamma(1/2) = \sqrt{\pi}$$

        * 1.2 é€’æ¨å…³ç³»

            $$\Gamma(z+1) = z \Gamma(z)$$

            è¿™ä¸ªæ€§è´¨è®©æˆ‘ä»¬å¯ä»¥å°†ä»»æ„å¤å¹³é¢ä¸Šçš„ $\Gamma$ å‡½æ•°è®¡ç®—è½¬åŒ–åˆ°ä¸»åŒºé—´ï¼ˆå¦‚ 1 â‰¤ Re(z) < 2ï¼‰ã€‚

    2. è®¡ç®—æ–¹æ³•

        * 2.1 ç›´æ¥æ•°å€¼ç§¯åˆ†

            * å¯¹ç§¯åˆ†å®šä¹‰å¼è¿›è¡Œæ•°å€¼ç§¯åˆ†ï¼ˆå¦‚ Gauss-Laguerre ç§¯åˆ†ï¼‰

            * é€‚ç”¨äº Re(z) > 0

        * 2.2 Lanczos è¿‘ä¼¼ï¼ˆæœ€å¸¸ç”¨ï¼‰

            è¿™æ˜¯è®¡ç®— $\Gamma$ å‡½æ•°æœ€æµè¡Œçš„é«˜ç²¾åº¦æ–¹æ³•ã€‚æ ¸å¿ƒå…¬å¼ï¼š

            $$\Gamma(z+1) = \sqrt{2 \pi} \left( z + g + \frac 1 2 \right)^{z + \frac 1 2} e^{-(z + g + \frac 1 2)} A_g(z)$$

            å…¶ä¸­ $g$ æ˜¯å¸¸æ•°ï¼ˆå¸¸ç”¨ $g = 607 / 128$ï¼Œ$A_g(z)$ æ˜¯ä¸€ç»„é¢„å…ˆè®¡ç®—çš„æœ‰ç†å‡½æ•°è¿‘ä¼¼ã€‚

            ç‰¹ç‚¹ï¼š

            * åœ¨æ•´ä¸ªå¤å¹³é¢ï¼ˆé™¤è´Ÿæ•´æ•°ç‚¹ï¼‰éƒ½æœ‰é«˜ç²¾åº¦

            * è®¡ç®—é€Ÿåº¦å¿«

            * è¢«å¤šæ•°æ•°å­¦åº“é‡‡ç”¨

    3. ç‰¹æ®Šæƒ…å†µçš„ç®€ä¾¿è®¡ç®—
    
        * 3.1 æ­£æ•´æ•°

            $$\Gamma(n) = (n-1)! = 1 \times 2 \times \cdots \times (n-1)$$

        * 3.2 åŠæ•´æ•°

            åˆ©ç”¨é€’æ¨å’Œ $\Gamma (1/2) = \sqrt{\pi}$:

            $$\Gamma(n + \frac 1 2) = \frac{(2n)!}{4^n n!} \sqrt{\pi}$$

            ä¾‹å¦‚ï¼š

            $$\Gamma(3/2) = \frac 1 2 \sqrt{\pi},\ \Gamma(5/2) = \frac 3 4 \sqrt{\pi}$$

        * 3.3 è´Ÿæ•°çš„ $\Gamma$ å‡½æ•°

            åˆ©ç”¨åå°„å…¬å¼ï¼š

            $$\Gamma(1-z) \Gamma(z) = \frac{\pi}{\sin (\pi z)}$$

            ä¾‹å¦‚ï¼š

            $$\Gamma(-1/2) = \frac{\Gamma(1/2)}{(-1 / 2)} = -2 \sqrt{\pi}$$

            æ³¨æ„ï¼šè´Ÿæ•´æ•°å¤„æ˜¯æç‚¹ï¼ˆå‘æ•£ï¼‰ã€‚

    4. å¸¸ç”¨è¿‘ä¼¼å…¬å¼

        * 4.1 Stirling å…¬å¼ï¼ˆå¤§ zï¼‰

            $$\Gamma(z) \sim \sqrt{\frac{2 \pi}{z}}(\frac{z}{e})^z (1 + \frac{1}{12 z} + \frac{1}{288 z^2} - \cdots)$$
            
            é€‚ç”¨äº $\lvert z \rvert$ è¾ƒå¤§æ—¶ã€‚

        * 4.2 å° z è¿‘ä¼¼

            ç”¨é€’æ¨è½¬åˆ° z>1 å†è®¡ç®—ã€‚

    5. å®é™…åº”ç”¨ä¸­çš„è®¡ç®—

        ç¼–ç¨‹å®ç°ï¼š

        * Python: math.gamma()ï¼ˆå®æ•°ï¼‰, scipy.special.gamma()ï¼ˆå¤æ•°ï¼‰

        * C++: std::tgamma()ï¼ˆC++11ï¼‰

        * MATLAB: gamma()

        * R: gamma()

        Python ç¤ºä¾‹ï¼š

        ```python
        import math
        print(math.gamma(5))      # 24.0
        print(math.gamma(2.5))    # 1.329340388179137
        ```

        æ³¨æ„äº‹é¡¹ï¼š

        * å¤§å‚æ•°å¯èƒ½æº¢å‡ºï¼ˆå¦‚ $\Gamma(172)$ è¶…è¿‡åŒç²¾åº¦æµ®ç‚¹ï¼‰

        * è´Ÿæ•´æ•°å‚æ•°è¿”å› NaN æˆ–æŠ¥é”™

        * å¯ç”¨å¯¹æ•° Gamma å‡½æ•°é¿å…æº¢å‡ºï¼š

            $$\ln \Gamma(z) = \ln(\Gamma(z))$$

            å‡½æ•°ï¼šmath.lgamma()ã€‚

    6. ä¸ Beta å‡½æ•°çš„å…³ç³»

        Beta å‡½æ•°é€šè¿‡ Î“ å‡½æ•°è®¡ç®—ï¼š

        $$\Beta(x, y) = \frac{\Gamma(x) \Gamma(y)}{\Gamma(x + y)}$$

        è¿™å°±æ˜¯ Beta åˆ†å¸ƒçš„å½’ä¸€åŒ–å¸¸æ•°çš„æ¥æºã€‚

    7. å†å²ä¸å‘å±•

        * ç”±æ¬§æ‹‰ï¼ˆ1729ï¼‰å’Œå‹’è®©å¾·ï¼ˆå‘½åï¼‰å¼•å…¥

        * æ¨å¹¿äº†é˜¶ä¹˜åˆ°éæ•´æ•°

        * åœ¨æ¦‚ç‡ç»Ÿè®¡ã€æ•°è®ºã€ç‰©ç†ä¸­å¹¿æ³›åº”ç”¨

    æ€»ç»“è®¡ç®—å»ºè®®ï¼š

    * æ—¥å¸¸ä½¿ç”¨ï¼šç›´æ¥è°ƒç”¨æ•°å­¦åº“å‡½æ•°

    * éœ€è¦ç†è§£ï¼šè®°ä½é€’æ¨å…¬å¼ $\Gamma(z + 1) = z \Gamma(z)$ å’Œ $\Gamma(1 / 2) = \sqrt{\pi}$

    * æ•°å€¼ç¨³å®šæ€§ï¼šå¤§å‚æ•°æ—¶ä½¿ç”¨å¯¹æ•° Gamma å‡½æ•°

    * å®ç°åŸç†ï¼šLanczos è¿‘ä¼¼æ˜¯å·¥ä¸šæ ‡å‡†æ–¹æ³•

* ubuntu 22.04.4 + virtual box 7.2.4 r170995 ä¸åŒè™šæ‹Ÿæ˜¾å¡é…ç½®

    vboxvga: å¼€æœºåå¡ä½ã€‚

    vboxsvga: å¼€æœºåå¡ä½ã€‚æœªå°è¯•å¼€ 3D åŠ é€Ÿã€‚

    vmsvga: å¼€æœºåé—ªå±ã€‚å¼€ 3d åŠ é€Ÿåæ¢å¤æ­£å¸¸ã€‚setting ä¹Ÿèƒ½æ­£å¸¸æ‰“å¼€ã€‚

* vim å®‰è£… markdown preview æ’ä»¶

    æ’ä»¶ï¼š`'iamcco/markdown-preview.nvim'`

    å®‰è£…ï¼š

    1. åœ¨`.vimrc`ä¸­æ·»åŠ 

        ```vim
        call plug#begin()

        " List your plugins here
        " Plug 'tpope/vim-sensible'
        "
        " Plug 'plasticboy/vim-markdown'

        Plug 'iamcco/markdown-preview.nvim', { 'do': { -> mkdp#util#install() }, 'for': ['markdown', 'vim-plug']}

        call plug#end()
        ```

        ï¼ˆéœ€æå‰å®‰è£… VimPlugï¼‰

    2. æ‰“å¼€ä¸€ä¸ª vimï¼Œè¾“å…¥å‘½ä»¤ï¼š`:PlugInstall`

        æ­¤æ—¶ä¼š clone github repoï¼Œç„¶åå°è¯•ç¼–è¯‘å’Œå®‰è£…ã€‚

        è¿™ä¸ª repo æ˜¯ä¸€ä¸ª js é¡¹ç›®ï¼Œéœ€è¦ npm å®‰è£…ä¸€äº›åŒ…ï¼Œå¦‚æœç¯å¢ƒæ²¡æœ‰æŒ‚å¢ƒå¤–ä»£ç†ï¼Œå¯èƒ½ä¼šå¤±è´¥ã€‚å³ä½¿ repo ç¼–è¯‘å®‰è£…å¤±è´¥ï¼ŒVimPlug ä¹Ÿä¼šæ˜¾ç¤ºæ’ä»¶å®‰è£…æˆåŠŸã€‚å®é™…ä¸Šæ­¤æ—¶å¹¶æ²¡æœ‰å®‰è£…æˆåŠŸã€‚

        å¯ä»¥æ‰“å¼€ä¸€ä¸ª md æ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤`:MarkdownPreview`è¯•ä¸€ä¸‹ï¼Œå¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿï¼Œè¯´æ˜æ²¡æœ‰å®‰è£…æˆåŠŸã€‚

    3. å¦‚æœ repo å·²ç» clone äº†ï¼Œä½†æ˜¯æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•

        è¿›å…¥`~/.vim/plugged/markdown-preview.nvim/app`, æ‰§è¡Œ

        `sudo npm install`

        å¦‚æœéœ€è¦è®¾ç½®ä»£è¡¨ï¼Œå…ˆé…ç½®å¥½`http_proxy`, `https_proxy`å†æ‰§è¡Œ npm installã€‚
        
        å¦‚æœ app ç›®å½•ä¸­æœ‰`node_modules`ï¼Œå¹¶ä¸” npm æ²¡æœ‰ä»€ä¹ˆæŠ¥é”™ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡å®‰è£…æˆåŠŸäº†ã€‚æ‰¾ä¸€ä¸ª md æ–‡ä»¶æµ‹è¯•ä¸€ä¸‹å³å¯ã€‚

* vim æ¸²æŸ“ markdown ä½¿ç”¨ä»€ä¹ˆæ’ä»¶

    åœ¨Vimä¸­æ¸²æŸ“Markdownæœ‰å¤šç§é€‰æ‹©ï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨çš„æ’ä»¶ï¼š

    ğŸŒŸ ä¸»æµé€‰æ‹©

    1. Markdowné¢„è§ˆæ’ä»¶

        * markdown-preview.nvim - æœ€æµè¡Œçš„å®æ—¶é¢„è§ˆæ’ä»¶

            ```vim
            " å®‰è£…
            Plug 'iamcco/markdown-preview.nvim'
            ```

            æ”¯æŒå®æ—¶é¢„è§ˆ

            è‡ªåŠ¨åˆ·æ–°

            æ”¯æŒæ•°å­¦å…¬å¼ã€ä»£ç é«˜äº®

        * glow.nvim - ä½¿ç”¨glowæ¸²æŸ“

            ```vim
            Plug 'ellisonleao/glow.nvim'
            ```

    2. è¯­æ³•é«˜äº®å¢å¼º

        * vim-markdown - å¢å¼ºMarkdownè¯­æ³•é«˜äº®

            ```vim
            Plug 'plasticboy/vim-markdown'
            ```

            æŠ˜å æ”¯æŒ

            æ›´å¥½çš„è¯­æ³•é«˜äº®

            TOCç”Ÿæˆ

        * vim-markdown-toc - ç”Ÿæˆç›®å½•

            ```vim
            Plug 'mzlogin/vim-markdown-toc'
            ```

    ğŸ”§ é…ç½®ç¤ºä¾‹

    ```vim
    " åŸºæœ¬é…ç½®
    call plug#begin()
    Plug 'iamcco/markdown-preview.nvim', { 'do': 'cd app && yarn install' }
    Plug 'plasticboy/vim-markdown'
    call plug#end()

    " Markdowné¢„è§ˆè®¾ç½®
    let g:mkdp_auto_start = 0
    let g:mkdp_auto_close = 1
    let g:mkdp_refresh_slow = 0
    let g:mkdp_command_for_global = 0
    let g:mkdp_open_to_the_world = 0

    " å¿«æ·é”®æ˜ å°„
    nmap <silent> <leader>mp <Plug>MarkdownPreview
    nmap <silent> <leader>ms <Plug>MarkdownPreviewStop
    nmap <silent> <leader>mt <Plug>MarkdownPreviewToggle
    ```

    ğŸš€ ä½¿ç”¨æ–¹å¼

    * å®æ—¶é¢„è§ˆï¼šæ‰“å¼€Markdownæ–‡ä»¶ï¼ŒæŒ‰<leader>mp

    * åœæ­¢é¢„è§ˆï¼šæŒ‰<leader>ms

    * åˆ‡æ¢é¢„è§ˆï¼šæŒ‰<leader>mt

    ğŸ’¡ å…¶ä»–é€‰æ‹©

    * ç»ˆç«¯å†…æ¸²æŸ“

        * mdv - ç»ˆç«¯å†…æŸ¥çœ‹Markdown

        * glow - ç¾è§‚çš„ç»ˆç«¯æ¸²æŸ“

        * mdcat - catçš„Markdownç‰ˆæœ¬

    * Neovimä¸“å±

        * markdown-preview.nvimï¼ˆä¹Ÿæ”¯æŒNeovimï¼‰

        * neovimå†…ç½®LSP + markdownè¯­è¨€æœåŠ¡å™¨

    ğŸ“‹ æ¨èç»„åˆ

    å¯¹äºå¤§å¤šæ•°ç”¨æˆ·ï¼Œæˆ‘æ¨èï¼š

    ```text
    markdown-preview.nvim + vim-markdown
    ```

    è¿™ä¸ªç»„åˆæä¾›äº†å®Œæ•´çš„Markdownç¼–å†™ä½“éªŒã€‚

* å¦‚ä½•éªŒè¯vim Plugæ˜¯å¦å®‰è£…æˆåŠŸï¼Ÿ

    éªŒè¯Vim Plugæ˜¯å¦å®‰è£…æˆåŠŸæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

    ğŸ” åŸºæœ¬æ£€æŸ¥æ–¹æ³•

    1. æŸ¥çœ‹æ’ä»¶ç›®å½•ç»“æ„

        ```bash
        # æ£€æŸ¥Plugæ˜¯å¦å·²å…‹éš†
        ls -la ~/.vim/autoload/
        # åº”è¯¥èƒ½çœ‹åˆ° plug.vim æ–‡ä»¶
        ```

    2. åœ¨Vimä¸­æµ‹è¯•å‘½ä»¤

        ```vim
        :PlugStatus    " æŸ¥çœ‹æ’ä»¶çŠ¶æ€
        :PlugInstall   " å°è¯•å®‰è£…æ’ä»¶ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œè¯´æ˜Plugæ­£å¸¸å·¥ä½œï¼‰
        :PlugUpdate    " æ›´æ–°æ’ä»¶
        :PlugClean     " æ¸…ç†æœªä½¿ç”¨çš„æ’ä»¶
        ```

    3. æ£€æŸ¥Vimç‰ˆæœ¬å’ŒåŠŸèƒ½

        ```vim
        " åœ¨Vimä¸­æ‰§è¡Œ
        :version
        " ç¡®è®¤æ”¯æŒ +eval å’Œ +python3ï¼ˆéƒ¨åˆ†æ’ä»¶éœ€è¦ï¼‰
        ```

    ğŸ“ åˆ›å»ºæµ‹è¯•é…ç½®éªŒè¯

    æ­¥éª¤1ï¼šåˆ›å»ºæµ‹è¯•é…ç½®

    ```vim
    " ~/.vimrc ä¸­æ·»åŠ æµ‹è¯•ä»£ç 
    call plug#begin('~/.vim/plugged')

    " å®‰è£…ä¸€ä¸ªç®€å•æ’ä»¶æµ‹è¯•
    Plug 'junegunn/vim-easy-align'

    call plug#end()
    ```

    æ­¥éª¤2ï¼šé‡æ–°åŠ è½½å¹¶å®‰è£…

    ```bash
    # é‡æ–°åŠ è½½é…ç½®
    vim +'source ~/.vimrc'

    # æˆ–åœ¨Vimä¸­
    :source ~/.vimrc
    :PlugInstall
    ```

    æ­¥éª¤3ï¼šéªŒè¯å®‰è£…

    ```bash
    # æ£€æŸ¥æ’ä»¶æ˜¯å¦ä¸‹è½½
    ls ~/.vim/plugged/
    # åº”è¯¥èƒ½çœ‹åˆ° vim-easy-align ç›®å½•
    ```

    âœ… å®Œæ•´çš„éªŒè¯æµç¨‹

    æ–¹æ³•ä¸€ï¼šä½¿ç”¨å†…ç½®å‘½ä»¤

    ```vim
    " 1. æ£€æŸ¥Plugå‘½ä»¤æ˜¯å¦å­˜åœ¨
    :command Plug

    " 2. æ£€æŸ¥æ’ä»¶åˆ—è¡¨
    :scriptnames
    " åœ¨åˆ—è¡¨ä¸­åº”è¯¥èƒ½çœ‹åˆ° plug.vim

    " 3. æµ‹è¯•æ’ä»¶åŠŸèƒ½
    " å®‰è£…æµ‹è¯•æ’ä»¶åï¼ŒéªŒè¯å…¶åŠŸèƒ½
    :EasyAlign     " å¦‚æœvim-easy-alignå®‰è£…æˆåŠŸï¼Œè¿™ä¸ªå‘½ä»¤åº”è¯¥å¯ç”¨
    ```

    æ–¹æ³•äºŒï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£

    ```vim
    :help plug.txt
    " å¦‚æœèƒ½çœ‹åˆ°Plugçš„å¸®åŠ©æ–‡æ¡£ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ
    ```

    æ–¹æ³•ä¸‰ï¼šåˆ›å»ºæµ‹è¯•è„šæœ¬

    ```bash
    #!/bin/bash
    # test_vim_plug.sh

    echo "æ£€æŸ¥Vim PlugçŠ¶æ€..."

    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if [ -f ~/.vim/autoload/plug.vim ]; then
        echo "âœ… Plug.vim æ–‡ä»¶å­˜åœ¨"
    else
        echo "âŒ Plug.vim æ–‡ä»¶ä¸å­˜åœ¨"
        exit 1
    fi

    # åœ¨Vimä¸­æµ‹è¯•
    echo "åœ¨Vimä¸­æµ‹è¯•Plugå‘½ä»¤..."
    vim -c 'PlugStatus' -c 'qa!' > /dev/null 2>&1

    if [ $? -eq 0 ]; then
        echo "âœ… PlugStatus å‘½ä»¤æ‰§è¡ŒæˆåŠŸ"
    else
        echo "âŒ PlugStatus å‘½ä»¤æ‰§è¡Œå¤±è´¥"
    fi

    echo ""
    echo "éªŒè¯å®Œæˆï¼"
    ```

    ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

    * å¦‚æœPlugæœªå®‰è£…ï¼š

        ```bash
        # æ‰‹åŠ¨å®‰è£…Vim Plug
        curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
            https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
        ```

    * å¦‚æœå‘½ä»¤ä¸å¯ç”¨ï¼š

        * æ£€æŸ¥Vimç‰ˆæœ¬ï¼šç¡®ä¿Vimç‰ˆæœ¬ â‰¥ 7.0

        * æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š
    
            ```bash
            chmod 755 ~/.vim/autoload/
            chmod 644 ~/.vim/autoload/plug.vim
            ```

        * æ£€æŸ¥é…ç½®è¯­æ³•ï¼š

            ```vim
            " ç¡®ä¿.vimrcä¸­æ­£ç¡®é…ç½®
            call plug#begin('~/.vim/plugged')
            " æ’ä»¶åˆ—è¡¨
            call plug#end()
            ```

    æµ‹è¯•å®Œæˆåï¼ŒéªŒè¯ä¸€ä¸ªçœŸå®æ’ä»¶ï¼š

    ```vim
    " å®‰è£…å¹¶éªŒè¯ä¸€ä¸ªçœŸå®æ’ä»¶
    call plug#begin('~/.vim/plugged')
    Plug 'tpope/vim-surround'  " ä¸€ä¸ªå¸¸ç”¨æ’ä»¶
    call plug#end()

    " åœ¨Vimä¸­
    :PlugInstall
    " æµ‹è¯•æ’ä»¶åŠŸèƒ½
    :help surround  " åº”è¯¥èƒ½çœ‹åˆ°å¸®åŠ©æ–‡æ¡£
    ```

    ğŸ“Š éªŒè¯ç»“æœç¤ºä¾‹

    æˆåŠŸçš„å®‰è£…ä¼šæ˜¾ç¤ºï¼š

    ```text
    âœ… ~/.vim/autoload/plug.vim æ–‡ä»¶å­˜åœ¨
    âœ… :PlugStatus æ˜¾ç¤ºæ’ä»¶åˆ—è¡¨
    âœ… :PlugInstall èƒ½æ­£å¸¸ä¸‹è½½æ’ä»¶
    âœ… æ’ä»¶ç›®å½• (~/.vim/plugged/) ä¸­æœ‰ä¸‹è½½çš„æ’ä»¶
    ```

    æœ€ç®€å•çš„å¿«é€ŸéªŒè¯å‘½ä»¤ï¼š

    ```bash
    vim +PlugStatus +qa
    ```

    å¦‚æœæ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œè¯´æ˜Plugå®‰è£…æˆåŠŸï¼

* markdown-preview.nvim

    markdown-preview.nvim è¯¦ç»†ä½¿ç”¨æŒ‡å—

    ğŸ“¦ å®‰è£…é…ç½®

    1. å®‰è£…æ’ä»¶

        ```vim
        " ä½¿ç”¨ vim-plug
        Plug 'iamcco/markdown-preview.nvim', { 'do': 'cd app && yarn install' }

        " ä½¿ç”¨ lazy.nvim
        {
            'iamcco/markdown-preview.nvim',
            cmd = { 'MarkdownPreviewToggle', 'MarkdownPreview', 'MarkdownPreviewStop' },
            ft = { 'markdown' },
            build = 'cd app && yarn install',
        }
        ```

    2. åŸºç¡€é…ç½®

        ```vim
        " è®¾ç½®é»˜è®¤é€‰é¡¹
        let g:mkdp_auto_start = 0           " ä¸è‡ªåŠ¨å¼€å¯é¢„è§ˆ
        let g:mkdp_auto_close = 1           " åˆ‡æ¢bufferæ—¶è‡ªåŠ¨å…³é—­é¢„è§ˆ
        let g:mkdp_refresh_slow = 0         " å®æ—¶åˆ·æ–°ï¼ˆ1=åªåœ¨ä¿å­˜æ—¶åˆ·æ–°ï¼‰
        let g:mkdp_command_for_global = 0   " 0=ä»…markdownæ–‡ä»¶ï¼Œ1=æ‰€æœ‰æ–‡ä»¶
        let g:mkdp_open_to_the_world = 0    " 0=æœ¬åœ°ï¼Œ1=å…è®¸å¤–éƒ¨è®¿é—®

        " æµè§ˆå™¨é€‰é¡¹
        let g:mkdp_browser = ''             " ç©º=é»˜è®¤æµè§ˆå™¨ï¼Œæˆ–æŒ‡å®š 'chrome', 'firefox'
        let g:mkdp_browserfunc = ''         " è‡ªå®šä¹‰æµè§ˆå™¨æ‰“å¼€å‡½æ•°

        " é¢„è§ˆé€‰é¡¹
        let g:mkdp_preview_options = {
            \ 'mkit': {},
            \ 'katex': {},
            \ 'uml': {},
            \ 'maid': {},
            \ 'disable_sync_scroll': 0,
            \ 'sync_scroll_type': 'middle',
            \ 'hide_yaml_meta': 1,
            \ 'sequence_diagrams': {},
            \ 'flowchart_diagrams': {},
            \ 'content_editable': v:false,
            \ 'disable_filename': 0
            \ }

        " ä¸»é¢˜é€‰é¡¹
        let g:mkdp_theme = 'dark'           " 'dark' æˆ– 'light'

        " æ–‡ä»¶è·¯å¾„
        let g:mkdp_filetypes = ['markdown'] " å¯ç”¨é¢„è§ˆçš„æ–‡ä»¶ç±»å‹
        ```

    ğŸš€ åŸºæœ¬ä½¿ç”¨

    * å¿«æ·é”®æ˜ å°„ï¼ˆæ¨èé…ç½®ï¼‰

        ```vim
        " æ­£å¸¸æ¨¡å¼å¿«æ·é”®
        nmap <silent> <C-m> <Plug>MarkdownPreview        " å¼€å¯/åˆ·æ–°é¢„è§ˆ
        nmap <silent> <C-s> <Plug>MarkdownPreviewStop    " å…³é—­é¢„è§ˆ
        nmap <silent> <C-p> <Plug>MarkdownPreviewToggle  " åˆ‡æ¢é¢„è§ˆ

        " æˆ–ä½¿ç”¨ leader é”®
        nmap <leader>mp <Plug>MarkdownPreview
        nmap <leader>ms <Plug>MarkdownPreviewStop
        nmap <leader>mt <Plug>MarkdownPreviewToggle

        " æ’å…¥æ¨¡å¼ä¹Ÿå¯ä»¥æ˜ å°„
        imap <C-m> <esc><Plug>MarkdownPreview<cr>a
        ```

    * å‘½ä»¤è¡Œå‘½ä»¤

        ```vim
        :MarkdownPreview          " å¯åŠ¨é¢„è§ˆ
        :MarkdownPreviewStop      " åœæ­¢é¢„è§ˆ
        :MarkdownPreviewToggle    " åˆ‡æ¢é¢„è§ˆçŠ¶æ€
        ```

    âš™ï¸ é«˜çº§é…ç½®

    * è‡ªå®šä¹‰æµè§ˆå™¨

        ```vim
        " ä½¿ç”¨ Chrome
        let g:mkdp_browser = 'chrome'

        " æˆ–æŒ‡å®šæµè§ˆå™¨è·¯å¾„
        let g:mkdp_browser = '/usr/bin/google-chrome-stable'

        " è‡ªå®šä¹‰æ‰“å¼€å‡½æ•°ï¼ˆLinuxç¤ºä¾‹ï¼‰
        let g:mkdp_browserfunc = 'OpenMarkdownPreview'
        function! OpenMarkdownPreview(url)
        silent exec "!xdg-open " . a:url
        endfunction
        ```

    * åŒæ­¥æ»šåŠ¨é…ç½®

        ```vim
        " åŒæ­¥æ»šåŠ¨ç±»å‹
        " 'relative' - ç›¸å¯¹ä½ç½®åŒæ­¥
        " 'middle'   - å…‰æ ‡åœ¨ä¸­é—´
        " 'absolute' - ç»å¯¹ä½ç½®åŒæ­¥
        let g:mkdp_preview_options = {
            \ 'sync_scroll_type': 'middle',
            \ 'disable_sync_scroll': 0
            \ }
        ```

    * ç«¯å£å’Œåœ°å€é…ç½®

        ```vim
        " æŒ‡å®šç«¯å£ï¼ˆé¿å…å†²çªï¼‰
        let g:mkdp_port = '8080'

        " æŒ‡å®šåœ°å€
        let g:mkdp_host = '127.0.0.1'

        " å…è®¸å¤–éƒ¨è®¿é—®ï¼ˆè¿œç¨‹æœåŠ¡å™¨ç”¨ï¼‰
        let g:mkdp_open_to_the_world = 1
        let g:mkdp_open_ip = '0.0.0.0'  " ç›‘å¬æ‰€æœ‰åœ°å€
        ```

    * ä¸»é¢˜å’Œæ ·å¼

        ```vim
        " ä¸»é¢˜è®¾ç½®
        let g:mkdp_theme = 'dark'

        " è‡ªå®šä¹‰CSS
        let g:mkdp_markdown_css = expand('~/.config/markdown.css')
        let g:mkdp_highlight_css = expand('~/.config/highlight.css')

        " è‡ªåŠ¨æ ¹æ®ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢
        function! SetMarkdownTheme()
        if strftime('%H') < 18 && strftime('%H') > 6
            let g:mkdp_theme = 'light'
        else
            let g:mkdp_theme = 'dark'
        endif
        endfunction
        autocmd BufEnter *.md call SetMarkdownTheme()
        ```

    ğŸ” è°ƒè¯•å’Œé—®é¢˜æ’æŸ¥

    * æŸ¥çœ‹é¢„è§ˆURL

        ```vim
        :echo g:mkdp_browserfunc
        :echo g:mkdp_port
        :echo g:mkdp_host
        ```

    * æ£€æŸ¥è¿›ç¨‹

        ```bash
        # æŸ¥çœ‹é¢„è§ˆæœåŠ¡å™¨è¿›ç¨‹
        ps aux | grep markdown
        netstat -tlnp | grep 8080
        ```

    å¸¸è§é—®é¢˜è§£å†³

    * é¢„è§ˆä¸æ›´æ–°
    
        ```vim
        " è®¾ç½®å®æ—¶åˆ·æ–°
        let g:mkdp_refresh_slow = 0
        ```

    * æµè§ˆå™¨ä¸æ‰“å¼€

        ```vim
        " æ˜ç¡®æŒ‡å®šæµè§ˆå™¨
        let g:mkdp_browser = 'firefox'
        ```

    * ç«¯å£è¢«å ç”¨
        
        ```vim
        " æ›´æ¢ç«¯å£
        let g:mkdp_port = '8888'
        ```

    * æ•°å­¦å…¬å¼ä¸æ˜¾ç¤º

        ```vim
        " ç¡®ä¿å¯ç”¨katex
        let g:mkdp_preview_options = {
            \ 'katex': {},
            \ }
        ```

    ğŸ¨ å®ç”¨æŠ€å·§

    * è‡ªåŠ¨æ¨¡å¼

        ```vim
        " è‡ªåŠ¨å¼€å¯é¢„è§ˆï¼ˆè¿›å…¥markdownæ–‡ä»¶æ—¶ï¼‰
        autocmd FileType markdown let g:mkdp_auto_start = 1

        " ç¦»å¼€æ—¶è‡ªåŠ¨å…³é—­
        autocmd BufLeave *.md :MarkdownPreviewStop
        ```

    * ä¸æ–‡ä»¶æ ‘æ’ä»¶é…åˆ

        ```vim
        " ä½¿ç”¨NERDTreeæ—¶
        autocmd BufWinEnter *.md if &ft == 'markdown' | NERDTreeClose | endif
        autocmd BufWinLeave *.md if &ft == 'markdown' | NERDTreeToggle | endif
        ```

    * æ€§èƒ½ä¼˜åŒ–

        ```vim
        " å¤§æ–‡ä»¶æ—¶ç¦ç”¨å®æ—¶åˆ·æ–°
        autocmd BufReadPost *.md 
            \ if line('$') > 1000 |
            \   let g:mkdp_refresh_slow = 1 |
            \ endif
        ```

    * å¤šæ ‡ç­¾é¡µæ”¯æŒ

        ```vim
        " æ¯ä¸ªmarkdownæ–‡ä»¶ç‹¬ç«‹é¢„è§ˆ
        let g:mkdp_page_title = 'ã€Œ${name}ã€'
        ```

    ğŸ“‹ å®Œæ•´é…ç½®ç¤ºä¾‹

    ```vim
    " ~/.vimrc æˆ– ~/.config/nvim/init.vim
    call plug#begin()
    Plug 'iamcco/markdown-preview.nvim', { 'do': 'cd app && yarn install' }
    call plug#end()

    " Markdowné¢„è§ˆé…ç½®
    let g:mkdp_auto_start = 0
    let g:mkdp_auto_close = 1
    let g:mkdp_refresh_slow = 0
    let g:mkdp_command_for_global = 0
    let g:mkdp_browser = 'chrome'
    let g:mkdp_theme = 'dark'
    let g:mkdp_port = '8888'

    " å¿«æ·é”®
    nmap <leader>mp <Plug>MarkdownPreview
    nmap <leader>ms <Plug>MarkdownPreviewStop
    nmap <leader>mt <Plug>MarkdownPreviewToggle

    " è‡ªåŠ¨å‘½ä»¤
    autocmd FileType markdown nnoremap <buffer> <leader>p :MarkdownPreview<CR>
    autocmd FileType markdown nnoremap <buffer> <leader>s :MarkdownPreviewStop<CR>
    ```

    ğŸª å·¥ä½œæµç¨‹

    * ç¼–è¾‘æ–‡ä»¶ï¼šç”¨Vimç¼–è¾‘ .md æ–‡ä»¶

    * å¼€å¯é¢„è§ˆï¼šæŒ‰ <leader>mp æˆ– :MarkdownPreview

    * å®æ—¶ç¼–è¾‘ï¼šç¼–è¾‘å†…å®¹ï¼Œé¢„è§ˆè‡ªåŠ¨æ›´æ–°

    * å…³é—­é¢„è§ˆï¼šæŒ‰ <leader>ms æˆ–å…³é—­Vimæ—¶è‡ªåŠ¨å…³é—­

    * åˆ‡æ¢ä¸»é¢˜ï¼šä¿®æ”¹ g:mkdp_theme æˆ–ä½¿ç”¨CSSè‡ªå®šä¹‰
    